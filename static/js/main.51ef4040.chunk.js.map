{"version":3,"sources":["player/playerStats.ts","player/playerStorage.ts","constants/constants.ts","game_objects/gameObject.ts","game_objects/explosion.ts","utils/math.ts","game_objects/colidingObject.ts","game_objects/squaredObstacle.ts","game_objects/obstacleFactory.ts","utils/audioPlayer.ts","game_objects/magazine.ts","game_objects/projectile.ts","utils/array.ts","game_objects/tank.ts","assets/imgs/logo.svg","components/game/tankStats.tsx","components/game/gameArea.tsx","game_objects/gameUtils.ts","components/screens/homePage.tsx","utils/color.ts","components/screens/addPlayerMenu.tsx","assets/imgs/default_avatar.png","components/screens/newGamePage.tsx","components/screens/playerTable.tsx","components/screens/resultsPage.tsx","utils/fileDialog.ts","components/messageBox.ts","components/tankGame.tsx","components/screens/statsPage.tsx","components/logo.tsx","reportWebVitals.ts","index.tsx"],"names":["newEmptyPlayer","id","name","color","avatar","wins","loses","dmgDealt","dmgReceived","kills","winRatio","player","games","sortPlayers","players","sort","a","b","aRatio","bRatio","PlayerStorage","storageSupported","saved","localStorage","getItem","JSON","parse","console","warn","setItem","stringify","maxId","push","persist","filter","p","update","Storage","initPlayers","map","reduce","prev","cur","Math","max","BASE_CANVAS_WIDTH","BASE_GROUND_START","BASE_TANK_WIDTH","BASE_TANK_HEIGHT","GameObject","xPos","yPos","this","xDif","yDif","animationSteps","r","animationLen","length","Explosion","x","y","radius","animationRate","t","ctx","ratio","floor","forEach","c","drawCircle","circle","beginPath","arc","getXPos","getYPos","PI","fillStyle","fill","mod","n","m","euclideanDistance","xA","yA","xB","yB","sqrt","ColidingObject","SquaredObstacleColumn","squares","animationOn","xCenter","animationTime","OBSTACLE_PART_SIZE","s","i","yCenter","getRadius","getExplosionRadius","pop","some","isAnimationTime","falseFound","isSquareCollision","animate","fillRect","ceil","checkConsistency","squareCollide","SquaredObstacle","columns","columnsCount","highest","isEmpty","shift","isCollision","show","col","isAnimationOn","filterMarginColumns","getColumnsCount","collide","ObstacleFactory","xLeft","yBottom","methods","Object","getOwnPropertyNames","prototype","random","walls","w","doors","d","g","roofs","AudioPlayer","Audio","src","loop","volume","log","play","backgroundMusicAudio","pause","initBackgroundMusic","ProjIndex","Projectile","originId","stats","angleErr","exploded","speed","explosionRadius","damage","mass","xInit","yInit","angleCos","angleSin","windXDiff","explosionSound","LARGEST_PROJ_DMG","angle","cos","sin","wind","dt","xPrev","yPrev","diff","minX","minY","maxX","maxY","PROJ_INFOS","description","PROJ_DESCRIPTIONS","info","MULTI_ANGLE_ERRORS","Magazine","big","multi","projectiles","curIndex","Infinity","playerId","BIG","loadNext","MULTI","arr","size","temp","index","shuffled","slice","min","getRandomSubarray","ae","STANDARD","TOTAL_COUNT","loadPrev","Tank","health","gunAngle","magazine","lastLaunchSpeed","setColor","dmg","angleDif","getProjectile","launch","xGunEnd","yGunEnd","getCurrentProjectileShortStats","getCurrentProjectileLongStats","lineWidth","save","translate","rotate","moveTo","lineTo","stroke","restore","TankStats","props","tank","getHealth","nameStyle","hpStyle","className","style","getName","getDamageDealt","getKills","React","initPositions","o","GameArea","canvas","sizeRatio","footer","roundPlayerInfoDiv","windDiv","ammoShortInfo","ammoLongInfo","launchSpeedInput","curTankIdx","movement","gunMovement","fireClicked","obstacles","explosions","initWind","round","lastUpdateTime","Date","now","clearRect","width","BASE_CANVAS_HEIGHT","moveTank","curTank","moveGun","wereProjectiles","move","canReturnToRange","isExploded","e","state","tanks","setXPos","setYPos","wasAnimation","isAnimation","gameInProgress","fire","isAlive","endGame","nextRound","requestAnimationFrame","Number","value","updateAmmoInfo","disableButtons","shotSound","beforeIdx","innerText","String","getLastLaunchSpeed","formatWind","disable","getElementsByTagName","disabled","explode","proj","originTank","find","getId","getOriginId","centerDistance","receiveDamage","getDamage","addKill","changeDamageDealt","setState","getPlayer","winner","winnerId","NaN","undefined","onEnd","newLeft","newRight","_","every","tankLeft","tankRight","obstacleLeft","obstacleRight","diffXPos","strWind","abs","text","onTrigger","onReset","button","document","createElement","textContent","onmousedown","onmouseup","onmouseleave","ontouchstart","ontouchend","ontouchcancel","span","div","classList","add","logoImg","logo","alt","appendChild","moveGunDiv","movementDiv","createButton","createSpan","gunDiv","ammoFire","ammoDiv","loadPrevProjectile","ammoInfoDiv","loadNextProjectile","type","fireDiv","windowWidth","window","innerWidth","height","positions","distance","obstacleFactory","pos","gameArea","getElementById","addEventListener","computeSize","getContext","canvasContainer","createInfoDiv","createMoveGunDiv","createAmmoFireDiv","insertAdjacentElement","HomePage","onClick","onNewGame","onStats","randomRGB","toString","padStart","AddPlayerMenu","handleNameChange","event","target","onPlayerChange","handleColorChange","handleStoredPlayerChange","availableStoredPlayers","handleDragStart","dataTransfer","setData","handleDragOver","preventDefault","handleDragDrop","from","getData","isNaN","onDragChange","draggable","onDragStart","onDragOver","onDrop","isQuick","onRemove","htmlFor","onChange","placeholder","spellCheck","autoComplete","maxLength","NewGamePage","handleAddQuickPlayer","minUsedId","participants","defaultAvatar","handleAddStoredPlayer","availableStored","handleRemovePlayer","deleted","splice","handlePlayerChange","available","previous","handleDragChange","to","before","moved","fromValue","after","newArray","getStoredPlayers","playersCountError","nameError","onBack","onSubmit","PlayerTable","handleDelete","onDelete","showWins","showDelete","Component","ResultsPage","FileDialog","maxBs","Promise","resolve","reject","element","innerHTML","fileInput","firstChild","file","files","toLowerCase","endsWith","reader","FileReader","onload","url","result","readAsDataURL","click","cssConstants","getComputedStyle","querySelector","boxMargin","getPropertyValue","MessageBox","box","visibility","onmouseenter","clearHideTimeout","setHideTimeout","paragraph","onclick","hideBox","moveBox","body","msg","error","firstElementChild","toggle","display","hideTimeout","init","hideIntervalId","setTimeout","clearTimeout","clientWidth","ScreenType","StatsPage","handleNewPlayerNameChange","newPlayerName","handleAddNewPlayer","saveNewPlayer","handleDeletePlayer","removePlayer","changeAvatar","openPNG","then","img","message","catch","Logo","shootGrenade","timeouts","returnGrenade","clearInterval","h","classes","xmlns","viewBox","cursor","ry","rx","cy","cx","opacity","strokeDasharray","strokeWidth","strokeOpacity","transform","fontStyle","fontWeight","xmlSpace","textAnchor","fontFamily","fontSize","fillOpacity","TankGame","toggleBackgroundMusic","newState","backgroundMusic","startBackgroundMusic","pauseBackgroundMusic","renderHomePage","screen","NEW_GAME","STATS","renderStats","HOME","renderNewGamePage","GAME","currentPlayers","renderGame","updatePlayer","RESULTS","renderResults","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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AAGA,EAAGA,EAAGH,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGE,EAAGA,EAAGA,EAAGA,EAAGA,EAAGF,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAAG5E,EAAGA,EAAGA,GACjD,CAAC4E,EAAGA,EAAGA,EAAGG,EAAGA,EAAGA,EAAGH,EAAGA,EAA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","file":"static/js/main.51ef4040.chunk.js","sourcesContent":["/**\r\n * Stats about a player. It can be used for storing in local storage\r\n * as well as for partial results from one game.\r\n */\r\nexport interface PlayerStats {\r\n  id: number;\r\n  name: string;\r\n  color: string;\r\n  avatar: string;\r\n  wins: number;\r\n  loses: number;\r\n  dmgDealt: number;\r\n  dmgReceived: number;\r\n  kills: number;\r\n}\r\n\r\n/**\r\n * Creates a new PlayerStats with all values set to 0 except the given ones.\r\n */\r\nexport function newEmptyPlayer(\r\n  id: number,\r\n  name: string,\r\n  color: string = \"\",\r\n  avatar: string = \"\"\r\n): PlayerStats {\r\n  return {\r\n    id: id,\r\n    name: name,\r\n    color: color,\r\n    avatar: avatar,\r\n    wins: 0,\r\n    loses: 0,\r\n    dmgDealt: 0,\r\n    dmgReceived: 0,\r\n    kills: 0\r\n  };\r\n}\r\n\r\n/**\r\n * Return player win ratio as number from <0, 1>.\r\n */\r\nexport function winRatio(player: PlayerStats): number {\r\n  const games = player.wins + player.loses;\r\n  return games === 0 ? 0 : player.wins / games;\r\n}\r\n\r\n/**\r\n * Sort players according to their stats.\r\n */\r\nexport function sortPlayers(players: PlayerStats[]): PlayerStats[] {\r\n  players.sort((a, b) => {\r\n    const aRatio = winRatio(a);\r\n    const bRatio = winRatio(b);\r\n    if (aRatio > bRatio) {\r\n      return -1;\r\n    }\r\n    if (aRatio < bRatio) {\r\n      return 1;\r\n    }\r\n    return (b.kills * 10 + b.dmgDealt - b.dmgReceived) - (a.kills * 10 + a.dmgDealt - a.dmgReceived);\r\n  });\r\n  return players;\r\n}\r\n","import { newEmptyPlayer, PlayerStats } from \"./playerStats\";\r\n\r\n/**\r\n * Maximal size of avatar image in bytes.\r\n */\r\nexport const maxAvatarSize: number = 2048;\r\n\r\n/**\r\n * Wrapper of accessing browser localStorage for storing player stats.\r\n */\r\nexport class PlayerStorage {\r\n  private static storageSupported: boolean = typeof Storage !== \"undefined\";\r\n  private static players: PlayerStats[] = PlayerStorage.initPlayers();\r\n  private static maxId: number = PlayerStorage.players\r\n    .map(p => p.id)\r\n    .reduce((prev, cur) => {\r\n      return Math.max(prev, cur);\r\n    }, 0);\r\n\r\n  /**\r\n   * Loads players from the local storage.\r\n   */\r\n  private static initPlayers(): PlayerStats[] {\r\n    if (PlayerStorage.storageSupported) {\r\n      const saved = localStorage.getItem(\"players\");\r\n      if (saved === null) {\r\n        return [];\r\n      }\r\n      return JSON.parse(saved);\r\n    } else {\r\n      console.warn(\"Local storage not supported.\");\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates localStorage to current player stats.\r\n   */\r\n  private static persist(): void {\r\n    localStorage.setItem(\"players\", JSON.stringify(PlayerStorage.players));\r\n  }\r\n\r\n  /**\r\n   * Retutns true if the localStorage is supported in the browser.\r\n   */\r\n  public static isSupported(): boolean {\r\n    return PlayerStorage.storageSupported;\r\n  }\r\n\r\n  /**\r\n   * Returns all stored player stats.\r\n   */\r\n  public static getStoredPlayers(): PlayerStats[] {\r\n    if (PlayerStorage.storageSupported) {\r\n      return [...PlayerStorage.players];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Saves a new player with the given name to the localStorage.\r\n   */\r\n  public static saveNewPlayer(name: string, avatar: string): PlayerStats[] {\r\n    if (PlayerStorage.storageSupported) {\r\n      PlayerStorage.maxId += 1;\r\n      PlayerStorage.players.push(newEmptyPlayer(PlayerStorage.maxId, name, \"\", avatar));\r\n      PlayerStorage.persist();\r\n      return PlayerStorage.players;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Removes a player with the given id.\r\n   */\r\n  public static removePlayer(id: number): PlayerStats[] {\r\n    if (PlayerStorage.storageSupported) {\r\n      PlayerStorage.players = PlayerStorage.players.filter(p => p.id !== id);\r\n      PlayerStorage.persist();\r\n      return PlayerStorage.players;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Updates a player by the given values (given values are added to the stored ones).\r\n   */\r\n  public static updatePlayer(update: PlayerStats): void {\r\n    for (let player of PlayerStorage.players) {\r\n      if (player.id === update.id) {\r\n        player.wins += update.wins;\r\n        player.loses += update.loses;\r\n        player.dmgDealt += update.dmgDealt;\r\n        player.dmgReceived += update.dmgReceived;\r\n        player.kills += update.kills;\r\n        PlayerStorage.persist();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n","export const BASE_CANVAS_WIDTH: number = 800;\r\nexport const BASE_CANVAS_HEIGHT: number = 320;\r\nexport const BASE_GROUND_START: number = 280;\r\nexport const BASE_GROUND_HEIGHT: number = BASE_CANVAS_HEIGHT - BASE_GROUND_START;\r\n\r\nexport const GUN_MOVEMENT_SPEED: number = 0.1;\r\nexport const TANK_MOVEMENT_SPEED: number = 0.06;\r\n\r\nexport const BASE_TANK_GUN_WIDTH: number = 4;\r\nexport const BASE_TANK_GUN_LENGTH: number = 15;\r\nexport const BASE_TANK_WIDTH: number = 30;\r\nexport const BASE_TANK_HEIGHT: number = 15;\r\n\r\nexport const OBSTACLE_PART_SIZE: number = 3;\r\n","/**\r\n * Abstract predecessor of all game objects. Provides common properties\r\n * color, x and y position and their setters and getters.\r\n */\r\nexport default abstract class GameObject {\r\n  protected color: string = \"\";\r\n  protected xPos: number = 0;\r\n  protected yPos: number = 0;\r\n\r\n  public setColor(color: string) {\r\n    this.color = color;\r\n  }\r\n\r\n  public getColor(): string {\r\n    return this.color;\r\n  }\r\n\r\n  public setXPos(xPos: number) {\r\n    this.xPos = xPos;\r\n  }\r\n\r\n  public diffXPos(xDif: number) {\r\n    this.xPos += xDif;\r\n  }\r\n\r\n  public getXPos(): number {\r\n    return this.xPos;\r\n  }\r\n\r\n  public setYPos(yPos: number) {\r\n    this.yPos = yPos;\r\n  }\r\n\r\n  public diffYPos(yDif: number) {\r\n    this.yPos += yDif;\r\n  }\r\n\r\n  public getYPos(): number {\r\n    return this.yPos;\r\n  }\r\n\r\n  /**\r\n   * Prints the game object at its current position.\r\n   * - canvas: canvas to draw on\r\n   * - ratio: ratio used for scaled drawing on resized canvas\r\n   */\r\n  public abstract show(ctx: CanvasRenderingContext2D, ratio: number): void;\r\n}\r\n","import GameObject from \"./gameObject\";\r\n\r\ninterface AnimationStep {\r\n  r: number;\r\n  color: string;\r\n}\r\n\r\nconst animationSteps: AnimationStep[][] = [\r\n  [{ r: 1, color: \"yellow\" }],\r\n  [{ r: 2, color: \"yellow\" }],\r\n  [{ r: 3, color: \"orange\" }, { r: 2, color: \"yellow\" }],\r\n  [\r\n    { r: 4, color: \"red\" },\r\n    { r: 3.5, color: \"orange\" },\r\n    { r: 2, color: \"yellow\" }\r\n  ],\r\n  [{ r: 1, color: \"orange\" }]\r\n];\r\n\r\nconst animationLen: number = animationSteps.length;\r\n\r\n/**\r\n * Game object representation of an explosion animation.\r\n */\r\nexport default class Explosion extends GameObject {\r\n  private readonly radius: number;\r\n  private t: number;\r\n\r\n  /**\r\n   * @param x x-center of explosion\r\n   * @param y y-center of explosion\r\n   * @param radius radius of explosion\r\n   * @param animationRate 0.2 for slow animations, 0.5 for fast animations\r\n   */\r\n  constructor(x: number, y: number, radius: number, private animationRate: 0.2 | 0.5) {\r\n    super();\r\n    this.xPos = x;\r\n    this.yPos = y;\r\n    this.radius = radius / 5;\r\n    this.t = 0;\r\n  }\r\n\r\n  /**\r\n   * True, if the animation has not ended yet.\r\n   */\r\n  public isAnimationOn(): boolean {\r\n    return this.t < animationLen;\r\n  }\r\n\r\n  /**\r\n   * Draws next frame of the explosion on the given canvas.\r\n   */\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    const currentStep = animationSteps[Math.floor(this.t)];\r\n    currentStep.forEach(c => this.drawCircle(ctx, ratio, c));\r\n    this.t += this.animationRate;\r\n  }\r\n\r\n  /**\r\n   * Draws a circle with explosion [x, y] center, given circle.r radius\r\n   * and circle.color color.\r\n   */\r\n  private drawCircle(\r\n    ctx: CanvasRenderingContext2D,\r\n    ratio: number,\r\n    circle: AnimationStep\r\n  ): void {\r\n    ctx.beginPath();\r\n    ctx.arc(\r\n      this.getXPos() * ratio,\r\n      this.getYPos() * ratio,\r\n      this.radius * circle.r * ratio,\r\n      0,\r\n      2 * Math.PI\r\n    );\r\n    ctx.fillStyle = circle.color;\r\n    ctx.fill();\r\n  }\r\n}\r\n","/**\r\n * Modulo operation with positive result for negative numbers (as % in JavaScript can give negative results).\r\n */\r\nexport function mod(n: number, m: number) {\r\n  return ((n % m) + m) % m;\r\n}\r\n\r\n/**\r\n * Floors the given number to whole hundrets.\r\n */\r\nexport function floorToHundret(x: number): number {\r\n  return Math.floor(x / 100) * 100;\r\n}\r\n\r\n/**\r\n * Computes euclidean distance of the given point [x, y] from origin [0, 0].\r\n */\r\nexport function euclideanOriginDistance(x: number, y: number): number {\r\n  return Math.sqrt(x ** 2 + y ** 2);\r\n}\r\n\r\n/**\r\n * Computes euclidean distance of the given points [xA, yA] and [xB, yB].\r\n */\r\nexport function euclideanDistance(\r\n  xA: number,\r\n  yA: number,\r\n  xB: number,\r\n  yB: number\r\n): number {\r\n  return euclideanOriginDistance(xA - xB, yA - yB);\r\n}\r\n","import GameObject from \"./gameObject\";\r\nimport Projectile from \"./projectile\";\r\n\r\n/**\r\n * Abstract predecessor of objects which can be hit by a projectile.\r\n */\r\nexport abstract class ColidingObject extends GameObject {\r\n  /**\r\n   * Returns true if the object was hit by the given projectile.\r\n   */\r\n  public abstract isCollision(p: Projectile): boolean;\r\n}\r\n","import {OBSTACLE_PART_SIZE} from \"../constants/constants\";\r\nimport { euclideanDistance } from \"../utils/math\";\r\nimport { ColidingObject } from \"./colidingObject\";\r\nimport Projectile from \"./projectile\";\r\n\r\n/**\r\n * Helper class representing one column in SquaredObstacle.\r\n */\r\nclass SquaredObstacleColumn extends ColidingObject {\r\n  private animationOn: boolean = false;\r\n  // squares in the columns - true means existing square, false means exploded square (an empty place)\r\n  private squares: string[];\r\n  // middle of the column in x-axis\r\n  private xCenter: number;\r\n  // time from the last animation start\r\n  private animationTime: number = 0;\r\n\r\n  constructor(xPos: number, yPos: number, squares: string[]) {\r\n    super();\r\n    this.squares = squares;\r\n    this.xPos = xPos;\r\n    this.xCenter = xPos + OBSTACLE_PART_SIZE / 2;\r\n    this.yPos = yPos;\r\n  }\r\n\r\n  /**\r\n   * If the obstacle is not in consistent state and the animation is on.\r\n   */\r\n  public isAnimationOn(): boolean {\r\n    return this.animationOn;\r\n  }\r\n\r\n  /**\r\n   * Checks whether given square s on index i is in collision distance with projectile.\r\n   */\r\n  private isSquareCollision(s: string, i: number, p: Projectile): boolean {\r\n    // if the square exists, computes its distance from projectile\r\n    if (s !== \"\") {\r\n      const yCenter = this.yPos - (i + 0.5) * OBSTACLE_PART_SIZE;\r\n      return (\r\n        euclideanDistance(this.xCenter, yCenter, p.getXPos(), p.getYPos()) <\r\n        p.getRadius() + OBSTACLE_PART_SIZE\r\n      );\r\n    }\r\n    // if the square does not exist, cannot be collided\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Changes squares in explosion radius to false.\r\n   */\r\n  private squareCollide(s: string, i: number, p: Projectile): void {\r\n    // if the square exists, computes its distance from projectile\r\n    if (s !== \"\") {\r\n      const yCenter = this.yPos - (i + 0.5) * OBSTACLE_PART_SIZE;\r\n      if (\r\n        euclideanDistance(this.xCenter, yCenter, p.getXPos(), p.getYPos()) <\r\n        p.getExplosionRadius() / 2 + OBSTACLE_PART_SIZE * 1.5\r\n      ) {\r\n        this.squares[i] = \"\";\r\n        this.animationOn = true;\r\n        this.animationTime = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Pops false squares from column top. Checks whether there are some false\r\n   * squares in between true squares and updates this.animationOn (to true, if\r\n   * there is any false under true, so the true has to fall down).\r\n   */\r\n  private checkConsistency(): void {\r\n    // removes false (exploded) squares from top\r\n    while (this.squares[this.squares.length - 1] === \"\") {\r\n      this.squares.pop();\r\n    }\r\n    // if there is still some false, animation has not ended\r\n    this.animationOn = this.squares.some(s => s === \"\");\r\n  }\r\n\r\n  /**\r\n   * Moves the true squares above empty place down if it is animation time.\r\n   */\r\n  private animate(): void {\r\n    if (this.isAnimationTime()) {\r\n      let falseFound: boolean = false;\r\n      for (let i = 0; i < this.squares.length; ++i) {\r\n        if (this.squares[i] === \"\") {\r\n          falseFound = true;\r\n        }\r\n        // if there is some square above empty place, moves it down\r\n        if (this.squares[i] !== \"\" && falseFound) {\r\n          this.squares[i - 1] = this.squares[i];\r\n          this.squares[i] = \"\";\r\n        }\r\n      }\r\n    }\r\n    ++this.animationTime;\r\n  }\r\n\r\n  /**\r\n   * Returns true if the animation should continue in this time step.\r\n   */\r\n  private isAnimationTime(): boolean {\r\n    return (\r\n      this.animationTime === 6 ||\r\n      this.animationTime === 10 ||\r\n      this.animationTime >= 12\r\n    );\r\n  }\r\n\r\n  public isCollision(p: Projectile): boolean {\r\n    // if the projectile is outside x boundary, returns false\r\n    if (\r\n      p.getXPos() + p.getRadius() < this.getXPos() ||\r\n      p.getXPos() - p.getRadius() > this.getXPos() + OBSTACLE_PART_SIZE\r\n    ) {\r\n      return false;\r\n    }\r\n    return this.squares.some((s, i) => this.isSquareCollision(s, i, p));\r\n  }\r\n\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    this.animate();\r\n    this.squares.forEach((s, i) => {\r\n      if (s !== \"\") {\r\n        ctx.fillStyle = s;\r\n        ctx.fillRect(\r\n          Math.ceil(this.xPos * ratio),\r\n          Math.ceil((this.yPos - (i + 1) * OBSTACLE_PART_SIZE) * ratio),\r\n          Math.ceil(OBSTACLE_PART_SIZE * ratio),\r\n          Math.ceil(OBSTACLE_PART_SIZE * ratio)\r\n        );\r\n      }\r\n    });\r\n    this.checkConsistency();\r\n  }\r\n\r\n  public collide(p: Projectile): void {\r\n    // if the projectile is outside x boundary, cannot collide\r\n    if (\r\n      p.getXPos() + p.getExplosionRadius() < this.getXPos() ||\r\n      p.getXPos() - p.getExplosionRadius() > this.getXPos() + OBSTACLE_PART_SIZE\r\n    ) {\r\n      return;\r\n    }\r\n    this.squares.forEach((s, i) => this.squareCollide(s, i, p));\r\n    this.checkConsistency();\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    return this.squares.length === 0;\r\n  }\r\n}\r\n\r\n/**\r\n * Obstacle created from square parts. Squares are animated to fall down after collision.\r\n */\r\nexport class SquaredObstacle extends ColidingObject {\r\n  private animationOn: boolean = false;\r\n  private columns: SquaredObstacleColumn[];\r\n  private columnsCount: number;\r\n  private highest: number;\r\n\r\n  public constructor(xPos: number, yPos: number, squares: string[][]) {\r\n    super();\r\n    this.columns = squares.map((s, i) => new SquaredObstacleColumn(xPos + i * OBSTACLE_PART_SIZE, yPos, s));\r\n    this.columnsCount = this.columns.length;\r\n    this.xPos = xPos;\r\n    this.yPos = yPos;\r\n    this.highest = Math.max(...squares.map(s => s.length));\r\n  }\r\n\r\n  /**\r\n   * If margin columns are empty, removes them from the array and updates position/width.\r\n   */\r\n  private filterMarginColumns(): void {\r\n    while (this.columns.length > 0 && this.columns[0].isEmpty()) {\r\n      this.columns.shift();\r\n      this.xPos += OBSTACLE_PART_SIZE;\r\n      this.columnsCount -= 1;\r\n    }\r\n    while (\r\n      this.columns.length > 0 &&\r\n      this.columns[this.columns.length - 1].isEmpty()\r\n    ) {\r\n      this.columns.pop();\r\n      this.columnsCount -= 1;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If the obstacle is not in consistent state and the animation is on.\r\n   */\r\n  public isAnimationOn(): boolean {\r\n    return this.animationOn;\r\n  }\r\n\r\n  /**\r\n   * Returns number of columns of the obstacle (counting inner empty columns).\r\n   * When returns 0, it means that the obstacle is destroyed.\r\n   */\r\n  public getColumnsCount(): number {\r\n    return this.columnsCount;\r\n  }\r\n\r\n  public isCollision(p: Projectile): boolean {\r\n    // if the projectile is outside boundary rectangle, returns false\r\n    if (\r\n      p.getXPos() + p.getRadius() < this.xPos ||\r\n      p.getXPos() - p.getRadius() > this.xPos + this.columnsCount * OBSTACLE_PART_SIZE ||\r\n      p.getYPos() + p.getRadius() < this.yPos - this.highest * OBSTACLE_PART_SIZE\r\n    ) {\r\n      return false;\r\n    }\r\n    // if any obstacle column was hit, returns true\r\n    return this.columns.some(c => c.isCollision(p));\r\n  }\r\n\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    this.columns.forEach(c => c.show(ctx, ratio));\r\n    if (this.animationOn) {\r\n      this.animationOn = this.columns.some(col => col.isAnimationOn());\r\n    }\r\n    this.filterMarginColumns();\r\n  }\r\n\r\n  public collide(p: Projectile): void {\r\n    // if the projectile is outside boundary rectangle, collision cannot happen\r\n    if (\r\n      p.getXPos() + p.getExplosionRadius() < this.getXPos() ||\r\n      p.getXPos() - p.getExplosionRadius() > this.getXPos() + this.getColumnsCount() * OBSTACLE_PART_SIZE ||\r\n      p.getYPos() + p.getExplosionRadius() < this.yPos - this.highest * OBSTACLE_PART_SIZE\r\n    ) {\r\n      return;\r\n    }\r\n    // otherwise tries hit columns\r\n    this.columns.forEach(c => c.collide(p));\r\n    this.animationOn = this.columns.some(col => col.isAnimationOn());\r\n  }\r\n}\r\n","import { OBSTACLE_PART_SIZE } from \"../constants/constants\";\r\nimport { SquaredObstacle } from \"./squaredObstacle\";\r\n\r\n/**\r\n * Factory for generating game obstacles.\r\n */\r\nexport class ObstacleFactory {\r\n  /**\r\n   * Returns random obstacle.\r\n   */\r\n  public random(xLeft: number, yBottom: number): SquaredObstacle {\r\n    const methods = Object.getOwnPropertyNames(ObstacleFactory.prototype)\r\n      .filter(m => m !== \"random\" && m !== \"constructor\");\r\n    const index = Math.floor(Math.random() * methods.length);\r\n    // @ts-ignore\r\n    return this[methods[index]](xLeft, yBottom);\r\n  }\r\n\r\n  /**\r\n   * 22x17 house.\r\n   */\r\n  public house(xLeft: number, yBottom: number): SquaredObstacle {\r\n    const walls = [\"#222222\", \"#333333\", \"#444444\", \"#555555\"];\r\n    const w = walls[Math.floor(Math.random() * walls.length)]; // walls\r\n    const doors = [\"#8e350b\", \"#ac552f\"];\r\n    const d = doors[Math.floor(Math.random() * doors.length)]; // door\r\n    const g = \"lightblue\"; // glass\r\n    const roofs = [\"#981f1f\", \"#ff0000\"];\r\n    const r = roofs[Math.floor(Math.random() * roofs.length)]; // roof\r\n    const squares = [\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r],\r\n      [w, d, d, d, d, d, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, d, d, d, d, d, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, d, d, d, d, d, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r]\r\n    ];\r\n    return new SquaredObstacle(\r\n      xLeft - (squares.length * OBSTACLE_PART_SIZE) / 2,\r\n      yBottom,\r\n      squares\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 39x17 factory with 2 3x29-chimneys\r\n   */\r\n  public factory(xLeft: number, yBottom: number): SquaredObstacle {\r\n    const walls = [\"#222222\", \"#333333\", \"#444444\", \"#555555\"];\r\n    const w = walls[Math.floor(Math.random() * walls.length)]; // walls\r\n    const doors = [\"#8e350b\", \"#ac552f\", \"#000000\"];\r\n    const d = doors[Math.floor(Math.random() * doors.length)]; // door\r\n    const g = \"lightblue\"; // glass\r\n    const roofs = [\"#981f1f\", \"#ff0000\"];\r\n    const r = roofs[Math.floor(Math.random() * roofs.length)]; // roof\r\n    const s = \"black\"; // details\r\n    const squares = [\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w, s, s, s],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w, s, s, s],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r],\r\n      [d, d, d, d, d, w, w, w, w, w, g, g, w, w, r, r],\r\n      [d, d, d, d, d, d, w, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, d, d, w, w, w, w, w, w, w, r, r, r],\r\n      [d, d, d, d, d, d, d, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, d, d, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, d, w, w, w, w, w, w, w, w, r, r, r],\r\n      [d, d, d, d, d, w, w, w, w, w, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [d, d, d, d, d, w, w, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, w, w, w, w, w, g, g, w, w, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r]\r\n    ];\r\n    return new SquaredObstacle(\r\n      xLeft - (squares.length * OBSTACLE_PART_SIZE) / 2,\r\n      yBottom,\r\n      squares\r\n    );\r\n  }\r\n}\r\n","/**\r\n * Wrapper of all audio effects in the application.\r\n */\r\nexport class AudioPlayer {\r\n\r\n  private static backgroundMusicAudio: HTMLAudioElement = AudioPlayer.initBackgroundMusic();\r\n\r\n  private static initBackgroundMusic(): HTMLAudioElement {\r\n    const a = new Audio();\r\n    a.src = \"background_music.mp3\";\r\n    a.loop = true;\r\n    a.volume = 0.4;\r\n    return a;\r\n  }\r\n\r\n  /**\r\n   * Plays the sound of tank shooting.\r\n   *\r\n   * @param volume default volume is 1\r\n   */\r\n  public static shotSound(volume: number = 1): void {\r\n    const a = new Audio();\r\n    a.src = \"tank_fire.mp3\";\r\n    a.volume = volume;\r\n    console.log(a);\r\n    a.play();\r\n  }\r\n\r\n  /**\r\n   * Plays the sound of explosion.\r\n   *\r\n   * @param volume default volume is 1\r\n   */\r\n  public static explosionSound(volume: number = 1): void {\r\n    const a = new Audio();\r\n    a.src = \"explosion.mp3\";\r\n    a.volume = volume;\r\n    a.play();\r\n  }\r\n\r\n  /**\r\n   * Starts playing the background music.\r\n   */\r\n  public static startBackgroundMusic(): void {\r\n    AudioPlayer.backgroundMusicAudio.play();\r\n  }\r\n\r\n  /**\r\n   * Pauses playing the background music.\r\n   */\r\n  public static pauseBackgroundMusic(): void {\r\n    AudioPlayer.backgroundMusicAudio.pause();\r\n  }\r\n}","import { getRandomSubarray } from \"../utils/array\";\r\nimport { mod } from \"../utils/math\";\r\nimport Projectile, { ProjectileStats } from \"./projectile\";\r\n\r\nenum ProjIndex {\r\n  STANDARD,\r\n  BIG,\r\n  MULTI,\r\n\r\n  TOTAL_COUNT\r\n}\r\n\r\ntype ProjInfo = ProjectileStats & {\r\n  name: string;\r\n  description: string;\r\n};\r\n\r\nconst PROJ_INFOS: ProjInfo[] = [\r\n  {\r\n    name: \"Standard\",\r\n    description: \"Standard ammo\",\r\n    radius: 2,\r\n    speed: 1,\r\n    explosionRadius: 25,\r\n    damage: 11,\r\n    mass: 5\r\n  },\r\n  {\r\n    name: \"Big\",\r\n    description: \"Short range, big dmg\",\r\n    radius: 3,\r\n    speed: 0.5,\r\n    explosionRadius: 35,\r\n    damage: 23,\r\n    mass: 15\r\n  },\r\n  {\r\n    name: \"Multi\",\r\n    description: \"5 shots at once\",\r\n    radius: 1,\r\n    speed: 0.8,\r\n    explosionRadius: 23,\r\n    damage: 5,\r\n    mass: 5\r\n  }\r\n];\r\nconst PROJ_DESCRIPTIONS: string[] = PROJ_INFOS.map(info => {\r\n  return (\r\n    info.description +\r\n    \"\\nDamage: \" +\r\n    info.damage +\r\n    \"\\nSpeed coefficient: \" +\r\n    info.speed +\r\n    \"\\nExplosion: \" +\r\n    info.explosionRadius\r\n  );\r\n});\r\n\r\nconst MULTI_COUNT: number = 5;\r\nconst MULTI_ANGLE_ERRORS: number[] = [-11, -9, -7, -5, -3, 0, 3, 5, 7, 9, 11];\r\nexport const LARGEST_PROJ_DMG = Math.max(...PROJ_INFOS.map(i => i.damage));\r\n\r\n/**\r\n * Tank magazine with projectiles. Provides projectile management.\r\n */\r\nexport default class Magazine {\r\n  private projectiles: number[];\r\n  private curIndex: number;\r\n\r\n  public constructor(big: number, multi: number) {\r\n    this.projectiles = [Infinity, big, multi];\r\n    this.curIndex = 0;\r\n  }\r\n\r\n  /**\r\n   * Returns new instance of current selected projectile type.\r\n   */\r\n  public getProjectile(playerId: number): Projectile[] {\r\n    if (this.curIndex === ProjIndex.BIG) {\r\n      if (--this.projectiles[this.curIndex] === 0) {\r\n        this.loadNext();\r\n      }\r\n      return [new Projectile(playerId, PROJ_INFOS[ProjIndex.BIG])];\r\n    } else if (this.curIndex === ProjIndex.MULTI) {\r\n      if (--this.projectiles[this.curIndex] === 0) {\r\n        this.loadNext();\r\n      }\r\n      return getRandomSubarray(MULTI_ANGLE_ERRORS, MULTI_COUNT).map(ae => {\r\n        return new Projectile(playerId, PROJ_INFOS[ProjIndex.MULTI], ae);\r\n      });\r\n    } else {\r\n      return [new Projectile(playerId, PROJ_INFOS[ProjIndex.STANDARD])];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns short string description of the current selected projectile type.\r\n   */\r\n  public getCurrentProjectileShortStats(): string {\r\n    if (this.curIndex === ProjIndex.STANDARD) {\r\n      return PROJ_INFOS[this.curIndex].name;\r\n    }\r\n    return `${PROJ_INFOS[this.curIndex].name} (${\r\n      this.projectiles[this.curIndex]\r\n    })`;\r\n  }\r\n\r\n  /**\r\n   * Returns long string description of the current selected projectile type.\r\n   */\r\n  public getCurrentProjectileLongStats(): string {\r\n    return PROJ_DESCRIPTIONS[this.curIndex];\r\n  }\r\n\r\n  /**\r\n   * Changes current selected type to the next one. Skips types with zero\r\n   * available projectiles.\r\n   */\r\n  public loadNext(): void {\r\n    this.curIndex = mod(this.curIndex + 1, ProjIndex.TOTAL_COUNT);\r\n    // does not show zero counts\r\n    if (this.projectiles[this.curIndex] === 0) {\r\n      this.loadNext();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Changes current selected type to the previous one. Skips types with zero\r\n   * available projectiles.\r\n   */\r\n  public loadPrev(): void {\r\n    this.curIndex = mod(this.curIndex - 1, ProjIndex.TOTAL_COUNT);\r\n    // does not show zero counts\r\n    if (this.projectiles[this.curIndex] === 0) {\r\n      this.loadPrev();\r\n    }\r\n  }\r\n}\r\n","import { euclideanDistance } from \"../utils/math\";\r\nimport GameObject from \"./gameObject\";\r\nimport {AudioPlayer} from \"../utils/audioPlayer\";\r\nimport {LARGEST_PROJ_DMG} from \"./magazine\";\r\n\r\nexport interface ProjectileStats {\r\n  radius: number;\r\n  speed: number;\r\n  explosionRadius: number;\r\n  damage: number;\r\n  mass: number;\r\n}\r\n\r\n/**\r\n * Representation of the fired projectile.\r\n */\r\nexport default class Projectile extends GameObject {\r\n  private exploded: boolean = false;\r\n  private t: number = 0;\r\n\r\n  private readonly radius: number;\r\n  private speed: number;\r\n  private readonly explosionRadius: number;\r\n  private readonly damage: number;\r\n  private readonly mass: number;\r\n\r\n  private xInit: number = 0;\r\n  private yInit: number = 0;\r\n\r\n  private angleCos: number = 0;\r\n  private angleSin: number = 0;\r\n\r\n  private windXDiff: number = 0;\r\n\r\n  public constructor(\r\n    private readonly originId: number,\r\n    stats: ProjectileStats,\r\n    private readonly angleErr: number = 0\r\n  ) {\r\n    super();\r\n    this.radius = stats.radius;\r\n    this.speed = stats.speed;\r\n    this.explosionRadius = stats.explosionRadius;\r\n    this.damage = stats.damage;\r\n    this.mass = stats.mass;\r\n    this.color = \"black\";\r\n  }\r\n\r\n  public getXPos(): number {\r\n    return this.xPos + this.windXDiff;\r\n  }\r\n\r\n  public getOriginId(): number {\r\n    return this.originId;\r\n  }\r\n\r\n  public getRadius(): number {\r\n    return this.radius;\r\n  }\r\n\r\n  public getSpeed(): number {\r\n    return this.speed;\r\n  }\r\n\r\n  public getExplosionRadius(): number {\r\n    return this.explosionRadius;\r\n  }\r\n\r\n  public getDamage(): number {\r\n    return this.damage;\r\n  }\r\n\r\n  public getMass(): number {\r\n    return this.mass;\r\n  }\r\n\r\n  public isExploded(): boolean {\r\n    return this.exploded;\r\n  }\r\n\r\n  public explode(): void {\r\n    AudioPlayer.explosionSound(this.damage / LARGEST_PROJ_DMG);\r\n    this.exploded = true;\r\n  }\r\n\r\n  /**\r\n   * Launches the projectile from given [x, y] point in given angle\r\n   * (angle is expected with 0 value in vertical direction, -90 means\r\n   * horizontal left direction, 90 means horizontal right direction).\r\n   * The given speed is expected in range 0-100.\r\n   */\r\n  public launch(xInit: number, yInit: number, angle: number, speed: number) {\r\n    this.xInit = xInit;\r\n    this.yInit = yInit;\r\n    this.speed *= speed / 10;\r\n    // applies angle error\r\n    angle += this.angleErr;\r\n    // moves angle to expected range\r\n    if (angle < 0) {\r\n      angle += 90;\r\n      this.angleCos = -Math.cos((angle * Math.PI) / 180);\r\n    } else {\r\n      angle = 90 - angle;\r\n      this.angleCos = Math.cos((angle * Math.PI) / 180);\r\n    }\r\n    this.angleSin = Math.sin((angle * Math.PI) / 180);\r\n    this.xPos = xInit;\r\n    this.yPos = yInit;\r\n    this.windXDiff = 0;\r\n  }\r\n\r\n  /**\r\n   * Updates projectile position and effect of the wind.\r\n   *\r\n   * @param wind wind value\r\n   * @param dt time delta\r\n   */\r\n  public move(wind: number, dt: number) {\r\n    this.t += dt / 16;\r\n    const xPrev = this.xPos;\r\n    const yPrev = this.yPos;\r\n\r\n    this.xPos = this.xInit + this.speed * this.t * this.angleCos;\r\n    this.yPos =\r\n      this.yInit - this.speed * this.t * this.angleSin + this.t ** 2 / 20;\r\n\r\n    const diff = euclideanDistance(xPrev, yPrev, this.xPos, this.yPos) + 10;\r\n    this.windXDiff += (wind * Math.log(this.t)) / (diff * this.mass);\r\n  }\r\n\r\n  /**\r\n   * Draws the projectile on given canvas with given size-ratio.\r\n   */\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    ctx.beginPath();\r\n    ctx.arc(\r\n      this.getXPos() * ratio,\r\n      this.getYPos() * ratio,\r\n      this.getRadius() * ratio,\r\n      0,\r\n      2 * Math.PI\r\n    );\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n  }\r\n\r\n  /**\r\n   * Returns true, if the whole projectile is in the given rectangle.\r\n   */\r\n  public isInRange(\r\n    minX: number,\r\n    minY: number,\r\n    maxX: number,\r\n    maxY: number\r\n  ): boolean {\r\n    return (\r\n      this.getXPos() + this.getRadius() > minX &&\r\n      this.getXPos() - this.getRadius() < maxX &&\r\n      this.getYPos() + this.getRadius() > minY &&\r\n      this.getYPos() - this.getRadius() < maxY\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Returns true, if the projectile is in the given range or there is a chance\r\n   * to return back in it (it is outside but the wind blows in).\r\n   */\r\n  public canReturnToRange(minX: number, maxX: number, maxY: number): boolean {\r\n    if (this.yPos > maxY) {\r\n      return false;\r\n    }\r\n    if (this.xPos < minX && this.windXDiff < 0) {\r\n      return false;\r\n    }\r\n    return !(this.xPos > maxX && this.windXDiff > 0);\r\n\r\n  }\r\n}\r\n","/**\r\n * Returns an array of given size with randomly chosen entries from the given array.\r\n * Rewritten to TypeScript from: https://stackoverflow.com/a/11935263\r\n */\r\nexport function getRandomSubarray<T>(arr: T[], size: number): T[] {\r\n  let shuffled: T[] = arr.slice(0);\r\n  let i = arr.length;\r\n  let min = i - size;\r\n  let temp: T;\r\n  let index;\r\n  while (i-- > min) {\r\n    index = Math.floor((i + 1) * Math.random());\r\n    temp = shuffled[index];\r\n    shuffled[index] = shuffled[i];\r\n    shuffled[i] = temp;\r\n  }\r\n  return shuffled.slice(min);\r\n}\r\n","import { BASE_TANK_GUN_WIDTH } from \"../constants/constants\";\r\nimport { BASE_TANK_GUN_LENGTH } from \"../constants/constants\";\r\nimport { BASE_TANK_HEIGHT } from \"../constants/constants\";\r\nimport { BASE_TANK_WIDTH } from \"../constants/constants\";\r\nimport { PlayerStats } from \"../player/playerStats\";\r\nimport { ColidingObject } from \"./colidingObject\";\r\nimport Magazine from \"./magazine\";\r\nimport Projectile from \"./projectile\";\r\n\r\n/**\r\n * Tank for the GameArea.\r\n * It works with 2 postion/size scales:\r\n * - base scale for inner representation (saved position, collision computation)\\\r\n * - ratio-scaled for printing on screen\r\n */\r\nexport default class Tank extends ColidingObject {\r\n  private player: PlayerStats;\r\n  private health: number = 20;\r\n\r\n  private gunAngle: number = 0;\r\n  private magazine: Magazine = new Magazine(3, 3);\r\n  private lastLaunchSpeed: number = 50;\r\n\r\n  public constructor(player: PlayerStats) {\r\n    super();\r\n    this.player = player;\r\n    this.setColor(player.color);\r\n  }\r\n\r\n  public getPlayer(): PlayerStats {\r\n    return this.player;\r\n  }\r\n\r\n  public getId(): number {\r\n    return this.player.id;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this.player.name;\r\n  }\r\n\r\n  /**\r\n   * Returns true, if the changed health is <= 0.\r\n   */\r\n  public receiveDamage(dmg: number): boolean {\r\n    this.health -= dmg;\r\n    this.player.dmgReceived += dmg;\r\n    if (this.health <= 0) {\r\n      this.health = 0;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public getHealth(): number {\r\n    return this.health;\r\n  }\r\n\r\n  public isAlive(): boolean {\r\n    return this.health > 0;\r\n  }\r\n\r\n  /**\r\n   * Changes the dealt damage by given difference.\r\n   */\r\n  public changeDamageDealt(diff: number): void {\r\n    this.player.dmgDealt += diff;\r\n  }\r\n\r\n  public getDamageDealt(): number {\r\n    return this.player.dmgDealt;\r\n  }\r\n\r\n  public addKill(): void {\r\n    this.player.kills += 1;\r\n  }\r\n\r\n  public getKills(): number {\r\n    return this.player.kills;\r\n  }\r\n\r\n  public getLastLaunchSpeed(): number {\r\n    return this.lastLaunchSpeed;\r\n  }\r\n\r\n  /**\r\n   * Changes the gun angle by given difference. It does not go outside <-90, 90> range.\r\n   */\r\n  public moveGun(angleDif: number) {\r\n    this.gunAngle += angleDif;\r\n    if (this.gunAngle < -90) {\r\n      this.gunAngle = -90;\r\n    } else if (this.gunAngle > 90) {\r\n      this.gunAngle = 90;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fires current selected projectile. The starting position is the end of the gun.\r\n   * The given speed is expected in range 0-100.\r\n   * NOTE: The position of projectiles is not scaled by current game sizeRation.\r\n   */\r\n  public fire(speed: number): Projectile[] {\r\n    this.lastLaunchSpeed = speed;\r\n    // get current projectiles from the magazine\r\n    const projectiles: Projectile[] = this.magazine.getProjectile(\r\n      this.player.id\r\n    );\r\n    // sets their initial position\r\n    projectiles.forEach(p =>\r\n      p.launch(this.xGunEnd(), this.yGunEnd(), this.gunAngle, speed)\r\n    );\r\n    return projectiles;\r\n  }\r\n\r\n  /**\r\n   * Loads next projectile type in the magazine.\r\n   */\r\n  public loadNextProjectile(): void {\r\n    this.magazine.loadNext();\r\n  }\r\n\r\n  /**\r\n   * Loads previous projectile type in the magazine.\r\n   */\r\n  public loadPrevProjectile(): void {\r\n    this.magazine.loadPrev();\r\n  }\r\n\r\n  /**\r\n   * Gets short information about current selected projectile.\r\n   */\r\n  public getCurrentProjectileShortStats(): string {\r\n    return this.magazine.getCurrentProjectileShortStats();\r\n  }\r\n\r\n  /**\r\n   * Gets long information about current selected projectile.\r\n   */\r\n  public getCurrentProjectileLongStats(): string {\r\n    return this.magazine.getCurrentProjectileLongStats();\r\n  }\r\n\r\n  public isCollision(p: Projectile): boolean {\r\n    return (\r\n      // if they are in collision y-range\r\n      p.getYPos() + p.getRadius() > this.getYPos() - BASE_TANK_HEIGHT &&\r\n      p.getYPos() - p.getRadius() < this.getYPos() &&\r\n      // and collision x-range\r\n      p.getXPos() + p.getRadius() > this.getXPos() &&\r\n      p.getXPos() - p.getRadius() < this.getXPos() + BASE_TANK_WIDTH\r\n    );\r\n  }\r\n\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    // draws gun\r\n    ctx.beginPath();\r\n    ctx.lineWidth = BASE_TANK_GUN_WIDTH * ratio;\r\n    ctx.save();\r\n    ctx.translate(\r\n      (this.xPos + BASE_TANK_WIDTH / 2) * ratio,\r\n      (this.yPos - BASE_TANK_HEIGHT) * ratio\r\n    );\r\n    ctx.rotate((this.gunAngle * Math.PI) / 180);\r\n    ctx.moveTo(0, 5);\r\n    ctx.lineTo(0, -(BASE_TANK_GUN_LENGTH * ratio));\r\n    ctx.stroke();\r\n    ctx.rotate(-this.gunAngle);\r\n    ctx.restore();\r\n    // draws tank\r\n    ctx.fillStyle = this.color;\r\n    ctx.fillRect(\r\n      this.xPos * ratio,\r\n      (this.yPos - BASE_TANK_HEIGHT) * ratio,\r\n      BASE_TANK_WIDTH * ratio,\r\n      BASE_TANK_HEIGHT * ratio\r\n    );\r\n  }\r\n\r\n  /*\r\n   * Computes the not-scaled x-end of the gun.\r\n   */\r\n  private xGunEnd(): number {\r\n    return (\r\n      this.xPos +\r\n      BASE_TANK_WIDTH / 2 +\r\n      Math.sin((this.gunAngle * Math.PI) / 180) * BASE_TANK_GUN_LENGTH * 1.1\r\n    );\r\n  }\r\n\r\n  /*\r\n   * Computes the not-scaled y-end of the gun.\r\n   */\r\n  private yGunEnd(): number {\r\n    return (\r\n      this.yPos -\r\n      BASE_TANK_HEIGHT -\r\n      Math.cos((this.gunAngle * Math.PI) / 180) * BASE_TANK_GUN_LENGTH * 1.1\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.832d76fd.svg\";","import * as React from \"react\";\r\nimport Tank from \"../../game_objects/tank\";\r\nimport \"./tankStats.css\"\r\n\r\ninterface TankStatsProps {\r\n  // tank to display information about\r\n  tank: Tank;\r\n}\r\n\r\ninterface TankStatsState {}\r\n\r\n/**\r\n * Information about a single tank (player) during the game.\r\n */\r\nexport class TankStats extends React.Component<TankStatsProps, TankStatsState> {\r\n  render() {\r\n    const health = this.props.tank.getHealth();\r\n    const nameStyle = health <= 0 ? {color: \"grey\"} : {};\r\n    const hpStyle = health < 20 ? {color: \"red\"} : {};\r\n    return (\r\n      <div className=\"tank-stats\">\r\n        <div>\r\n          <span style={nameStyle}>{this.props.tank.getName()}</span><span style={hpStyle}>{`${health} HP`}</span>\r\n        </div>\r\n        <div>\r\n          <span>{`${this.props.tank.getDamageDealt()} damage`}</span><span>{`${this.props.tank.getKills()} kills`}</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport {\r\n  TANK_MOVEMENT_SPEED,\r\n  BASE_CANVAS_HEIGHT,\r\n  BASE_CANVAS_WIDTH,\r\n  GUN_MOVEMENT_SPEED,\r\n  BASE_TANK_WIDTH,\r\n  OBSTACLE_PART_SIZE, BASE_GROUND_START, BASE_GROUND_HEIGHT\r\n} from \"../../constants/constants\";\r\nimport Explosion from \"../../game_objects/explosion\";\r\nimport { centerDistance } from \"../../game_objects/gameUtils\";\r\nimport { ObstacleFactory } from \"../../game_objects/obstacleFactory\";\r\nimport Projectile from \"../../game_objects/projectile\";\r\nimport { SquaredObstacle } from \"../../game_objects/squaredObstacle\";\r\nimport Tank from \"../../game_objects/tank\";\r\nimport { PlayerStats } from \"../../player/playerStats\";\r\nimport { floorToHundret } from \"../../utils/math\";\r\nimport logo from \"../../assets/imgs/logo.svg\";\r\nimport \"./gameArea.css\";\r\nimport { TankStats } from \"./tankStats\";\r\nimport {AudioPlayer} from \"../../utils/audioPlayer\";\r\n\r\n/**\r\n * Init obstacle and tank positions for 2, 3 and 4 players (on 0, 1, 2 index).\r\n * o = false means player, o = true means obsatcle, i is the number of the\r\n * obstacle/tank.\r\n */\r\nconst initPositions: { o: boolean; i: number }[][] = [\r\n  [\r\n    { o: false, i: 0 },\r\n    { o: true, i: 0 },\r\n    { o: true, i: 1 },\r\n    { o: false, i: 1 }\r\n  ], // 2 tanks\r\n  [\r\n    { o: false, i: 0 },\r\n    { o: true, i: 0 },\r\n    { o: false, i: 1 },\r\n    { o: true, i: 1 },\r\n    { o: false, i: 2 }\r\n  ], // 3 tanks\r\n  [\r\n    { o: false, i: 0 },\r\n    { o: true, i: 0 },\r\n    { o: false, i: 1 },\r\n    { o: true, i: 1 },\r\n    { o: false, i: 2 },\r\n    { o: true, i: 2 },\r\n    { o: false, i: 3 }\r\n  ] // 4 tanks\r\n];\r\n\r\ninterface GameAreaProps {\r\n  /**\r\n   * Id of the component.\r\n   */\r\n  id: string;\r\n  /**\r\n   * Array of players for the game.\r\n   */\r\n  players: PlayerStats[];\r\n  /**\r\n   *\r\n   */\r\n  onEnd: (playerResults: PlayerStats[]) => void;\r\n}\r\n\r\n// GameArea state is not maintained by React\r\ninterface GameAreaState {\r\n  tanks: Tank[];\r\n}\r\n\r\n/**\r\n * GameArea contains canvas for graphical representation of the game.\r\n * The cnavas is maintained by plain TypeScript (by update loop), not by React.\r\n */\r\nexport class GameArea extends React.Component<GameAreaProps, GameAreaState> {\r\n  // @ts-ignore - canvas element\r\n  private canvas: HTMLCanvasElement;\r\n  // @ts-ignore - canvas context\r\n  private ctx: CanvasRenderingContext2D;\r\n  // @ts-ignore - ratio of current canvas size and referential size 800x320\r\n  private sizeRatio: number;\r\n  // @ts-ignore - GameArea footer\r\n  private footer: HTMLElement;\r\n  // @ts-ignore - player information\r\n  private roundPlayerInfoDiv: HTMLDivElement;\r\n  // @ts-ignore - wind information\r\n  private windDiv: HTMLDivElement;\r\n  // @ts-ignore - current loaded ammo short info span\r\n  private ammoShortInfo: HTMLSpanElement;\r\n  // @ts-ignore - current loaded ammo long info span\r\n  private ammoLongInfo: HTMLSpanElement;\r\n  // @ts-ignore - projectile launch speed input\r\n  private launchSpeedInput: HTMLInputElement;\r\n\r\n  // index of the current tank in the this.state.tanks array\r\n  private curTankIdx: number = 0;\r\n  // +1 for move right, -1 for move left, 0 for stay\r\n  private movement: number = 0;\r\n  // +1 for move right, -1 for move left, 0 for stay\r\n  private gunMovement: number = 0;\r\n  // whether the fire button was clicked in last update loop iteration\r\n  private fireClicked: boolean = false;\r\n  // array of active projectiles in the game\r\n  private projectiles: Projectile[] = [];\r\n  // obstacles in the game\r\n  private obstacles: SquaredObstacle[] = [];\r\n  // animated explosions\r\n  private explosions: Explosion[] = [];\r\n\r\n  // wind: positive values means wind to right, negative to left\r\n  private wind: number = this.initWind();\r\n  // number of the current round (increased after shot of all players)\r\n  private round: number = 1;\r\n\r\n  private lastUpdateTime: number = 0;\r\n\r\n  public constructor(props: GameAreaProps) {\r\n    super(props);\r\n    this.state = {\r\n      tanks: this.props.players.map(p => new Tank(p))\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Returns current selected tank.\r\n   */\r\n  private curTank(): Tank {\r\n    return this.state.tanks[this.curTankIdx];\r\n  }\r\n\r\n  /**\r\n   * Update loop.\r\n   */\r\n  private update = (): void => {\r\n    // computes time diff\r\n    const t = Date.now();\r\n    const dt = t - this.lastUpdateTime;\r\n    this.lastUpdateTime = t;\r\n\r\n    // clears the canvas\r\n    this.ctx.clearRect(0, 0, this.canvas.width, BASE_GROUND_START * this.sizeRatio);\r\n    this.ctx.fillStyle = \"#189b18\";\r\n    this.ctx.fillRect(0, BASE_GROUND_START * this.sizeRatio, this.canvas.width, BASE_GROUND_HEIGHT * this.sizeRatio);\r\n    // moves current tank\r\n    this.moveTank(dt);\r\n    // moves current tank gun\r\n    this.curTank().moveGun(this.gunMovement * dt);\r\n    // saves whether there were any projectiles\r\n    const wereProjectiles: boolean = this.projectiles.length > 0;\r\n    // moves all projectiles\r\n    this.projectiles.forEach(p => p.move(this.wind, dt));\r\n    // collides projectiles\r\n    this.projectiles.forEach(p => this.collide(p));\r\n    // filters projectiles out of screen and exploded\r\n    this.projectiles = this.projectiles.filter(\r\n      p =>\r\n        p.canReturnToRange(0, BASE_CANVAS_WIDTH, BASE_CANVAS_HEIGHT) &&\r\n        !p.isExploded()\r\n    );\r\n    // filters destroyed obstacles\r\n    this.obstacles = this.obstacles.filter(o => o.getColumnsCount() > 0);\r\n    // filters finished explosions\r\n    this.explosions = this.explosions.filter(e => e.isAnimationOn());\r\n    // moves destroyed tanks out of screen - does not remove them (they are needed for results)\r\n    this.state.tanks.forEach(t => {\r\n      if (t.getHealth() <= 0) {\r\n        t.setXPos(2 * BASE_CANVAS_WIDTH);\r\n        t.setYPos(2 * BASE_CANVAS_HEIGHT);\r\n      }\r\n    })\r\n    // saves whether there was any animation on\r\n    const wasAnimation: boolean =\r\n      this.obstacles.some(o => o.isAnimationOn()) ||\r\n      this.explosions.some(e => e.isAnimationOn());\r\n    // shows all projectiles\r\n    this.projectiles.forEach(p => p.show(this.ctx, this.sizeRatio));\r\n    // shows all tanks\r\n    this.state.tanks.forEach(t => t.show(this.ctx, this.sizeRatio));\r\n    // shows all obstacles\r\n    this.obstacles.forEach(o => o.show(this.ctx, this.sizeRatio));\r\n    // shows all explosions\r\n    this.explosions.forEach(e => e.show(this.ctx, this.sizeRatio));\r\n    // saves whether there is any animation on now\r\n    const isAnimation: boolean =\r\n      this.obstacles.some(o => o.isAnimationOn()) ||\r\n      this.explosions.some(e => e.isAnimationOn());\r\n    // true if the game has not ended yet\r\n    let gameInProgress = true;\r\n    // when fire button was pressed\r\n    if (this.fireClicked) {\r\n      this.fire();\r\n    }\r\n    // if there is only 0 or 1 alive tanks left, ends game\r\n    else if (!isAnimation && this.state.tanks.filter(t => t.isAlive()).length < 2) {\r\n      this.endGame();\r\n      gameInProgress = false;\r\n    }\r\n    // when last active projective disappeared and there is no animation\r\n    else if (this.projectiles.length === 0 && wereProjectiles && !isAnimation) {\r\n      this.nextRound();\r\n    }\r\n    // when the all animations ended and there is no projectile\r\n    else if (!isAnimation && wasAnimation && this.projectiles.length === 0) {\r\n      this.nextRound();\r\n    }\r\n    if (gameInProgress) {\r\n      requestAnimationFrame(this.update);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Moves the current tank if the move is valid.\r\n   *\r\n   * @param dt time delta in ms\r\n   */\r\n  private moveTank(dt: number): void {\r\n    const tank: Tank = this.curTank();\r\n    if (this.movement !== 0) {\r\n      const movement = this.movement * dt;\r\n      // checks whether the move is valid\r\n      const newLeft = tank.getXPos() + movement;\r\n      const newRight = tank.getXPos() + BASE_TANK_WIDTH + movement;\r\n      // true if no screens tank is hit...\r\n      const tanksOk = this.state.tanks\r\n        .filter((_, i) => i !== this.curTankIdx)\r\n        .every(t => {\r\n          const tankLeft = t.getXPos();\r\n          const tankRight = t.getXPos() + BASE_TANK_WIDTH;\r\n          return newRight <= tankLeft || newLeft >= tankRight;\r\n        });\r\n      // true if no obstacle is hit...\r\n      const obstaclesOk =\r\n        tanksOk &&\r\n        this.obstacles.every(o => {\r\n          const obstacleLeft = o.getXPos();\r\n          const obstacleRight =\r\n            o.getXPos() + o.getColumnsCount() * OBSTACLE_PART_SIZE;\r\n          return newRight <= obstacleLeft || newLeft >= obstacleRight;\r\n        });\r\n      const rangeOk = obstaclesOk && newLeft >= 0 && newRight < BASE_CANVAS_WIDTH;\r\n      if (rangeOk) {\r\n        this.curTank().diffXPos(movement);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fires the current tank. Adds new projectiles to the projectile array.\r\n   * Updates displayed ammo count. Disables buttons.\r\n   */\r\n  private fire = () => {\r\n    this.projectiles.push(...this.curTank().fire(Number(this.launchSpeedInput.value)));\r\n    this.updateAmmoInfo();\r\n    this.fireClicked = false;\r\n    this.disableButtons(true);\r\n\r\n    AudioPlayer.shotSound();\r\n  };\r\n\r\n  /**\r\n   * Updates displayed player stats and wind. Enables buttons.\r\n   * Expects at least one player alive.\r\n   */\r\n  private nextRound = () => {\r\n    this.disableButtons(false);\r\n    const beforeIdx = this.curTankIdx;\r\n    this.curTankIdx = (this.curTankIdx + 1) % this.state.tanks.length;\r\n    while (!this.curTank().isAlive()) {\r\n      this.curTankIdx = (this.curTankIdx + 1) % this.state.tanks.length;\r\n    }\r\n    if (this.curTankIdx < beforeIdx) {\r\n      ++this.round;\r\n    }\r\n    // @ts-ignore - updates current player name\r\n    this.roundPlayerInfoDiv.innerText = `Round: ${this.round} - Player: ${this.curTank().getName()}`;\r\n    // updates current selected ammo\r\n    this.updateAmmoInfo();\r\n    this.launchSpeedInput.value = String(this.curTank().getLastLaunchSpeed());\r\n    // updates current wind value\r\n    this.wind += Math.random() * 4 - 2;\r\n    // @ts-ignore\r\n    this.windDiv.innerText = this.formatWind();\r\n  };\r\n\r\n  /**\r\n   * Sets given disable status in all buttons in GameArea footer.\r\n   */\r\n  private disableButtons = (disable: boolean) => {\r\n    // @ts-ignore\r\n    [...this.footer.getElementsByTagName(\"button\")].forEach(b => {\r\n      b.disabled = disable;\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Checks whether the given projectile hits anything in the GameArea.\r\n   * If so, explodes it.\r\n   */\r\n  private collide = (p: Projectile) => {\r\n    if (\r\n      // if the ground is hit\r\n      p.getYPos() + p.getRadius() > BASE_GROUND_START ||\r\n      // or some tank is hit\r\n      this.state.tanks.some(t => t.isCollision(p)) ||\r\n      // or some obstacle is hit\r\n      this.obstacles.some(o => o.isCollision(p))\r\n    ) {\r\n      this.explode(p);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Explodes the given projectile. Checks whether which tanks should take damage.\r\n   */\r\n  private explode = (proj: Projectile) => {\r\n    proj.explode();\r\n    // @ts-ignore\r\n    const originTank: Tank = this.state.tanks.find(t => t.getId() === proj.getOriginId());\r\n    this.state.tanks.forEach(tank => {\r\n      if (tank.isAlive() && centerDistance(tank, proj) < proj.getExplosionRadius()) {\r\n        // if a tank was destroyed\r\n        if (tank.receiveDamage(proj.getDamage())) {\r\n          this.explosions.push(new Explosion(tank.getXPos() + BASE_TANK_WIDTH / 2, tank.getYPos(), 50, 0.2));\r\n          // adds kill if the target was destroyed and it is not itself\r\n          if (originTank.getId() !== tank.getId()) {\r\n            originTank.addKill();\r\n          }\r\n        }\r\n        // updates dealt damage if not hit itself\r\n        if (originTank.getId() !== tank.getId()) {\r\n          originTank.changeDamageDealt(proj.getDamage());\r\n        }\r\n        this.setState({}); // forces update\r\n      }\r\n    });\r\n    this.obstacles.forEach(o => o.collide(proj));\r\n    this.explosions.push(new Explosion(proj.getXPos(), proj.getYPos(), proj.getExplosionRadius(), 0.5));\r\n  };\r\n\r\n  /**\r\n   * Clears game update interval, finds winners and losers and passes\r\n   * player stats to parent.\r\n   */\r\n  private endGame = () => {\r\n    const players = this.state.tanks.map(t => t.getPlayer());\r\n    const winner = this.state.tanks.find(t => t.isAlive());\r\n    let winnerId = NaN;\r\n    if (winner !== undefined) {\r\n      winnerId = winner.getId();\r\n    }\r\n    players.forEach(p => {\r\n      if (p.id !== winnerId) {\r\n        p.loses = 1;\r\n      } else {\r\n        p.wins = 1;\r\n      }\r\n    });\r\n    this.props.onEnd(players);\r\n  };\r\n\r\n  /**\r\n   * Creates initial wind value from uniform distribution on interval (-50, 50).\r\n   */\r\n  private initWind(): number {\r\n    return Math.random() * 100 - 50;\r\n  }\r\n\r\n  /**\r\n   * Returns formated string description of current wind direction and power.\r\n   */\r\n  private formatWind(): string {\r\n    let strWind: string = String(Math.abs(Math.round(this.wind)));\r\n    if (this.wind < -30) {\r\n      strWind = \"<<< \" + strWind;\r\n    } else if (this.wind < -15) {\r\n      strWind = \"<< \" + strWind;\r\n    } else if (this.wind < 0) {\r\n      strWind = \"< \" + strWind;\r\n    } else if (this.wind > 30) {\r\n      strWind = strWind + \" >>>\";\r\n    } else if (this.wind > 15) {\r\n      strWind = strWind + \" >>\";\r\n    } else if (this.wind > 0) {\r\n      strWind = strWind + \" >\";\r\n    }\r\n    return \"Wind: \" + strWind;\r\n  }\r\n\r\n  /**\r\n   * Updates displayed short and long ammo info.\r\n   */\r\n  private updateAmmoInfo = () => {\r\n    this.ammoShortInfo.innerText = this.curTank().getCurrentProjectileShortStats();\r\n    this.ammoLongInfo.innerText = this.curTank().getCurrentProjectileLongStats();\r\n  }\r\n\r\n  /**\r\n   * Creates an HTMLButtonElement with given text. Given onTrigger function\r\n   * is set as onmousedown listener. Given onReset function is set as onmouseup\r\n   * and onmouseleave listeners.\r\n   */\r\n  private createButton(text: string, onTrigger: (e: Event) => void, onReset: (e: Event) => void = () => {}): HTMLButtonElement {\r\n    const button = document.createElement(\"button\");\r\n    button.textContent = text;\r\n    button.onmousedown = onTrigger;\r\n    button.onmouseup = onReset;\r\n    button.onmouseleave = onReset;\r\n    button.ontouchstart = onTrigger;\r\n    button.ontouchend = onReset;\r\n    button.ontouchcancel = onReset;\r\n    return button;\r\n  }\r\n\r\n  /**\r\n   * Creates HTMLSpanElement with given text.\r\n   */\r\n  private createSpan(text: string): HTMLSpanElement {\r\n    const span = document.createElement(\"span\");\r\n    span.innerText = text;\r\n    return span;\r\n  }\r\n\r\n  /**\r\n   * Creates HTMLDIvElement with player and wind info.\r\n   */\r\n  private createInfoDiv(): HTMLDivElement {\r\n    const div: HTMLDivElement = document.createElement(\"div\");\r\n    div.classList.add(\"info-div\");\r\n    // application logo\r\n    const logoImg = document.createElement(\"img\");\r\n    logoImg.src = logo;\r\n    logoImg.alt = \"Tanks2D\";\r\n    div.appendChild(logoImg);\r\n    // current player name\r\n    this.roundPlayerInfoDiv = document.createElement(\"div\");\r\n    this.roundPlayerInfoDiv.innerText = `Round: ${this.round} - Player: ${this.curTank().getName()}`;\r\n    div.appendChild(this.roundPlayerInfoDiv);\r\n    return div;\r\n  }\r\n\r\n  /**\r\n   * Creates HTMLDIvElement with movement and gun movement buttons.\r\n   */\r\n  private createMoveGunDiv(): HTMLDivElement {\r\n    const moveGunDiv: HTMLDivElement = document.createElement(\"div\");\r\n    moveGunDiv.classList.add(\"move-gun-div\");\r\n    // current wind\r\n    this.windDiv = document.createElement(\"div\");\r\n    this.windDiv.innerText = this.formatWind();\r\n    moveGunDiv.appendChild(this.windDiv);\r\n    // movement buttons\r\n    const movementDiv: HTMLDivElement = document.createElement(\"div\");\r\n    movementDiv.classList.add(\"move-div\");\r\n    movementDiv.appendChild(\r\n      this.createButton(\r\n        \"\",\r\n        () => (this.movement = -TANK_MOVEMENT_SPEED),\r\n        () => (this.movement = 0)\r\n      )\r\n    );\r\n    movementDiv.appendChild(this.createSpan(\" MOVE \"));\r\n    movementDiv.appendChild(\r\n      this.createButton(\r\n        \"\",\r\n        () => (this.movement = TANK_MOVEMENT_SPEED),\r\n        () => (this.movement = 0)\r\n      )\r\n    );\r\n    moveGunDiv.appendChild(movementDiv);\r\n    // gun movement buttons\r\n    const gunDiv: HTMLDivElement = document.createElement(\"div\");\r\n    gunDiv.classList.add(\"gun-div\");\r\n    gunDiv.appendChild(\r\n      this.createButton(\r\n        \"\",\r\n        () => (this.gunMovement = -GUN_MOVEMENT_SPEED),\r\n        () => (this.gunMovement = 0)\r\n      )\r\n    );\r\n    gunDiv.appendChild(this.createSpan(\" GUN \"));\r\n    gunDiv.appendChild(\r\n      this.createButton(\r\n        \"\",\r\n        () => (this.gunMovement = GUN_MOVEMENT_SPEED),\r\n        () => (this.gunMovement = 0)\r\n      )\r\n    );\r\n    moveGunDiv.appendChild(gunDiv);\r\n    return moveGunDiv;\r\n  }\r\n\r\n  /**\r\n   * Creates HTMLDIvElement with ammo changing and fire buttons.\r\n   */\r\n  private createAmmoFireDiv(): HTMLDivElement {\r\n    const ammoFire: HTMLDivElement = document.createElement(\"div\");\r\n    ammoFire.classList.add(\"ammo-fire-div\");\r\n    // ammo change buttons\r\n    const ammoDiv: HTMLDivElement = document.createElement(\"div\");\r\n    ammoDiv.classList.add(\"ammo-div\");\r\n    ammoDiv.appendChild(\r\n      this.createButton(\"\", () => {\r\n        this.curTank().loadPrevProjectile();\r\n        this.updateAmmoInfo();\r\n      })\r\n    );\r\n    const ammoInfoDiv = document.createElement(\"div\");\r\n    ammoInfoDiv.classList.add(\"ammo-info-div\");\r\n    this.ammoShortInfo = this.createSpan(this.curTank().getCurrentProjectileShortStats());\r\n    this.ammoShortInfo.classList.add(\"short-info-span\");\r\n    this.ammoLongInfo = this.createSpan(this.curTank().getCurrentProjectileLongStats());\r\n    this.ammoLongInfo.classList.add(\"long-info-span\");\r\n    ammoInfoDiv.appendChild(this.ammoShortInfo);\r\n    ammoInfoDiv.appendChild(this.ammoLongInfo);\r\n    ammoDiv.appendChild(ammoInfoDiv);\r\n    ammoDiv.appendChild(\r\n      this.createButton(\"\", () => {\r\n        this.curTank().loadNextProjectile();\r\n        this.updateAmmoInfo();\r\n      })\r\n    );\r\n    ammoFire.appendChild(ammoDiv);\r\n    // fire power slider\r\n    this.launchSpeedInput = document.createElement(\"input\");\r\n    this.launchSpeedInput.type = \"range\";\r\n    this.launchSpeedInput.min = \"10\";\r\n    this.launchSpeedInput.max = \"100\";\r\n    this.launchSpeedInput.value = \"50\";\r\n    ammoFire.appendChild(this.launchSpeedInput);\r\n    // fire div\r\n    const fireDiv: HTMLDivElement = document.createElement(\"div\");\r\n    fireDiv.classList.add(\"fire-div\");\r\n    fireDiv.appendChild(\r\n      this.createButton(\"Fire!\", () => (this.fireClicked = true))\r\n    );\r\n    ammoFire.appendChild(fireDiv);\r\n    return ammoFire;\r\n  }\r\n\r\n  /**\r\n   * Computes the size of the canvas and ratio to the reference size 800x320.\r\n   * Sets initial positions of tanks.\r\n   */\r\n  private computeSize(): void {\r\n    // gets rounded window width\r\n    let windowWidth: number = floorToHundret(window.innerWidth * 0.9);\r\n    // asserts too wide windows\r\n    windowWidth = windowWidth > 1400 ? 1400 : windowWidth;\r\n    this.sizeRatio = windowWidth / BASE_CANVAS_WIDTH;\r\n    console.log(\"ratio: \" + this.sizeRatio);\r\n    this.canvas.width = windowWidth;\r\n    this.canvas.height = windowWidth / 2.5;\r\n  }\r\n\r\n  /**\r\n   * Sets init position of tanks and obstacles.\r\n   */\r\n  private initPositions(): void {\r\n    const positions = initPositions[this.state.tanks.length - 2];\r\n    const distance: number = BASE_CANVAS_WIDTH / positions.length;\r\n    const obstacleFactory = new ObstacleFactory();\r\n    positions.forEach((pos, i) => {\r\n      // adding obstacle\r\n      if (pos.o) {\r\n        this.obstacles.push(obstacleFactory.random(distance * (i + 0.5), BASE_GROUND_START));\r\n      }\r\n      // setting tank position\r\n      else {\r\n        this.state.tanks[pos.i].setXPos(distance * (i + 0.5) - BASE_TANK_WIDTH / 2);\r\n        this.state.tanks[pos.i].setYPos(BASE_GROUND_START);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sets inner structure of the component not maintained by React.\r\n   */\r\n  componentDidMount() {\r\n    // @ts-ignore - gets parent section\r\n    const gameArea: HTMLElement = document.getElementById(this.props.id);\r\n    window.addEventListener(\"resize\", () => this.computeSize());\r\n    // create canvas for graphics\r\n    this.canvas = document.createElement(\"canvas\");\r\n    // @ts-ignore\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n    const canvasContainer = document.createElement(\"div\");\r\n    canvasContainer.classList.add(\"canvas-container\");\r\n    canvasContainer.appendChild(this.canvas)\r\n\r\n    // computes size of the canvas\r\n    this.computeSize();\r\n    // sets init positions of tanks and obstacles\r\n    this.initPositions();\r\n\r\n    // create footer\r\n    this.footer = document.createElement(\"footer\");\r\n    // info about player and wind\r\n    this.footer.appendChild(this.createInfoDiv());\r\n    // div with movement and gun movement\r\n    this.footer.appendChild(this.createMoveGunDiv());\r\n    // div with ammo and fire\r\n    this.footer.appendChild(this.createAmmoFireDiv());\r\n\r\n    // appends children\r\n    gameArea.insertAdjacentElement(\"afterbegin\", this.footer);\r\n    gameArea.insertAdjacentElement(\"afterbegin\", canvasContainer);\r\n\r\n    // starts update loop\r\n    this.lastUpdateTime = Date.now();\r\n    requestAnimationFrame(this.update);\r\n  }\r\n\r\n  /**\r\n   * Renders parent component. Main tasks are not maintained by React.\r\n   */\r\n  render() {\r\n    return (\r\n      <section id={this.props.id} className=\"game-area\">\r\n        <div className=\"tank-stats-container\">\r\n          {this.state.tanks.map((tank, i) => {\r\n            return <TankStats tank={tank} key={i} />;\r\n          })}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import { BASE_TANK_WIDTH } from \"../constants/constants\";\r\nimport { BASE_TANK_HEIGHT } from \"../constants/constants\";\r\nimport { euclideanDistance } from \"../utils/math\";\r\nimport Projectile from \"./projectile\";\r\nimport Tank from \"./tank\";\r\n\r\n/**\r\n * Computes the distance of the tank and projectile centers.\r\n */\r\nexport function centerDistance(tank: Tank, p: Projectile): number {\r\n  return euclideanDistance(\r\n    tank.getXPos() + BASE_TANK_WIDTH / 2,\r\n    tank.getYPos() - BASE_TANK_HEIGHT / 2,\r\n    p.getXPos(),\r\n    p.getYPos()\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport \"./homePage.css\";\r\n\r\ninterface HomePageProps {\r\n  onNewGame: () => void;\r\n  onStats: () => void;\r\n}\r\n\r\ninterface HomePageStats {}\r\n\r\n/**\r\n * Home page of the game with the main navigation.\r\n */\r\nexport class HomePage extends React.Component<HomePageProps, HomePageStats> {\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"home-page\">\r\n        <button onClick={this.props.onNewGame} className=\"menu-button\">Play new game</button>\r\n        <button onClick={this.props.onStats} className=\"menu-button\">Statistics</button>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","const rgbRangeDecimal: number = 16777216;\r\n\r\n/**\r\n * Generates random RGB color string \"#......\".\r\n */\r\nexport function randomRGB(): string {\r\n  return (\r\n    \"#\" +\r\n    Math.floor(Math.random() * rgbRangeDecimal)\r\n      .toString(16)\r\n      .padStart(6, \"0\")\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport { newEmptyPlayer, PlayerStats } from \"../../player/playerStats\";\r\nimport { randomRGB } from \"../../utils/color\";\r\nimport \"./addPlayerMenu.css\";\r\n\r\ninterface AddPlayerMenuProps {\r\n  // index of the add player menu (used for menu ids)\r\n  index: number;\r\n  // player information to be displayed\r\n  player: PlayerStats;\r\n  // array of stored players to select from (or undefined, if menu shows quick player)\r\n  availableStoredPlayers: PlayerStats[] | undefined;\r\n  // handler of changing information about the displayed player\r\n  onPlayerChange: (player: PlayerStats) => void;\r\n  // handler of removing the menu\r\n  onRemove: () => void;\r\n  // handler of user's drag menu change\r\n  onDragChange: (from: number, to: number) => void;\r\n}\r\n\r\ninterface AddPlayerMenuState {}\r\n\r\n/**\r\n * Menu for setting name and color of one player.\r\n * When availableStoredPlayers is undefined, it shows an input for a quick player name.\r\n * Otherwise, it shows a select from available stored players.\r\n */\r\nexport default class AddPlayerMenu extends React.Component<\r\n  AddPlayerMenuProps,\r\n  AddPlayerMenuState\r\n> {\r\n  private isQuick(): boolean {\r\n    return this.props.availableStoredPlayers === undefined;\r\n  }\r\n\r\n  /**\r\n   * Changes the players name.\r\n   */\r\n  private handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.props.player.name = event.target.value;\r\n    this.props.onPlayerChange(this.props.player);\r\n  };\r\n\r\n  /**\r\n   * Changes the players color.\r\n   */\r\n  private handleColorChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.props.player.color = event.target.value;\r\n    this.props.onPlayerChange(this.props.player);\r\n  };\r\n\r\n  /**\r\n   * Changes the displayed player to the new selected stored one.\r\n   */\r\n  private handleStoredPlayerChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n    // @ts-ignore - availableStoredPlayers must be defined in stored-player version\r\n    const players: PlayerStats = this.props.availableStoredPlayers.filter(p => String(p.id) === event.target.value)[0];\r\n    this.props.onPlayerChange(\r\n      newEmptyPlayer(\r\n        players.id,\r\n        players.name,\r\n        players.color === \"\" ? randomRGB() : players.color,\r\n        players.avatar\r\n      )\r\n    );\r\n  };\r\n\r\n  // @ts-ignore\r\n  private handleDragStart = (e: DragEvent<HTMLDivElement>) => {\r\n    e.dataTransfer.setData(\"text/plain\", this.props.index);\r\n  }\r\n\r\n  // @ts-ignore\r\n  private handleDragOver = (e: DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  // @ts-ignore\r\n  private handleDragDrop = (e: DragEvent<HTMLDivElement>) => {\r\n    const from = Number(e.dataTransfer.getData(\"text/plain\"));\r\n    if (!isNaN(from)) {\r\n      this.props.onDragChange(from, this.props.index);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"add-player-menu\"\r\n           draggable={true}\r\n           onDragStart={this.handleDragStart}\r\n           onDragOver={this.handleDragOver}\r\n           onDrop={this.handleDragDrop}>\r\n        <header>\r\n          <img src={this.props.player.avatar} alt=\":(\"/>\r\n          <h4>\r\n            {this.isQuick() ? \"Quick\" : \"Stored\"} player {this.props.index + 1}:\r\n          </h4>\r\n          <button onClick={this.props.onRemove}>&#10006;</button>\r\n        </header>\r\n        {this.isQuick() ? (\r\n          // if it is a quick player, shows a name input field\r\n          <div>\r\n            <label htmlFor={\"name-input-player-\" + this.props.index}>\r\n              Name:\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id={\"name-input-player-\" + this.props.index}\r\n              value={this.props.player.name}\r\n              onChange={this.handleNameChange}\r\n              placeholder=\"fill your name\"\r\n              spellCheck={false}\r\n              autoComplete={\"off\"}\r\n              maxLength={20}\r\n            />\r\n          </div>\r\n        ) : (\r\n          // if it is a stored player, shows a player select field\r\n          <div>\r\n            <label htmlFor={\"select-player-\" + this.props.index}>Player:</label>\r\n            <select\r\n              id={\"select-player-\" + this.props.index}\r\n              value={this.props.player.id}\r\n              onChange={this.handleStoredPlayerChange}\r\n            >\r\n              {this.props.availableStoredPlayers && this.props.availableStoredPlayers.map(player => {\r\n                return <option key={player.id} value={player.id}>{player.name}</option>;\r\n              })}\r\n            </select>\r\n          </div>\r\n        )}\r\n        <div>\r\n          <label htmlFor={\"color-input-player-\" + this.props.index}>\r\n            Color:\r\n          </label>\r\n          <input\r\n            type=\"color\"\r\n            id={\"color-input-player-\" + this.props.index}\r\n            value={this.props.player.color}\r\n            onChange={this.handleColorChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACZSURBVDhP5ZDbDUBAEABVoAj1aFAZylCCFjTBxrG35tZ5hETiMj9ndyYomn54hP+Gxq5UMAK7IZuwYE3xQ5ABlgNOCJoLFOG1EIQMEHdDxXrcqwAx90ZWS68Q3/+0QyAyJEBwgSIchOb/uxz7HIrghATrpGA5wFDV1gHIii5A3IR0KYCEgAXrxhCWzrMJYXaJGMLgBh8M9cMEUUhNiMJglbgAAAAASUVORK5CYII=\"","import * as React from \"react\";\r\nimport { PlayerStorage } from \"../../player/playerStorage\";\r\nimport { newEmptyPlayer, PlayerStats } from \"../../player/playerStats\";\r\nimport { randomRGB } from \"../../utils/color\";\r\nimport AddPlayerMenu from \"./addPlayerMenu\";\r\nimport defaultAvatar from \"../../assets/imgs/default_avatar.png\";\r\nimport \"./newGamePage.css\";\r\n\r\ninterface NewGamePageProps {\r\n  // accepts the array of players selected for the game\r\n  onSubmit: (players: PlayerStats[]) => void;\r\n  // returns to the previous page\r\n  onBack: () => void;\r\n}\r\n\r\ninterface NewGamePageState {\r\n  // selected players for this game\r\n  participants: PlayerStats[];\r\n  // stored players which are not selected for this game yet\r\n  availableStored: PlayerStats[];\r\n  // ids of players which are not saved in local storage - they are negative\r\n  minUsedId: number;\r\n}\r\n\r\nconst minPlayers: number = 2;\r\nconst maxPlayers: number = 4;\r\n\r\n/**\r\n * Page with selection of current players for the game.\r\n * 2, 3, or 4 players must be added for the game to begin.\r\n * Quick or stored players can be added.\r\n */\r\nexport default class NewGamePage extends React.Component<\r\n  NewGamePageProps,\r\n  NewGamePageState\r\n> {\r\n  constructor(props: NewGamePageProps) {\r\n    super(props);\r\n    this.state = {\r\n      participants: [],\r\n      availableStored: PlayerStorage.getStoredPlayers(),\r\n      minUsedId: 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Adds a new quick player in the menu.\r\n   */\r\n  private handleAddQuickPlayer = (): void => {\r\n    const id = this.state.minUsedId - 1;\r\n    this.state.participants.push(newEmptyPlayer(id, \"\", randomRGB(), defaultAvatar));\r\n    this.setState({ minUsedId: id });\r\n  };\r\n\r\n  /**\r\n   * Adds a new available stored player in the menu.\r\n   */\r\n  private handleAddStoredPlayer = (): void => {\r\n    // @ts-ignore - the player is removed from the available array\r\n    const player: PlayerStats = this.state.availableStored.shift();\r\n    this.state.participants.push(newEmptyPlayer(player.id, player.name, randomRGB(), player.avatar));\r\n    this.setState({});\r\n  };\r\n\r\n  /**\r\n   * Removes the player from the menu.\r\n   */\r\n  private handleRemovePlayer = (index: number): void => {\r\n    const deleted = this.state.participants.splice(index, 1);\r\n    if (deleted[0].id > 0) {\r\n      // the stored player is returned to the available array\r\n      this.state.availableStored.push(deleted[0]);\r\n    }\r\n    this.setState({});\r\n  };\r\n\r\n  /**\r\n   * Updates a player info at the given index.\r\n   */\r\n  private handlePlayerChange = (player: PlayerStats, index: number): void => {\r\n    let available = this.state.availableStored;\r\n    const previous = this.state.participants[index];\r\n    // if the Stored player is updated...\r\n    if (previous.id > 0) {\r\n      // returns the previous player to the available array\r\n      this.state.availableStored.push(previous);\r\n      // removes the new player from the available array\r\n      available = this.state.availableStored.filter(p => p.id !== player.id);\r\n    }\r\n    const participants = this.state.participants;\r\n    participants[index] = player;\r\n    this.setState({ availableStored: available, participants: participants });\r\n  };\r\n\r\n  private handleDragChange = (from: number, to: number) => {\r\n    // dragging up\r\n    if (from > to) {\r\n      const before = this.state.participants.slice(0, to);\r\n      const moved = this.state.participants.slice(to, from);\r\n      const fromValue = this.state.participants[from];\r\n      const after = this.state.participants.slice(from + 1);\r\n      const newArray = [...before, fromValue, ...moved, ...after];\r\n      this.setState({participants: newArray});\r\n    }\r\n    // dragging down\r\n    else if (from < to) {\r\n      const before = this.state.participants.slice(0, from);\r\n      const fromValue = this.state.participants[from];\r\n      const moved = this.state.participants.slice(from + 1, to + 1);\r\n      const after = this.state.participants.slice(to + 1);\r\n      const newArray = [...before, ...moved, fromValue, ...after];\r\n      this.setState({participants: newArray});\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const playersCountError = this.state.participants.length < minPlayers;\r\n    const nameError = this.state.participants.some(p => p.name === \"\");\r\n    return (\r\n      <section className=\"new-game-page\">\r\n        <h3>New Game</h3>\r\n        {this.state.participants.map((p, i) => {\r\n          return (\r\n            <AddPlayerMenu\r\n              key={i}\r\n              index={i}\r\n              player={p}\r\n              availableStoredPlayers={\r\n                // for the concrete menu, the selected player is available too\r\n                p.id < 0 ? undefined : [p, ...this.state.availableStored]\r\n              }\r\n              onPlayerChange={player => this.handlePlayerChange(player, i)}\r\n              onRemove={() => this.handleRemovePlayer(i)}\r\n              onDragChange={this.handleDragChange}\r\n            />\r\n          );\r\n        })}\r\n        {// if the max player count was not reached, can add new quick players\r\n        this.state.participants.length < maxPlayers ? (\r\n          <button onClick={this.handleAddQuickPlayer} className=\"menu-button\">Quick player</button>\r\n        ) : null}\r\n        {// if the max player count was not reached and there are available stored players, can add them\r\n        this.state.participants.length < maxPlayers && this.state.availableStored.length > 0 ? (\r\n            <button onClick={this.handleAddStoredPlayer} className=\"menu-button\">Stored player</button>\r\n          ) : null}\r\n        <div>\r\n          <button onClick={this.props.onBack}\r\n          className=\"menu-button\">Back</button>\r\n          <button\r\n            onClick={() => this.props.onSubmit(this.state.participants)}\r\n            disabled={playersCountError || nameError}\r\n            className=\"menu-button\">\r\n            {!playersCountError && !nameError && <span>Play</span>}\r\n            {playersCountError && <span>Please, add at least {minPlayers} players</span>}\r\n            {nameError && !playersCountError && <span>Please, fill all names</span>}\r\n          </button>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {PlayerStats, winRatio} from \"../../player/playerStats\";\r\nimport \"./playerTable.css\";\r\n\r\ninterface PlayerTableProps {\r\n  // players to be displayed\r\n  players: PlayerStats[],\r\n  // when true, shows Wins column with \"ratio% (wins/games)\"\r\n  showWins: boolean,\r\n  // when true, shows a column with delete buttons\r\n  showDelete: boolean,\r\n  // handler of deleting a player, receives his id\r\n  onDelete?: (id: number) => void\r\n}\r\n\r\n/**\r\n * Displays player stats in a table.\r\n */\r\nexport class PlayerTable extends React.Component<PlayerTableProps, any> {\r\n  render() {\r\n    const handleDelete = this.props.onDelete ? this.props.onDelete : () => {};\r\n\r\n    return (\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th/>\r\n            <th className=\"img-th\"/>\r\n            <th>Name:</th>\r\n            {this.props.showWins && <th>Wins:</th>}\r\n            <th>Kills:</th>\r\n            <th>Dmg dealt:</th>\r\n            <th>Dmg received:</th>\r\n            {this.props.showDelete && <th/>}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n        {this.props.players.map((p, i) => (\r\n          <tr key={p.id}>\r\n            <td>{i + 1}</td>\r\n            <td className=\"img-td\"><img src={p.avatar} width={30} height={30} alt=\":(\"/></td>\r\n            <td>{p.name}</td>\r\n            {this.props.showWins && <td>{Math.floor(winRatio(p) * 100)}% ({p.wins}/{p.wins + p.loses})</td>}\r\n            <td>{p.kills}</td>\r\n            <td>{p.dmgDealt}</td>\r\n            <td>{p.dmgReceived}</td>\r\n            {this.props.showDelete && <td><button onClick={() => handleDelete(p.id)} className=\"menu-button\">Delete</button></td>}\r\n          </tr>)\r\n        )}\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n}","import * as React from \"react\";\r\nimport {PlayerStats, sortPlayers} from \"../../player/playerStats\";\r\nimport {PlayerTable} from \"./playerTable\";\r\nimport \"./resultPage.css\"\r\n\r\ninterface ResultsPageProps {\r\n  // array of player results from the game.\r\n  players: PlayerStats[];\r\n  // returns to the previous page\r\n  onBack: () => void;\r\n}\r\n\r\ninterface ResultsPageState {}\r\n\r\n/**\r\n * Shows game results for given players.\r\n */\r\nexport class ResultsPage extends React.Component<\r\n  ResultsPageProps,\r\n  ResultsPageState\r\n> {\r\n  render() {\r\n    const players = sortPlayers(this.props.players);\r\n    return (\r\n      <section className=\"result-page\">\r\n        <PlayerTable\r\n          players={players}\r\n          showWins={false}\r\n          showDelete={false}\r\n        />\r\n        <button onClick={this.props.onBack} className=\"menu-button\">Back</button>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","/**\r\n * FileDialog for loading files to the application.\r\n */\r\nexport class FileDialog {\r\n\r\n  /**\r\n   * Loads asynchronously a PNG file as Base64 URL string.\r\n   *\r\n   * @param maxBs maximum allowed size of image in bites (default 1024)\r\n   */\r\n  public static openPNG(maxBs: number = 2048): Promise<string> {\r\n    return new Promise<string>((resolve, reject) => {\r\n      let element = document.createElement('div');\r\n      element.innerHTML = `<input type=\"file\" accept='.png'>`;\r\n      let fileInput = element.firstChild;\r\n      // @ts-ignore\r\n      fileInput.addEventListener('change', function() {\r\n        // @ts-ignore\r\n        let file = fileInput.files[0];\r\n        if (file.size > maxBs) {\r\n          console.log(`Maximal image size (${maxBs} bytes) exceeded: ${file.size} bytes`);\r\n          return reject(`Maximal image size (${maxBs} bytes) exceeded: ${file.size} bytes`);\r\n        }\r\n        if (!file.name.toLowerCase().endsWith(\".png\")) {\r\n          console.log(\"Unsupported image type. Please, use PNG image.\");\r\n          return reject(\"Unsupported image type. Please, use PNG image.\");\r\n        }\r\n        let reader = new FileReader();\r\n        reader.onload = function() {\r\n          // @ts-ignore\r\n          const url: string = reader.result;\r\n          resolve(url);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      });\r\n      // @ts-ignore\r\n      fileInput.click();\r\n    });\r\n  }\r\n}","import \"./messageBox.css\"\r\n\r\n// @ts-ignore\r\nconst cssConstants: CSSStyleDeclaration = getComputedStyle(document.querySelector(':root'));\r\nconst boxMargin: number = Number(cssConstants.getPropertyValue('--message-box-margin-num'));\r\n\r\nexport class MessageBox {\r\n\r\n  private static readonly hideTimeout: number = 5000;\r\n\r\n  private static box: HTMLDivElement = MessageBox.init();\r\n  private static hideIntervalId: NodeJS.Timeout;\r\n\r\n  private static init(): HTMLDivElement {\r\n    const box = document.createElement(\"div\");\r\n    box.classList.add(\"message-box\");\r\n    box.style.visibility = \"hidden\";\r\n    box.onmouseenter = () => {\r\n      MessageBox.clearHideTimeout();\r\n    }\r\n    box.onmouseleave = () => {\r\n      MessageBox.setHideTimeout();\r\n    }\r\n\r\n    const paragraph = document.createElement(\"p\");\r\n    box.appendChild(paragraph);\r\n\r\n    const button = document.createElement(\"button\");\r\n    button.innerText = \"\\u2716\";\r\n    button.onclick = () => {\r\n      MessageBox.hideBox();\r\n    }\r\n    box.appendChild(button);\r\n\r\n    window.addEventListener('resize', () => {\r\n      MessageBox.moveBox();\r\n    });\r\n\r\n    document.body.appendChild(box);\r\n    return box;\r\n  }\r\n\r\n  private static setHideTimeout = () => {\r\n    // clears previous hide interval\r\n    MessageBox.clearHideTimeout();\r\n    MessageBox.hideIntervalId = setTimeout(MessageBox.hideBox, MessageBox.hideTimeout);\r\n  }\r\n\r\n  private static clearHideTimeout = () => {\r\n    clearTimeout(MessageBox.hideIntervalId);\r\n  }\r\n\r\n  private static hideBox = () => {\r\n    MessageBox.box.style.visibility = \"hidden\";\r\n  }\r\n\r\n  private static moveBox = () => {\r\n    if (MessageBox.box.style.visibility === \"visible\") {\r\n      MessageBox.box.style.width = (document.body.clientWidth - 2 * boxMargin) + \"px\";\r\n    }\r\n  }\r\n\r\n  private static display(msg: string, error: boolean): void {\r\n    const box = MessageBox.box;\r\n    // @ts-ignore - first element is paragraph\r\n    box.firstElementChild.innerText = msg;\r\n    box.style.visibility = \"visible\";\r\n    box.classList.toggle(\"message-box-message\", !error);\r\n    box.classList.toggle(\"message-box-error\", error);\r\n    MessageBox.moveBox();\r\n    MessageBox.setHideTimeout();\r\n  }\r\n\r\n  /**\r\n   * Displays given message in a message box fixed on the page bottom.\r\n   */\r\n  public static message(msg: string): void {\r\n    MessageBox.display(msg, false);\r\n  }\r\n\r\n  /**\r\n   * Displays given error in a message box fixed on the page bottom.\r\n   */\r\n  public static error(msg: string): void {\r\n    MessageBox.display(msg, true);\r\n  }\r\n}","import * as React from \"react\";\r\nimport { PlayerStats } from \"../player/playerStats\";\r\nimport { PlayerStorage } from \"../player/playerStorage\";\r\nimport { GameArea } from \"./game/gameArea\";\r\nimport { HomePage } from \"./screens/homePage\";\r\nimport NewGamePage from \"./screens/newGamePage\";\r\nimport { ResultsPage } from \"./screens/resultsPage\";\r\nimport StatsPage from \"./screens/statsPage\";\r\nimport \"./tankGame.css\";\r\nimport {Logo} from \"./logo\";\r\nimport {AudioPlayer} from \"../utils/audioPlayer\";\r\n\r\n/**\r\n * Current screen content.\r\n */\r\nenum ScreenType {\r\n  HOME,\r\n  STATS,\r\n  NEW_GAME,\r\n  GAME,\r\n  RESULTS\r\n}\r\n\r\ninterface TankGameProps {\r\n  id: string;\r\n}\r\n\r\ninterface TankGameState {\r\n  screen: ScreenType;\r\n  currentPlayers: PlayerStats[];\r\n  backgroundMusic: boolean;\r\n}\r\n\r\n/**\r\n * Main component which dispatches to each page sections.\r\n */\r\nexport class TankGame extends React.Component<TankGameProps, TankGameState> {\r\n  constructor(props: TankGameProps) {\r\n    super(props);\r\n    this.state = {\r\n      screen: ScreenType.HOME,\r\n      currentPlayers: [],\r\n      backgroundMusic: false\r\n    };\r\n  }\r\n\r\n  private toggleBackgroundMusic = () => {\r\n    const newState = !this.state.backgroundMusic;\r\n    this.setState({backgroundMusic: newState});\r\n    if (newState) {\r\n      AudioPlayer.startBackgroundMusic();\r\n    }\r\n    else {\r\n      AudioPlayer.pauseBackgroundMusic();\r\n    }\r\n  }\r\n\r\n  private renderHomePage = () => {\r\n    return (\r\n      <HomePage\r\n        onNewGame={() => this.setState({ screen: ScreenType.NEW_GAME })}\r\n        onStats={() => this.setState({ screen: ScreenType.STATS })}\r\n      />\r\n    );\r\n  };\r\n\r\n  private renderStats = () => {\r\n    return (\r\n      <StatsPage onBack={() => this.setState({ screen: ScreenType.HOME })} />\r\n    );\r\n  };\r\n\r\n  private renderNewGamePage = () => {\r\n    return (\r\n      <NewGamePage\r\n        onBack={() => this.setState({ screen: ScreenType.HOME })}\r\n        onSubmit={players => {\r\n          AudioPlayer.pauseBackgroundMusic();\r\n          this.setState({ screen: ScreenType.GAME, currentPlayers: players });\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  private renderGame = () => {\r\n    return (\r\n      <GameArea\r\n        id={this.props.id}\r\n        players={this.state.currentPlayers}\r\n        onEnd={players => {\r\n          if (this.state.backgroundMusic) {\r\n            AudioPlayer.startBackgroundMusic();\r\n          }\r\n          players.forEach(p => PlayerStorage.updatePlayer(p));\r\n          this.setState({\r\n            screen: ScreenType.RESULTS,\r\n            currentPlayers: players\r\n          });\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  private renderResults = () => {\r\n    return (\r\n      <ResultsPage\r\n        players={this.state.currentPlayers}\r\n        onBack={() => this.setState({ screen: ScreenType.HOME })}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <main>\r\n        {this.state.screen !== ScreenType.GAME && (\r\n          <header>\r\n            <Logo width={300}/>\r\n            <button onClick={this.toggleBackgroundMusic} className=\"menu-button\">\r\n              {\"Music \" + (this.state.backgroundMusic ? \"on\" : \"off\")}\r\n            </button>\r\n          </header>\r\n        )}\r\n        {this.state.screen === ScreenType.HOME && this.renderHomePage()}\r\n        {this.state.screen === ScreenType.STATS && this.renderStats()}\r\n        {this.state.screen === ScreenType.NEW_GAME && this.renderNewGamePage()}\r\n        {this.state.screen === ScreenType.GAME && this.renderGame()}\r\n        {this.state.screen === ScreenType.RESULTS && this.renderResults()}\r\n      </main>\r\n    );\r\n  }\r\n}\r\n","import React, {ChangeEvent} from \"react\";\r\nimport {maxAvatarSize, PlayerStorage} from \"../../player/playerStorage\";\r\nimport {PlayerStats, sortPlayers} from \"../../player/playerStats\";\r\nimport {PlayerTable} from \"./playerTable\";\r\nimport \"./statsPage.css\";\r\nimport defaultAvatar from \"../../assets/imgs/default_avatar.png\";\r\nimport {FileDialog} from \"../../utils/fileDialog\";\r\nimport {MessageBox} from \"../messageBox\";\r\n\r\ninterface StatsPageProps {\r\n  // returns to the previous page\r\n  onBack: () => void;\r\n}\r\n\r\ninterface StatsPageState {\r\n  players: PlayerStats[];\r\n  newPlayerName: string;\r\n  avatar: any;\r\n}\r\n\r\n/**\r\n * Shows stats of stored players.\r\n */\r\nexport default class StatsPage extends React.Component<\r\n  StatsPageProps,\r\n  StatsPageState\r\n  > {\r\n  constructor(props: StatsPageProps) {\r\n    super(props);\r\n    this.state = {\r\n      players: sortPlayers(PlayerStorage.getStoredPlayers()),\r\n      newPlayerName: \"\",\r\n      avatar: defaultAvatar\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Updates name of the new player.\r\n   */\r\n  private handleNewPlayerNameChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({ newPlayerName: event.target.value });\r\n  }\r\n\r\n  /**\r\n   * Creates a new player and saves it into the local storage.\r\n   */\r\n  private handleAddNewPlayer = () => {\r\n    const name = this.state.newPlayerName;\r\n    const avatar = this.state.avatar;\r\n    this.setState({\r\n      players: PlayerStorage.saveNewPlayer(name, avatar),\r\n      newPlayerName: \"\",\r\n      avatar: defaultAvatar\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Deletes the player with the given id from the local storage.\r\n   */\r\n  private handleDeletePlayer = (id: number) => {\r\n    this.setState({\r\n      players: PlayerStorage.removePlayer(id)\r\n    });\r\n  }\r\n\r\n  private changeAvatar = () => {\r\n    FileDialog.openPNG(maxAvatarSize)\r\n      .then(img => {\r\n        this.setState({avatar: img});\r\n        MessageBox.message(\"Avatar loaded successfully!\");\r\n      })\r\n      .catch(MessageBox.error);\r\n  }\r\n\r\n  render() {\r\n    const disabled: boolean =\r\n      this.state.newPlayerName === \"\" ||\r\n      this.state.players.some(p => p.name === this.state.newPlayerName);\r\n    return (\r\n      <section className=\"stats-page\">\r\n\r\n        <PlayerTable\r\n          players={this.state.players}\r\n          showWins={true}\r\n          showDelete={true}\r\n          onDelete={this.handleDeletePlayer}\r\n        />\r\n\r\n        <form>\r\n          <label htmlFor={\"new-player-input\"}>New player:</label>\r\n          <input\r\n            type=\"text\"\r\n            id={\"new-player-input\"}\r\n            value={this.state.newPlayerName}\r\n            placeholder=\"fill your name\"\r\n            maxLength={20}\r\n            spellCheck={false}\r\n            autoComplete={\"off\"}\r\n            onChange={this.handleNewPlayerNameChange}\r\n          />\r\n          <button onClick={this.handleAddNewPlayer} className=\"menu-button\" disabled={disabled}>Create</button>\r\n          <div onClick={this.changeAvatar}>\r\n            <img src={this.state.avatar} alt=\"avatar\"/>\r\n            <span>Load your avatar (PNG, max {maxAvatarSize} bytes)</span>\r\n          </div>\r\n        </form>\r\n\r\n        <button onClick={this.props.onBack} className=\"menu-button\">Back</button>\r\n      </section>\r\n    );\r\n  }\r\n}","import React from \"react\";\r\nimport {AudioPlayer} from \"../utils/audioPlayer\";\r\nimport \"./logo.css\"\r\n\r\ninterface LogoProps {\r\n  // default width is 150px\r\n  width?: number,\r\n  // default height is \"width / 3\"\r\n  height?: number\r\n}\r\n\r\ninterface LogoState {\r\n  timeouts: (NodeJS.Timeout | undefined)[];\r\n}\r\n\r\n/**\r\n * Animated application logo. When the user clicks on a grenade in the logo, fire sound plays and the grenade disappears\r\n * for 5 seconds.\r\n */\r\nexport class Logo extends React.Component<LogoProps, LogoState> {\r\n\r\n  constructor(props: LogoProps) {\r\n    super(props);\r\n    this.state = {\r\n      timeouts: [undefined, undefined, undefined, undefined]\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.state.timeouts.forEach(t => {\r\n      if (t !== undefined) {\r\n        clearInterval(t);\r\n      }\r\n    });\r\n  }\r\n\r\n  private shootGrenade = (i: number) => {\r\n    if (this.state.timeouts[i] === undefined) {\r\n      const timeouts = this.state.timeouts;\r\n      timeouts[i] = setTimeout(() => this.returnGrenade(i), 5000);\r\n\r\n      AudioPlayer.shotSound();\r\n\r\n      this.setState({timeouts: timeouts });\r\n    }\r\n  }\r\n\r\n  private returnGrenade = (i: number) => {\r\n    const timeouts = this.state.timeouts;\r\n    timeouts[i] = undefined;\r\n    this.setState({timeouts: timeouts });\r\n  }\r\n\r\n  public render() {\r\n    const w = this.props.width ? this.props.width : 150;\r\n    const h = this.props.height ? this.props.height : w / 3;\r\n\r\n    const classes = this.state.timeouts.map(t => t === undefined ? \"\" : \"ellipse-shot\");\r\n\r\n    return (\r\n      <svg width={`${w}px`} height={`${h}px`} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 150 50\" cursor=\"default\">\r\n          {/* T - TOP GRENADE - first grenade in array */}\r\n          <g id=\"t_top_grenade\" onClick={() => this.shootGrenade(0)}>\r\n            <ellipse className={classes[0]} stroke=\"#bfbf00\" ry=\"1.97183\" rx=\"12.25349\" id=\"svg_7\" cy=\"10.8451\" cx=\"16.61985\" opacity=\"undefined\" strokeDasharray=\"null\" strokeWidth=\"null\" fill=\"#bfbf00\"/>\r\n            <rect stroke=\"#a3a32a\" strokeOpacity=\"0\" id=\"svg_1\" height=\"5.63379\" width=\"18.8732\" y=\"8.02821\" x=\"18.45083\" opacity=\"undefined\" fill=\"#d1661f\"/>\r\n          </g>\r\n\r\n          {/* T - BOTTOM GRENADE - second grenade in array */}\r\n          <g transform=\"rotate(90 22,26) \" id=\"t_bottom_grenade\" onClick={() => this.shootGrenade(1)}>\r\n            <ellipse className={classes[1]} stroke=\"#bfbf00\" ry=\"1.97183\" rx=\"12.25349\" id=\"svg_9\" cy=\"25.6338\" cx=\"15.2114\" opacity=\"undefined\" strokeDasharray=\"null\" strokeWidth=\"null\" fill=\"#bfbf00\"/>\r\n            <rect strokeOpacity=\"0\" id=\"svg_10\" height=\"5.63379\" width=\"23.66192\" y=\"22.81691\" x=\"17.04238\" opacity=\"undefined\" stroke=\"#a3a32a\" fill=\"#d1661f\"/>\r\n          </g>\r\n\r\n          {/* TANKS */}\r\n          <text id=\"tanks_text\" fontStyle=\"normal\" fontWeight=\"bold\" xmlSpace=\"preserve\" textAnchor=\"start\" fontFamily=\"sans-serif\" fontSize=\"35\" y=\"43.80278\" x=\"26.47898\" opacity=\"undefined\" strokeOpacity=\"0\" strokeDasharray=\"null\" strokeWidth=\"0\" stroke=\"#a3a32a\" fill=\"#3f7f00\">anks</text>\r\n\r\n          {/* II - FIRST GRENADE - third grenade in array */}\r\n          <g transform=\"rotate(90 110,26)\" id=\"ii_first_grenade\" onClick={() => this.shootGrenade(2)}>\r\n            <ellipse className={classes[2]} stroke=\"#bfbf00\" ry=\"1.97183\" rx=\"12.25349\" id=\"svg_13\" cy=\"25.6338\" cx=\"103.38023\" opacity=\"undefined\" strokeDasharray=\"null\" strokeWidth=\"null\" fill=\"#bfbf00\"/>\r\n            <rect strokeOpacity=\"0\" id=\"svg_14\" height=\"5.63379\" width=\"23.66192\" y=\"22.81691\" x=\"105.21121\" opacity=\"undefined\" stroke=\"#a3a32a\" fill=\"#d1661f\"/>\r\n          </g>\r\n\r\n          {/* II - SECOND GRENADE - fourth grenade in array */}\r\n          <g transform=\"rotate(90 118,26) \" id=\"ii_second_grenade\" onClick={() => this.shootGrenade(3)}>\r\n            <ellipse className={classes[3]} stroke=\"#bfbf00\" ry=\"1.97183\" rx=\"12.25349\" id=\"svg_16\" cy=\"25.35211\" cx=\"111.12669\" opacity=\"undefined\" strokeDasharray=\"null\" strokeWidth=\"null\" fill=\"#bfbf00\"/>\r\n            <rect strokeOpacity=\"0\" id=\"svg_17\" height=\"5.63379\" width=\"23.66192\" y=\"22.53522\" x=\"112.95767\" opacity=\"undefined\" stroke=\"#a3a32a\" fill=\"#d1661f\"/>\r\n          </g>\r\n\r\n          {/* D */}\r\n          <text id=\"d_text\" fontStyle=\"normal\" fontWeight=\"bold\" xmlSpace=\"preserve\" textAnchor=\"start\" fontFamily=\"sans-serif\" fontSize=\"35\" y=\"44.36616\" x=\"120.98582\" opacity=\"undefined\" fillOpacity=\"null\" strokeOpacity=\"0\" strokeDasharray=\"null\" strokeWidth=\"null\" stroke=\"#a3a32a\" fill=\"#d1661f\">D</text>\r\n      </svg>\r\n    )\r\n  }\r\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { TankGame } from \"./components/tankGame\";\nimport reportWebVitals from './reportWebVitals';\n\n/**\n * @license The software is Licensed under the MIT License\n *\n * Copyright (c) Luk Kotlk\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n * to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions\n * of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO\n * THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n *\n *\n *\n * Used music is free to non-commercial use:\n * - Artist: CEPHEI\n * - Track: The enemy will not pass\n */\nReactDOM.render(\n  <React.StrictMode>\n    <TankGame id=\"game-area\" />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}