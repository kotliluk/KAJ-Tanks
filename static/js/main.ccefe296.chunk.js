/*! For license information please see main.ccefe296.chunk.js.LICENSE.txt */
(this["webpackJsonpkaj-tanks"]=this["webpackJsonpkaj-tanks"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),s=n(22),o=n.n(s),r=(n(29),n(2)),c=n(3),l=n(5),u=n(4),d=n(12),h=n(6),p=n(23),f=n(8);function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{id:e,name:t,color:n,avatar:i,wins:0,loses:0,dmgDealt:0,dmgReceived:0,kills:0}}function v(e){var t=e.wins+e.loses;return 0===t?0:e.wins/t}function g(e){return e.sort((function(e,t){var n=v(e),i=v(t);return n>i?-1:n<i?1:10*t.kills+t.dmgDealt-t.dmgReceived-(10*e.kills+e.dmgDealt-e.dmgReceived)})),e}var y=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"initPlayers",value:function(){if(e.storageSupported){var t=localStorage.getItem("players");return null===t?[]:JSON.parse(t)}return console.warn("Local storage not supported."),[]}},{key:"persist",value:function(){localStorage.setItem("players",JSON.stringify(e.players))}},{key:"isSupported",value:function(){return e.storageSupported}},{key:"getStoredPlayers",value:function(){return e.storageSupported?Object(f.a)(e.players):[]}},{key:"saveNewPlayer",value:function(t,n){return e.storageSupported?(e.maxId+=1,e.players.push(m(e.maxId,t,"",n)),e.persist(),e.players):[]}},{key:"removePlayer",value:function(t){return e.storageSupported?(e.players=e.players.filter((function(e){return e.id!==t})),e.persist(),e.players):[]}},{key:"updatePlayer",value:function(t){var n,i=Object(p.a)(e.players);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id===t.id){a.wins+=t.wins,a.loses+=t.loses,a.dmgDealt+=t.dmgDealt,a.dmgReceived+=t.dmgReceived,a.kills+=t.kills,e.persist();break}}}catch(s){i.e(s)}finally{i.f()}}}]),e}();y.storageSupported="undefined"!==typeof Storage,y.players=y.initPlayers(),y.maxId=y.players.map((function(e){return e.id})).reduce((function(e,t){return Math.max(e,t)}),0);n(30);var j=n(0),b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.onDelete?this.props.onDelete:function(){};return Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{}),Object(j.jsx)("th",{className:"img-th"}),Object(j.jsx)("th",{children:"Name:"}),this.props.showWins&&Object(j.jsx)("th",{children:"Wins:"}),Object(j.jsx)("th",{children:"Kills:"}),Object(j.jsx)("th",{children:"Dmg dealt:"}),Object(j.jsx)("th",{children:"Dmg received:"}),this.props.showDelete&&Object(j.jsx)("th",{})]})}),Object(j.jsx)("tbody",{children:this.props.players.map((function(n,i){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:i+1}),Object(j.jsx)("td",{className:"img-td",children:Object(j.jsx)("img",{src:n.avatar,width:30,height:30,alt:":("})}),Object(j.jsx)("td",{children:n.name}),e.props.showWins&&Object(j.jsxs)("td",{children:[Math.floor(100*v(n)),"% (",n.wins,"/",n.wins+n.loses,")"]}),Object(j.jsx)("td",{children:n.kills}),Object(j.jsx)("td",{children:n.dmgDealt}),Object(j.jsx)("td",{children:n.dmgReceived}),e.props.showDelete&&Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){return t(n.id)},className:"menu-button",children:"Delete"})})]},n.id)}))})]})}}]),n}(a.a.Component),x=(n(32),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACZSURBVDhP5ZDbDUBAEABVoAj1aFAZylCCFjTBxrG35tZ5hETiMj9ndyYomn54hP+Gxq5UMAK7IZuwYE3xQ5ABlgNOCJoLFOG1EIQMEHdDxXrcqwAx90ZWS68Q3/+0QyAyJEBwgSIchOb/uxz7HIrghATrpGA5wFDV1gHIii5A3IR0KYCEgAXrxhCWzrMJYXaJGMLgBh8M9cMEUUhNiMJglbgAAAAASUVORK5CYII="),k=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"openPNG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048;return new Promise((function(t,n){var i=document.createElement("div");i.innerHTML="<input type=\"file\" accept='.png'>";var a=i.firstChild;a.addEventListener("change",(function(){var i=a.files[0];if(i.size>e)return console.log("Maximal image size (".concat(e," bytes) exceeded: ").concat(i.size," bytes")),n("Maximal image size (".concat(e," bytes) exceeded: ").concat(i.size," bytes"));if(!i.name.toLowerCase().endsWith(".png"))return console.log("Unsupported image type. Please, use PNG image."),n("Unsupported image type. Please, use PNG image.");var s=new FileReader;s.onload=function(){var e=s.result;t(e)},s.readAsDataURL(i)})),a.click()}))}}]),e}(),O=(n(33),getComputedStyle(document.querySelector(":root"))),P=Number(O.getPropertyValue("--message-box-margin-num")),C=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"init",value:function(){var t=document.createElement("div");t.classList.add("message-box"),t.style.visibility="hidden",t.onmouseenter=function(){e.clearHideTimeout()},t.onmouseleave=function(){e.setHideTimeout()};var n=document.createElement("p");t.appendChild(n);var i=document.createElement("button");return i.innerText="\u2716",i.onclick=function(){e.hideBox()},t.appendChild(i),window.addEventListener("resize",(function(){e.moveBox()})),document.body.appendChild(t),t}},{key:"display",value:function(t,n){var i=e.box;i.firstElementChild.innerText=t,i.style.visibility="visible",i.classList.toggle("message-box-message",!n),i.classList.toggle("message-box-error",n),e.moveBox(),e.setHideTimeout()}},{key:"message",value:function(t){e.display(t,!1)}},{key:"error",value:function(t){e.display(t,!0)}}]),e}();C.hideTimeout=5e3,C.box=C.init(),C.hideIntervalId=void 0,C.setHideTimeout=function(){C.clearHideTimeout(),C.hideIntervalId=setTimeout(C.hideBox,C.hideTimeout)},C.clearHideTimeout=function(){clearTimeout(C.hideIntervalId)},C.hideBox=function(){C.box.style.visibility="hidden"},C.moveBox=function(){"visible"===C.box.style.visibility&&(C.box.style.width=document.body.clientWidth-2*P+"px")};var S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).handleNewPlayerNameChange=function(e){i.setState({newPlayerName:e.target.value})},i.handleAddNewPlayer=function(){var e=i.state.newPlayerName,t=i.state.avatar;i.setState({players:y.saveNewPlayer(e,t),newPlayerName:"",avatar:x})},i.handleDeletePlayer=function(e){i.setState({players:y.removePlayer(e)})},i.changeAvatar=function(){k.openPNG(2048).then((function(e){i.setState({avatar:e}),C.message("Avatar loaded successfully!")})).catch(C.error)},i.state={players:g(y.getStoredPlayers()),newPlayerName:"",avatar:x},i}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=""===this.state.newPlayerName||this.state.players.some((function(t){return t.name===e.state.newPlayerName}));return Object(j.jsxs)("section",{className:"stats-page",children:[Object(j.jsx)(b,{players:this.state.players,showWins:!0,showDelete:!0,onDelete:this.handleDeletePlayer}),Object(j.jsxs)("form",{children:[Object(j.jsx)("label",{htmlFor:"new-player-input",children:"New player:"}),Object(j.jsx)("input",{type:"text",id:"new-player-input",value:this.state.newPlayerName,placeholder:"fill your name",maxLength:20,spellCheck:!1,autoComplete:"off",onChange:this.handleNewPlayerNameChange}),Object(j.jsx)("button",{onClick:this.handleAddNewPlayer,className:"menu-button",disabled:t,children:"Create"}),Object(j.jsxs)("div",{onClick:this.changeAvatar,children:[Object(j.jsx)("img",{src:this.state.avatar,alt:"avatar"}),Object(j.jsxs)("span",{children:["Load your avatar (PNG, max ",2048," bytes)"]})]})]}),Object(j.jsx)(d.b,{className:"menu-button link",to:"/",children:"Back"})]})}}]),n}(a.a.Component),w=(n(39),function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"initBackgroundMusic",value:function(){var e=new Audio;return e.src="background_music.mp3",e.loop=!0,e.volume=.4,e}},{key:"shotSound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Audio;t.src="tank_fire.mp3",t.volume=e,console.log(t),t.play()}},{key:"explosionSound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Audio;t.src="explosion.mp3",t.volume=e,t.play()}},{key:"startBackgroundMusic",value:function(){e.backgroundMusicAudio.play()}},{key:"pauseBackgroundMusic",value:function(){e.backgroundMusicAudio.pause()}}]),e}());w.backgroundMusicAudio=w.initBackgroundMusic();n(40);var A=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).shootGrenade=function(e){if(void 0===i.state.timeouts[e]){var t=i.state.timeouts;t[e]=setTimeout((function(){return i.returnGrenade(e)}),5e3),w.shotSound(),i.setState({timeouts:t})}},i.returnGrenade=function(e){var t=i.state.timeouts;t[e]=void 0,i.setState({timeouts:t})},i.state={timeouts:[void 0,void 0,void 0,void 0]},i}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){this.state.timeouts.forEach((function(e){void 0!==e&&clearInterval(e)}))}},{key:"render",value:function(){var e=this,t=this.props.width?this.props.width:150,n=this.props.height?this.props.height:t/3,i=this.state.timeouts.map((function(e){return void 0===e?"":"ellipse-shot"}));return Object(j.jsxs)("svg",{width:"".concat(t,"px"),height:"".concat(n,"px"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 150 50",cursor:"default",children:[Object(j.jsxs)("g",{id:"t_top_grenade",onClick:function(){return e.shootGrenade(0)},children:[Object(j.jsx)("ellipse",{className:i[0],stroke:"#bfbf00",ry:"1.97183",rx:"12.25349",id:"svg_7",cy:"10.8451",cx:"16.61985",opacity:"undefined",strokeDasharray:"null",strokeWidth:"null",fill:"#bfbf00"}),Object(j.jsx)("rect",{stroke:"#a3a32a",strokeOpacity:"0",id:"svg_1",height:"5.63379",width:"18.8732",y:"8.02821",x:"18.45083",opacity:"undefined",fill:"#d1661f"})]}),Object(j.jsxs)("g",{transform:"rotate(90 22,26) ",id:"t_bottom_grenade",onClick:function(){return e.shootGrenade(1)},children:[Object(j.jsx)("ellipse",{className:i[1],stroke:"#bfbf00",ry:"1.97183",rx:"12.25349",id:"svg_9",cy:"25.6338",cx:"15.2114",opacity:"undefined",strokeDasharray:"null",strokeWidth:"null",fill:"#bfbf00"}),Object(j.jsx)("rect",{strokeOpacity:"0",id:"svg_10",height:"5.63379",width:"23.66192",y:"22.81691",x:"17.04238",opacity:"undefined",stroke:"#a3a32a",fill:"#d1661f"})]}),Object(j.jsx)("text",{id:"tanks_text",fontStyle:"normal",fontWeight:"bold",xmlSpace:"preserve",textAnchor:"start",fontFamily:"sans-serif",fontSize:"35",y:"43.80278",x:"26.47898",opacity:"undefined",strokeOpacity:"0",strokeDasharray:"null",strokeWidth:"0",stroke:"#a3a32a",fill:"#3f7f00",children:"anks"}),Object(j.jsxs)("g",{transform:"rotate(90 110,26)",id:"ii_first_grenade",onClick:function(){return e.shootGrenade(2)},children:[Object(j.jsx)("ellipse",{className:i[2],stroke:"#bfbf00",ry:"1.97183",rx:"12.25349",id:"svg_13",cy:"25.6338",cx:"103.38023",opacity:"undefined",strokeDasharray:"null",strokeWidth:"null",fill:"#bfbf00"}),Object(j.jsx)("rect",{strokeOpacity:"0",id:"svg_14",height:"5.63379",width:"23.66192",y:"22.81691",x:"105.21121",opacity:"undefined",stroke:"#a3a32a",fill:"#d1661f"})]}),Object(j.jsxs)("g",{transform:"rotate(90 118,26) ",id:"ii_second_grenade",onClick:function(){return e.shootGrenade(3)},children:[Object(j.jsx)("ellipse",{className:i[3],stroke:"#bfbf00",ry:"1.97183",rx:"12.25349",id:"svg_16",cy:"25.35211",cx:"111.12669",opacity:"undefined",strokeDasharray:"null",strokeWidth:"null",fill:"#bfbf00"}),Object(j.jsx)("rect",{strokeOpacity:"0",id:"svg_17",height:"5.63379",width:"23.66192",y:"22.53522",x:"112.95767",opacity:"undefined",stroke:"#a3a32a",fill:"#d1661f"})]}),Object(j.jsx)("text",{id:"d_text",fontStyle:"normal",fontWeight:"bold",xmlSpace:"preserve",textAnchor:"start",fontFamily:"sans-serif",fontSize:"35",y:"44.36616",x:"120.98582",opacity:"undefined",fillOpacity:"null",strokeOpacity:"0",strokeDasharray:"null",strokeWidth:"null",stroke:"#a3a32a",fill:"#d1661f",children:"D"})]})}}]),n}(a.a.Component);function I(){return"#"+Math.floor(16777216*Math.random()).toString(16).padStart(6,"0")}n(41);var M=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleNameChange=function(t){e.props.player.name=t.target.value,e.props.onPlayerChange(e.props.player)},e.handleColorChange=function(t){e.props.player.color=t.target.value,e.props.onPlayerChange(e.props.player)},e.handleStoredPlayerChange=function(t){var n=e.props.availableStoredPlayers.filter((function(e){return String(e.id)===t.target.value}))[0];e.props.onPlayerChange(m(n.id,n.name,""===n.color?I():n.color,n.avatar))},e.handleDragStart=function(t){t.dataTransfer.setData("text/plain",e.props.index)},e.handleDragOver=function(e){e.preventDefault()},e.handleDragDrop=function(t){var n=Number(t.dataTransfer.getData("text/plain"));isNaN(n)||e.props.onDragChange(n,e.props.index)},e}return Object(c.a)(n,[{key:"isQuick",value:function(){return void 0===this.props.availableStoredPlayers}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"add-player-menu",draggable:!0,onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDrop:this.handleDragDrop,children:[Object(j.jsxs)("header",{children:[Object(j.jsx)("img",{src:this.props.player.avatar,alt:":("}),Object(j.jsxs)("h4",{children:[this.isQuick()?"Quick":"Stored"," player ",this.props.index+1,":"]}),Object(j.jsx)("button",{onClick:this.props.onRemove,children:"\u2716"})]}),this.isQuick()?Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"name-input-player-"+this.props.index,children:"Name:"}),Object(j.jsx)("input",{type:"text",id:"name-input-player-"+this.props.index,value:this.props.player.name,onChange:this.handleNameChange,placeholder:"fill your name",spellCheck:!1,autoComplete:"off",maxLength:20})]}):Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"select-player-"+this.props.index,children:"Player:"}),Object(j.jsx)("select",{id:"select-player-"+this.props.index,value:this.props.player.id,onChange:this.handleStoredPlayerChange,children:this.props.availableStoredPlayers&&this.props.availableStoredPlayers.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"color-input-player-"+this.props.index,children:"Color:"}),Object(j.jsx)("input",{type:"color",id:"color-input-player-"+this.props.index,value:this.props.player.color,onChange:this.handleColorChange})]})]})}}]),n}(i.Component),E=(n(42),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).handleAddQuickPlayer=function(){var e=i.state.minUsedId-1;i.state.participants.push(m(e,"",I(),x)),i.setState({minUsedId:e})},i.handleAddStoredPlayer=function(){var e=i.state.availableStored.shift();i.state.participants.push(m(e.id,e.name,I(),e.avatar)),i.setState({})},i.handleRemovePlayer=function(e){var t=i.state.participants.splice(e,1);t[0].id>0&&i.state.availableStored.push(t[0]),i.setState({})},i.handlePlayerChange=function(e,t){var n=i.state.availableStored,a=i.state.participants[t];a.id>0&&(i.state.availableStored.push(a),n=i.state.availableStored.filter((function(t){return t.id!==e.id})));var s=i.state.participants;s[t]=e,i.setState({availableStored:n,participants:s})},i.handleDragChange=function(e,t){if(e>t){var n=i.state.participants.slice(0,t),a=i.state.participants.slice(t,e),s=i.state.participants[e],o=i.state.participants.slice(e+1),r=[].concat(Object(f.a)(n),[s],Object(f.a)(a),Object(f.a)(o));i.setState({participants:r})}else if(e<t){var c=i.state.participants.slice(0,e),l=i.state.participants[e],u=i.state.participants.slice(e+1,t+1),d=i.state.participants.slice(t+1),h=[].concat(Object(f.a)(c),Object(f.a)(u),[l],Object(f.a)(d));i.setState({participants:h})}},i.state={participants:[],availableStored:y.getStoredPlayers(),minUsedId:0},i}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state.participants.length<2,n=this.state.participants.some((function(e){return""===e.name}));return Object(j.jsxs)("section",{className:"new-game-page",children:[Object(j.jsx)("h3",{children:"New Game"}),this.state.participants.map((function(t,n){return Object(j.jsx)(M,{index:n,player:t,availableStoredPlayers:t.id<0?void 0:[t].concat(Object(f.a)(e.state.availableStored)),onPlayerChange:function(t){return e.handlePlayerChange(t,n)},onRemove:function(){return e.handleRemovePlayer(n)},onDragChange:e.handleDragChange},n)})),this.state.participants.length<4?Object(j.jsx)("button",{onClick:this.handleAddQuickPlayer,className:"menu-button",children:"Quick player"}):null,this.state.participants.length<4&&this.state.availableStored.length>0?Object(j.jsx)("button",{onClick:this.handleAddStoredPlayer,className:"menu-button",children:"Stored player"}):null,Object(j.jsxs)("div",{children:[Object(j.jsx)(d.b,{className:"menu-button link",to:"/",children:"Back"}),Object(j.jsxs)("button",{onClick:function(){return e.props.onSubmit(e.state.participants)},disabled:t||n,className:"menu-button",children:[!t&&!n&&Object(j.jsx)("span",{children:"Play"}),t&&Object(j.jsxs)("span",{children:["Please, add at least ",2," players"]}),n&&!t&&Object(j.jsx)("span",{children:"Please, fill all names"})]})]})]})}}]),n}(i.Component)),D=800,T=280,N=30,R=15,L=function(){function e(){Object(r.a)(this,e),this.color="",this.xPos=0,this.yPos=0}return Object(c.a)(e,[{key:"setColor",value:function(e){this.color=e}},{key:"getColor",value:function(){return this.color}},{key:"setXPos",value:function(e){this.xPos=e}},{key:"diffXPos",value:function(e){this.xPos+=e}},{key:"getXPos",value:function(){return this.xPos}},{key:"setYPos",value:function(e){this.yPos=e}},{key:"diffYPos",value:function(e){this.yPos+=e}},{key:"getYPos",value:function(){return this.yPos}}]),e}(),X=[[{r:1,color:"yellow"}],[{r:2,color:"yellow"}],[{r:3,color:"orange"},{r:2,color:"yellow"}],[{r:4,color:"red"},{r:3.5,color:"orange"},{r:2,color:"yellow"}],[{r:1,color:"orange"}]],B=X.length,G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i,a,s){var o;return Object(r.a)(this,n),(o=t.call(this)).animationRate=s,o.radius=void 0,o.t=void 0,o.xPos=e,o.yPos=i,o.radius=a/5,o.t=0,o}return Object(c.a)(n,[{key:"isAnimationOn",value:function(){return this.t<B}},{key:"show",value:function(e,t){var n=this;X[Math.floor(this.t)].forEach((function(i){return n.drawCircle(e,t,i)})),this.t+=this.animationRate}},{key:"drawCircle",value:function(e,t,n){e.beginPath(),e.arc(this.getXPos()*t,this.getYPos()*t,this.radius*n.r*t,0,2*Math.PI),e.fillStyle=n.color,e.fill()}}]),n}(L);function U(e,t){return(e%t+t)%t}function z(e,t,n,i){return a=e-n,s=t-i,Math.sqrt(Math.pow(a,2)+Math.pow(s,2));var a,s}var W=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(L),Y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i,a){var s;return Object(r.a)(this,n),(s=t.call(this)).animationOn=!1,s.squares=void 0,s.xCenter=void 0,s.animationTime=0,s.squares=a,s.xPos=e,s.xCenter=e+1.5,s.yPos=i,s}return Object(c.a)(n,[{key:"isAnimationOn",value:function(){return this.animationOn}},{key:"isSquareCollision",value:function(e,t,n){if(""!==e){var i=this.yPos-3*(t+.5);return z(this.xCenter,i,n.getXPos(),n.getYPos())<n.getRadius()+3}return!1}},{key:"squareCollide",value:function(e,t,n){if(""!==e){var i=this.yPos-3*(t+.5);z(this.xCenter,i,n.getXPos(),n.getYPos())<n.getExplosionRadius()/2+4.5&&(this.squares[t]="",this.animationOn=!0,this.animationTime=0)}}},{key:"checkConsistency",value:function(){for(;""===this.squares[this.squares.length-1];)this.squares.pop();this.animationOn=this.squares.some((function(e){return""===e}))}},{key:"animate",value:function(){if(this.isAnimationTime())for(var e=!1,t=0;t<this.squares.length;++t)""===this.squares[t]&&(e=!0),""!==this.squares[t]&&e&&(this.squares[t-1]=this.squares[t],this.squares[t]="");++this.animationTime}},{key:"isAnimationTime",value:function(){return 6===this.animationTime||10===this.animationTime||this.animationTime>=12}},{key:"isCollision",value:function(e){var t=this;return!(e.getXPos()+e.getRadius()<this.getXPos()||e.getXPos()-e.getRadius()>this.getXPos()+3)&&this.squares.some((function(n,i){return t.isSquareCollision(n,i,e)}))}},{key:"show",value:function(e,t){var n=this;this.animate(),this.squares.forEach((function(i,a){""!==i&&(e.fillStyle=i,e.fillRect(Math.ceil(n.xPos*t),Math.ceil((n.yPos-3*(a+1))*t),Math.ceil(3*t),Math.ceil(3*t)))})),this.checkConsistency()}},{key:"collide",value:function(e){var t=this;e.getXPos()+e.getExplosionRadius()<this.getXPos()||e.getXPos()-e.getExplosionRadius()>this.getXPos()+3||(this.squares.forEach((function(n,i){return t.squareCollide(n,i,e)})),this.checkConsistency())}},{key:"isEmpty",value:function(){return 0===this.squares.length}}]),n}(W),q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i,a){var s;return Object(r.a)(this,n),(s=t.call(this)).animationOn=!1,s.columns=void 0,s.columnsCount=void 0,s.highest=void 0,s.columns=a.map((function(t,n){return new Y(e+3*n,i,t)})),s.columnsCount=s.columns.length,s.xPos=e,s.yPos=i,s.highest=Math.max.apply(Math,Object(f.a)(a.map((function(e){return e.length})))),s}return Object(c.a)(n,[{key:"filterMarginColumns",value:function(){for(;this.columns.length>0&&this.columns[0].isEmpty();)this.columns.shift(),this.xPos+=3,this.columnsCount-=1;for(;this.columns.length>0&&this.columns[this.columns.length-1].isEmpty();)this.columns.pop(),this.columnsCount-=1}},{key:"isAnimationOn",value:function(){return this.animationOn}},{key:"getColumnsCount",value:function(){return this.columnsCount}},{key:"isCollision",value:function(e){return!(e.getXPos()+e.getRadius()<this.xPos||e.getXPos()-e.getRadius()>this.xPos+3*this.columnsCount||e.getYPos()+e.getRadius()<this.yPos-3*this.highest)&&this.columns.some((function(t){return t.isCollision(e)}))}},{key:"show",value:function(e,t){this.columns.forEach((function(n){return n.show(e,t)})),this.animationOn&&(this.animationOn=this.columns.some((function(e){return e.isAnimationOn()}))),this.filterMarginColumns()}},{key:"collide",value:function(e){e.getXPos()+e.getExplosionRadius()<this.getXPos()||e.getXPos()-e.getExplosionRadius()>this.getXPos()+3*this.getColumnsCount()||e.getYPos()+e.getExplosionRadius()<this.yPos-3*this.highest||(this.columns.forEach((function(t){return t.collide(e)})),this.animationOn=this.columns.some((function(e){return e.isAnimationOn()})))}}]),n}(W),_=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"random",value:function(t,n){var i=Object.getOwnPropertyNames(e.prototype).filter((function(e){return"random"!==e&&"constructor"!==e}));return this[i[Math.floor(Math.random()*i.length)]](t,n)}},{key:"house",value:function(e,t){var n=["#222222","#333333","#444444","#555555"],i=n[Math.floor(Math.random()*n.length)],a=["#8e350b","#ac552f"],s=a[Math.floor(Math.random()*a.length)],o="lightblue",r=["#981f1f","#ff0000"],c=r[Math.floor(Math.random()*r.length)],l=[[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c,c],[i,s,s,s,s,s,i,i,i,o,o,o,i,i,c,c,c],[i,s,s,s,s,s,i,i,i,o,o,o,i,i,c,c,c],[i,s,s,s,s,s,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,o,o,o,i,i,i,o,o,o,i,i,c,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c]];return new q(e-3*l.length/2,t,l)}},{key:"factory",value:function(e,t){var n=["#222222","#333333","#444444","#555555"],i=n[Math.floor(Math.random()*n.length)],a=["#8e350b","#ac552f","#000000"],s=a[Math.floor(Math.random()*a.length)],o="lightblue",r=["#981f1f","#ff0000"],c=r[Math.floor(Math.random()*r.length)],l="black",u=[[i,i,i,i,i,i,i,i,i,i,i,i,i,i],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,i,i,i,i,i,i,i,i,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[i,i,i,i,l,i,i,i,i,i,i,i,i,i,i,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,i,i,i,i,i,i,i,i,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[i,i,i,i,l,i,i,i,i,i,i,i,i,i,i,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,i,i,i,i,i,i,i,i,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,i,i,i,i,i,i,i,i,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,l,i,i,i,i,i,i,i,i,i,i,l,l,l],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i,l,l,l],[i,i,i,i,l,o,o,o,o,o,o,o,o,i,i],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,i],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c],[s,s,s,s,s,i,i,i,i,i,o,o,i,i,c,c],[s,s,s,s,s,s,i,i,i,i,o,o,i,i,c,c,c],[s,s,s,s,s,s,s,i,i,i,i,i,i,i,c,c,c],[s,s,s,s,s,s,s,i,i,i,o,o,i,i,c,c,c],[s,s,s,s,s,s,s,i,i,i,o,o,i,i,c,c,c],[s,s,s,s,s,s,i,i,i,i,i,i,i,i,c,c,c],[s,s,s,s,s,i,i,i,i,i,o,o,i,i,c,c,c],[i,i,i,i,i,i,i,i,i,i,o,o,i,i,c,c,c],[s,s,s,s,s,i,i,i,i,i,i,i,i,i,c,c,c],[s,s,s,s,s,i,i,i,i,i,o,o,i,i,c,c,c],[s,s,s,s,s,i,i,i,i,i,o,o,i,i,c,c],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,c]];return new q(e-3*u.length/2,t,u)}}]),e}();var F,H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,n),(a=t.call(this)).originId=e,a.angleErr=s,a.exploded=!1,a.t=0,a.radius=void 0,a.speed=void 0,a.explosionRadius=void 0,a.damage=void 0,a.mass=void 0,a.xInit=0,a.yInit=0,a.angleCos=0,a.angleSin=0,a.windXDiff=0,a.radius=i.radius,a.speed=i.speed,a.explosionRadius=i.explosionRadius,a.damage=i.damage,a.mass=i.mass,a.color="black",a}return Object(c.a)(n,[{key:"getXPos",value:function(){return this.xPos+this.windXDiff}},{key:"getOriginId",value:function(){return this.originId}},{key:"getRadius",value:function(){return this.radius}},{key:"getSpeed",value:function(){return this.speed}},{key:"getExplosionRadius",value:function(){return this.explosionRadius}},{key:"getDamage",value:function(){return this.damage}},{key:"getMass",value:function(){return this.mass}},{key:"isExploded",value:function(){return this.exploded}},{key:"explode",value:function(){w.explosionSound(this.damage/Z),this.exploded=!0}},{key:"launch",value:function(e,t,n,i){this.xInit=e,this.yInit=t,this.speed*=i/10,(n+=this.angleErr)<0?(n+=90,this.angleCos=-Math.cos(n*Math.PI/180)):(n=90-n,this.angleCos=Math.cos(n*Math.PI/180)),this.angleSin=Math.sin(n*Math.PI/180),this.xPos=e,this.yPos=t,this.windXDiff=0}},{key:"move",value:function(e,t){this.t+=t/16;var n=this.xPos,i=this.yPos;this.xPos=this.xInit+this.speed*this.t*this.angleCos,this.yPos=this.yInit-this.speed*this.t*this.angleSin+Math.pow(this.t,2)/20;var a=z(n,i,this.xPos,this.yPos)+10;this.windXDiff+=e*Math.log(this.t)/(a*this.mass)}},{key:"show",value:function(e,t){e.beginPath(),e.arc(this.getXPos()*t,this.getYPos()*t,this.getRadius()*t,0,2*Math.PI),e.fillStyle=this.color,e.fill()}},{key:"isInRange",value:function(e,t,n,i){return this.getXPos()+this.getRadius()>e&&this.getXPos()-this.getRadius()<n&&this.getYPos()+this.getRadius()>t&&this.getYPos()-this.getRadius()<i}},{key:"canReturnToRange",value:function(e,t,n){return!(this.yPos>n)&&(!(this.xPos<e&&this.windXDiff<0)&&!(this.xPos>t&&this.windXDiff>0))}}]),n}(L);!function(e){e[e.STANDARD=0]="STANDARD",e[e.BIG=1]="BIG",e[e.MULTI=2]="MULTI",e[e.TOTAL_COUNT=3]="TOTAL_COUNT"}(F||(F={}));var Q,J=[{name:"Standard",description:"Standard ammo",radius:2,speed:1,explosionRadius:25,damage:11,mass:5},{name:"Big",description:"Short range, big dmg",radius:3,speed:.5,explosionRadius:35,damage:23,mass:15},{name:"Multi",description:"5 shots at once",radius:1,speed:.8,explosionRadius:23,damage:5,mass:5}],K=J.map((function(e){return e.description+"\nDamage: "+e.damage+"\nSpeed coefficient: "+e.speed+"\nExplosion: "+e.explosionRadius})),V=[-11,-9,-7,-5,-3,0,3,5,7,9,11],Z=Math.max.apply(Math,Object(f.a)(J.map((function(e){return e.damage})))),$=function(){function e(t,n){Object(r.a)(this,e),this.projectiles=void 0,this.curIndex=void 0,this.projectiles=[1/0,t,n],this.curIndex=0}return Object(c.a)(e,[{key:"getProjectile",value:function(e){return this.curIndex===F.BIG?(0===--this.projectiles[this.curIndex]&&this.loadNext(),[new H(e,J[F.BIG])]):this.curIndex===F.MULTI?(0===--this.projectiles[this.curIndex]&&this.loadNext(),function(e,t){for(var n,i,a=e.slice(0),s=e.length,o=s-t;s-- >o;)n=a[i=Math.floor((s+1)*Math.random())],a[i]=a[s],a[s]=n;return a.slice(o)}(V,5).map((function(t){return new H(e,J[F.MULTI],t)}))):[new H(e,J[F.STANDARD])]}},{key:"getCurrentProjectileShortStats",value:function(){return this.curIndex===F.STANDARD?J[this.curIndex].name:"".concat(J[this.curIndex].name," (").concat(this.projectiles[this.curIndex],")")}},{key:"getCurrentProjectileLongStats",value:function(){return K[this.curIndex]}},{key:"loadNext",value:function(){this.curIndex=U(this.curIndex+1,F.TOTAL_COUNT),0===this.projectiles[this.curIndex]&&this.loadNext()}},{key:"loadPrev",value:function(){this.curIndex=U(this.curIndex-1,F.TOTAL_COUNT),0===this.projectiles[this.curIndex]&&this.loadPrev()}}]),e}(),ee=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this)).player=void 0,i.health=20,i.gunAngle=0,i.magazine=new $(3,3),i.lastLaunchSpeed=50,i.player=e,i.setColor(e.color),i}return Object(c.a)(n,[{key:"getPlayer",value:function(){return this.player}},{key:"getId",value:function(){return this.player.id}},{key:"getName",value:function(){return this.player.name}},{key:"receiveDamage",value:function(e){return this.health-=e,this.player.dmgReceived+=e,this.health<=0&&(this.health=0,!0)}},{key:"getHealth",value:function(){return this.health}},{key:"isAlive",value:function(){return this.health>0}},{key:"changeDamageDealt",value:function(e){this.player.dmgDealt+=e}},{key:"getDamageDealt",value:function(){return this.player.dmgDealt}},{key:"addKill",value:function(){this.player.kills+=1}},{key:"getKills",value:function(){return this.player.kills}},{key:"getLastLaunchSpeed",value:function(){return this.lastLaunchSpeed}},{key:"moveGun",value:function(e){this.gunAngle+=e,this.gunAngle<-90?this.gunAngle=-90:this.gunAngle>90&&(this.gunAngle=90)}},{key:"fire",value:function(e){var t=this;this.lastLaunchSpeed=e;var n=this.magazine.getProjectile(this.player.id);return n.forEach((function(n){return n.launch(t.xGunEnd(),t.yGunEnd(),t.gunAngle,e)})),n}},{key:"loadNextProjectile",value:function(){this.magazine.loadNext()}},{key:"loadPrevProjectile",value:function(){this.magazine.loadPrev()}},{key:"getCurrentProjectileShortStats",value:function(){return this.magazine.getCurrentProjectileShortStats()}},{key:"getCurrentProjectileLongStats",value:function(){return this.magazine.getCurrentProjectileLongStats()}},{key:"isCollision",value:function(e){return e.getYPos()+e.getRadius()>this.getYPos()-R&&e.getYPos()-e.getRadius()<this.getYPos()&&e.getXPos()+e.getRadius()>this.getXPos()&&e.getXPos()-e.getRadius()<this.getXPos()+N}},{key:"show",value:function(e,t){e.beginPath(),e.lineWidth=4*t,e.save(),e.translate((this.xPos+15)*t,(this.yPos-R)*t),e.rotate(this.gunAngle*Math.PI/180),e.moveTo(0,5),e.lineTo(0,-15*t),e.stroke(),e.rotate(-this.gunAngle),e.restore(),e.fillStyle=this.color,e.fillRect(this.xPos*t,(this.yPos-R)*t,N*t,R*t)}},{key:"xGunEnd",value:function(){return this.xPos+15+15*Math.sin(this.gunAngle*Math.PI/180)*1.1}},{key:"yGunEnd",value:function(){return this.yPos-R-15*Math.cos(this.gunAngle*Math.PI/180)*1.1}}]),n}(W),te=n.p+"static/media/logo.832d76fd.svg",ne=(n(43),n(44),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.tank.getHealth(),t=e<=0?{color:"grey"}:{},n=e<20?{color:"red"}:{};return Object(j.jsxs)("div",{className:"tank-stats",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{style:t,children:this.props.tank.getName()}),Object(j.jsx)("span",{style:n,children:"".concat(e," HP")})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"".concat(this.props.tank.getDamageDealt()," damage")}),Object(j.jsx)("span",{children:"".concat(this.props.tank.getKills()," kills")})]})]})}}]),n}(i.Component)),ie=[[{o:!1,i:0},{o:!0,i:0},{o:!0,i:1},{o:!1,i:1}],[{o:!1,i:0},{o:!0,i:0},{o:!1,i:1},{o:!0,i:1},{o:!1,i:2}],[{o:!1,i:0},{o:!0,i:0},{o:!1,i:1},{o:!0,i:1},{o:!1,i:2},{o:!0,i:2},{o:!1,i:3}]],ae=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).canvas=void 0,i.ctx=void 0,i.sizeRatio=void 0,i.footer=void 0,i.roundPlayerInfoDiv=void 0,i.windDiv=void 0,i.ammoShortInfo=void 0,i.ammoLongInfo=void 0,i.launchSpeedInput=void 0,i.curTankIdx=0,i.movement=0,i.gunMovement=0,i.fireClicked=!1,i.projectiles=[],i.obstacles=[],i.explosions=[],i.wind=i.initWind(),i.round=1,i.lastUpdateTime=0,i.update=function(){var e=Date.now(),t=e-i.lastUpdateTime;i.lastUpdateTime=e,i.ctx.clearRect(0,0,i.canvas.width,T*i.sizeRatio),i.ctx.fillStyle="#189b18",i.ctx.fillRect(0,T*i.sizeRatio,i.canvas.width,40*i.sizeRatio),i.moveTank(t),i.curTank().moveGun(i.gunMovement*t);var n=i.projectiles.length>0;i.projectiles.forEach((function(e){return e.move(i.wind,t)})),i.projectiles.forEach((function(e){return i.collide(e)})),i.projectiles=i.projectiles.filter((function(e){return e.canReturnToRange(0,D,320)&&!e.isExploded()})),i.obstacles=i.obstacles.filter((function(e){return e.getColumnsCount()>0})),i.explosions=i.explosions.filter((function(e){return e.isAnimationOn()})),i.state.tanks.forEach((function(e){e.getHealth()<=0&&(e.setXPos(1600),e.setYPos(640))}));var a=i.obstacles.some((function(e){return e.isAnimationOn()}))||i.explosions.some((function(e){return e.isAnimationOn()}));i.projectiles.forEach((function(e){return e.show(i.ctx,i.sizeRatio)})),i.state.tanks.forEach((function(e){return e.show(i.ctx,i.sizeRatio)})),i.obstacles.forEach((function(e){return e.show(i.ctx,i.sizeRatio)})),i.explosions.forEach((function(e){return e.show(i.ctx,i.sizeRatio)}));var s=i.obstacles.some((function(e){return e.isAnimationOn()}))||i.explosions.some((function(e){return e.isAnimationOn()})),o=!0;i.fireClicked?i.fire():!s&&i.state.tanks.filter((function(e){return e.isAlive()})).length<2?(i.endGame(),o=!1):(0===i.projectiles.length&&n&&!s||!s&&a&&0===i.projectiles.length)&&i.nextRound(),o&&requestAnimationFrame(i.update)},i.fire=function(){var e;(e=i.projectiles).push.apply(e,Object(f.a)(i.curTank().fire(Number(i.launchSpeedInput.value)))),i.updateAmmoInfo(),i.fireClicked=!1,i.disableButtons(!0),w.shotSound()},i.nextRound=function(){i.disableButtons(!1);var e=i.curTankIdx;for(i.curTankIdx=(i.curTankIdx+1)%i.state.tanks.length;!i.curTank().isAlive();)i.curTankIdx=(i.curTankIdx+1)%i.state.tanks.length;i.curTankIdx<e&&++i.round,i.roundPlayerInfoDiv.innerText="Round: ".concat(i.round," - Player: ").concat(i.curTank().getName()),i.updateAmmoInfo(),i.launchSpeedInput.value=String(i.curTank().getLastLaunchSpeed()),i.wind+=4*Math.random()-2,i.windDiv.innerText=i.formatWind()},i.disableButtons=function(e){Object(f.a)(i.footer.getElementsByTagName("button")).forEach((function(t){t.disabled=e}))},i.collide=function(e){(e.getYPos()+e.getRadius()>T||i.state.tanks.some((function(t){return t.isCollision(e)}))||i.obstacles.some((function(t){return t.isCollision(e)})))&&i.explode(e)},i.explode=function(e){e.explode();var t=i.state.tanks.find((function(t){return t.getId()===e.getOriginId()}));i.state.tanks.forEach((function(n){n.isAlive()&&function(e,t){return z(e.getXPos()+15,e.getYPos()-7.5,t.getXPos(),t.getYPos())}(n,e)<e.getExplosionRadius()&&(n.receiveDamage(e.getDamage())&&(i.explosions.push(new G(n.getXPos()+15,n.getYPos(),50,.2)),t.getId()!==n.getId()&&t.addKill()),t.getId()!==n.getId()&&t.changeDamageDealt(e.getDamage()),i.setState({}))})),i.obstacles.forEach((function(t){return t.collide(e)})),i.explosions.push(new G(e.getXPos(),e.getYPos(),e.getExplosionRadius(),.5))},i.endGame=function(){var e=i.state.tanks.map((function(e){return e.getPlayer()})),t=i.state.tanks.find((function(e){return e.isAlive()})),n=NaN;void 0!==t&&(n=t.getId()),e.forEach((function(e){e.id!==n?e.loses=1:e.wins=1})),i.props.onEnd(e)},i.updateAmmoInfo=function(){i.ammoShortInfo.innerText=i.curTank().getCurrentProjectileShortStats(),i.ammoLongInfo.innerText=i.curTank().getCurrentProjectileLongStats()},i.state={tanks:i.props.players.map((function(e){return new ee(e)}))},i}return Object(c.a)(n,[{key:"curTank",value:function(){return this.state.tanks[this.curTankIdx]}},{key:"moveTank",value:function(e){var t=this,n=this.curTank();if(0!==this.movement){var i=this.movement*e,a=n.getXPos()+i,s=n.getXPos()+N+i;this.state.tanks.filter((function(e,n){return n!==t.curTankIdx})).every((function(e){var t=e.getXPos(),n=e.getXPos()+N;return s<=t||a>=n}))&&this.obstacles.every((function(e){var t=e.getXPos(),n=e.getXPos()+3*e.getColumnsCount();return s<=t||a>=n}))&&a>=0&&s<D&&this.curTank().diffXPos(i)}}},{key:"initWind",value:function(){return 100*Math.random()-50}},{key:"formatWind",value:function(){var e=String(Math.abs(Math.round(this.wind)));return this.wind<-30?e="<<< "+e:this.wind<-15?e="<< "+e:this.wind<0?e="< "+e:this.wind>30?e+=" >>>":this.wind>15?e+=" >>":this.wind>0&&(e+=" >"),"Wind: "+e}},{key:"createButton",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=document.createElement("button");return i.textContent=e,i.onmousedown=t,i.onmouseup=n,i.onmouseleave=n,i.ontouchstart=t,i.ontouchend=n,i.ontouchcancel=n,i}},{key:"createSpan",value:function(e){var t=document.createElement("span");return t.innerText=e,t}},{key:"createInfoDiv",value:function(){var e=document.createElement("div");e.classList.add("info-div");var t=document.createElement("img");return t.src=te,t.alt="Tanks2D",e.appendChild(t),this.roundPlayerInfoDiv=document.createElement("div"),this.roundPlayerInfoDiv.innerText="Round: ".concat(this.round," - Player: ").concat(this.curTank().getName()),e.appendChild(this.roundPlayerInfoDiv),e}},{key:"createMoveGunDiv",value:function(){var e=this,t=document.createElement("div");t.classList.add("move-gun-div"),this.windDiv=document.createElement("div"),this.windDiv.innerText=this.formatWind(),t.appendChild(this.windDiv);var n=document.createElement("div");n.classList.add("move-div"),n.appendChild(this.createButton("\u25c0",(function(){return e.movement=-.06}),(function(){return e.movement=0}))),n.appendChild(this.createSpan(" MOVE ")),n.appendChild(this.createButton("\u25ba",(function(){return e.movement=.06}),(function(){return e.movement=0}))),t.appendChild(n);var i=document.createElement("div");return i.classList.add("gun-div"),i.appendChild(this.createButton("\u25c0",(function(){return e.gunMovement=-.1}),(function(){return e.gunMovement=0}))),i.appendChild(this.createSpan(" GUN ")),i.appendChild(this.createButton("\u25ba",(function(){return e.gunMovement=.1}),(function(){return e.gunMovement=0}))),t.appendChild(i),t}},{key:"createAmmoFireDiv",value:function(){var e=this,t=document.createElement("div");t.classList.add("ammo-fire-div");var n=document.createElement("div");n.classList.add("ammo-div"),n.appendChild(this.createButton("\u25c0",(function(){e.curTank().loadPrevProjectile(),e.updateAmmoInfo()})));var i=document.createElement("div");i.classList.add("ammo-info-div"),this.ammoShortInfo=this.createSpan(this.curTank().getCurrentProjectileShortStats()),this.ammoShortInfo.classList.add("short-info-span"),this.ammoLongInfo=this.createSpan(this.curTank().getCurrentProjectileLongStats()),this.ammoLongInfo.classList.add("long-info-span"),i.appendChild(this.ammoShortInfo),i.appendChild(this.ammoLongInfo),n.appendChild(i),n.appendChild(this.createButton("\u25ba",(function(){e.curTank().loadNextProjectile(),e.updateAmmoInfo()}))),t.appendChild(n),this.launchSpeedInput=document.createElement("input"),this.launchSpeedInput.type="range",this.launchSpeedInput.min="10",this.launchSpeedInput.max="100",this.launchSpeedInput.value="50",t.appendChild(this.launchSpeedInput);var a=document.createElement("div");return a.classList.add("fire-div"),a.appendChild(this.createButton("Fire!",(function(){return e.fireClicked=!0}))),t.appendChild(a),t}},{key:"computeSize",value:function(){var e,t=(e=.9*window.innerWidth,100*Math.floor(e/100));t=t>1400?1400:t,this.sizeRatio=t/D,console.log("ratio: "+this.sizeRatio),this.canvas.width=t,this.canvas.height=t/2.5}},{key:"initPositions",value:function(){var e=this,t=ie[this.state.tanks.length-2],n=D/t.length,i=new _;t.forEach((function(t,a){t.o?e.obstacles.push(i.random(n*(a+.5),T)):(e.state.tanks[t.i].setXPos(n*(a+.5)-15),e.state.tanks[t.i].setYPos(T))}))}},{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("game-area");window.addEventListener("resize",(function(){return e.computeSize()})),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d");var n=document.createElement("div");n.classList.add("canvas-container"),n.appendChild(this.canvas),this.computeSize(),this.initPositions(),this.footer=document.createElement("footer"),this.footer.appendChild(this.createInfoDiv()),this.footer.appendChild(this.createMoveGunDiv()),this.footer.appendChild(this.createAmmoFireDiv()),t.insertAdjacentElement("afterbegin",this.footer),t.insertAdjacentElement("afterbegin",n),this.lastUpdateTime=Date.now(),requestAnimationFrame(this.update)}},{key:"render",value:function(){return Object(j.jsx)("section",{id:"game-area",className:"game-area",children:Object(j.jsx)("div",{className:"tank-stats-container",children:this.state.tanks.map((function(e,t){return Object(j.jsx)(ne,{tank:e},t)}))})})}}]),n}(i.Component),se=(n(45),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=g(this.props.players);return Object(j.jsxs)("section",{className:"result-page",children:[Object(j.jsx)(b,{players:e,showWins:!1,showDelete:!1}),Object(j.jsx)(d.b,{className:"menu-button link",to:"/",children:"Back"})]})}}]),n}(i.Component));!function(e){e[e.NEW_GAME=0]="NEW_GAME",e[e.GAME=1]="GAME",e[e.RESULTS=2]="RESULTS"}(Q||(Q={}));var oe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).renderNewGamePage=function(){return Object(j.jsx)(E,{onSubmit:function(e){return i.setState({phase:Q.GAME,currentPlayers:e})}})},i.renderGame=function(){return Object(j.jsx)(ae,{players:i.state.currentPlayers,onEnd:function(e){e.forEach((function(e){return y.updatePlayer(e)})),i.setState({phase:Q.RESULTS,currentPlayers:e})}})},i.renderResults=function(){return Object(j.jsx)(se,{players:i.state.currentPlayers})},i.state={phase:Q.NEW_GAME,currentPlayers:[]},i}return Object(c.a)(n,[{key:"render",value:function(){return Object(j.jsxs)(j.Fragment,{children:[this.state.phase===Q.NEW_GAME&&this.renderNewGamePage(),this.state.phase===Q.GAME&&this.renderGame(),this.state.phase===Q.RESULTS&&this.renderResults()]})}}]),n}(a.a.Component),re=(n(46),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("section",{className:"home-page",children:[Object(j.jsx)(d.b,{className:"menu-button link",to:"/play",children:"New game"}),Object(j.jsx)(d.b,{className:"menu-button link",to:"/stats",children:"Statistics"})]})}}]),n}(i.Component)),ce=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).toggleBackgroundMusic=function(){var e=!i.state.backgroundMusic;i.setState({backgroundMusic:e}),e?w.startBackgroundMusic():w.pauseBackgroundMusic()},i.renderHeader=function(){var e=i.state.online?"online":"offline";return Object(j.jsxs)("header",{children:[Object(j.jsx)(A,{width:300}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:i.toggleBackgroundMusic,className:"menu-button",children:"Music "+(i.state.backgroundMusic?"on":"off")}),Object(j.jsx)("div",{className:"online-point "+e,children:Object(j.jsx)("span",{children:e})})]})]})},i.state={backgroundMusic:!1,online:navigator.onLine},window.addEventListener("online",(function(){return i.setState({online:!0})})),window.addEventListener("offline",(function(){return i.setState({online:!1})})),i}return Object(c.a)(n,[{key:"render",value:function(){return Object(j.jsx)(d.a,{children:Object(j.jsxs)("main",{children:[this.renderHeader(),Object(j.jsxs)(h.c,{children:[Object(j.jsx)(h.a,{path:"/stats",children:Object(j.jsx)(S,{})}),Object(j.jsx)(h.a,{path:"/play",children:Object(j.jsx)(oe,{})}),Object(j.jsx)(h.a,{path:"/",children:Object(j.jsx)(re,{})})]})]})})}}]),n}(i.Component),le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),s(e),o(e)}))};o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(ce,{})}),document.getElementById("root")),le()}},[[47,1,2]]]);
//# sourceMappingURL=main.ccefe296.chunk.js.map