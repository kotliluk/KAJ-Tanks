{"version":3,"sources":["player/playerStats.ts","player/playerStorage.ts","components/screens/playerTable.tsx","assets/imgs/default_avatar.png","utils/fileDialog.ts","components/messageBox.ts","components/screens/statsPage.tsx","utils/audioPlayer.ts","components/logo.tsx","utils/color.ts","components/screens/addPlayerMenu.tsx","components/screens/newGamePage.tsx","constants/constants.ts","game_objects/gameObject.ts","game_objects/explosion.ts","utils/math.ts","game_objects/colidingObject.ts","game_objects/squaredObstacle.ts","game_objects/obstacleFactory.ts","game_objects/magazine.ts","game_objects/projectile.ts","components/screens/playWrapper.tsx","utils/array.ts","game_objects/tank.ts","assets/imgs/logo.svg","components/game/tankStats.tsx","components/game/gameArea.tsx","game_objects/gameUtils.ts","components/screens/resultsPage.tsx","components/screens/homePage.tsx","components/tankGame.tsx","reportWebVitals.ts","index.tsx"],"names":["newEmptyPlayer","id","name","color","avatar","wins","loses","dmgDealt","dmgReceived","kills","winRatio","player","games","sortPlayers","players","sort","a","b","aRatio","bRatio","PlayerStorage","storageSupported","saved","localStorage","getItem","JSON","parse","console","warn","setItem","stringify","maxId","push","persist","filter","p","update","Storage","initPlayers","map","reduce","prev","cur","Math","max","PlayerTable","handleDelete","this","props","onDelete","className","showWins","showDelete","i","src","width","height","alt","floor","onClick","React","Component","FileDialog","maxBs","Promise","resolve","reject","element","document","createElement","innerHTML","fileInput","firstChild","addEventListener","file","files","size","log","toLowerCase","endsWith","reader","FileReader","onload","url","result","readAsDataURL","click","cssConstants","getComputedStyle","querySelector","boxMargin","Number","getPropertyValue","MessageBox","box","classList","add","style","visibility","onmouseenter","clearHideTimeout","onmouseleave","setHideTimeout","paragraph","appendChild","button","innerText","onclick","hideBox","window","moveBox","body","msg","error","firstElementChild","toggle","display","hideTimeout","init","hideIntervalId","setTimeout","clearTimeout","clientWidth","StatsPage","handleNewPlayerNameChange","event","setState","newPlayerName","target","value","handleAddNewPlayer","state","saveNewPlayer","defaultAvatar","handleDeletePlayer","removePlayer","changeAvatar","openPNG","then","img","message","catch","getStoredPlayers","disabled","some","htmlFor","type","placeholder","maxLength","spellCheck","autoComplete","onChange","to","AudioPlayer","Audio","loop","volume","play","backgroundMusicAudio","pause","initBackgroundMusic","Logo","shootGrenade","undefined","timeouts","returnGrenade","shotSound","forEach","t","clearInterval","w","h","classes","xmlns","viewBox","cursor","stroke","ry","rx","cy","cx","opacity","strokeDasharray","strokeWidth","fill","strokeOpacity","y","x","transform","fontStyle","fontWeight","xmlSpace","textAnchor","fontFamily","fontSize","fillOpacity","randomRGB","random","toString","padStart","AddPlayerMenu","handleNameChange","onPlayerChange","handleColorChange","handleStoredPlayerChange","availableStoredPlayers","String","handleDragStart","e","dataTransfer","setData","index","handleDragOver","preventDefault","handleDragDrop","from","getData","isNaN","onDragChange","draggable","onDragStart","onDragOver","onDrop","isQuick","onRemove","NewGamePage","handleAddQuickPlayer","minUsedId","participants","handleAddStoredPlayer","availableStored","shift","handleRemovePlayer","deleted","splice","handlePlayerChange","available","previous","handleDragChange","before","slice","moved","fromValue","after","newArray","playersCountError","length","nameError","onSubmit","BASE_CANVAS_WIDTH","BASE_GROUND_START","BASE_TANK_WIDTH","BASE_TANK_HEIGHT","GameObject","xPos","yPos","xDif","yDif","animationSteps","r","animationLen","Explosion","radius","animationRate","ctx","ratio","c","drawCircle","circle","beginPath","arc","getXPos","getYPos","PI","fillStyle","mod","n","m","euclideanDistance","xA","yA","xB","yB","sqrt","ColidingObject","SquaredObstacleColumn","squares","animationOn","xCenter","animationTime","OBSTACLE_PART_SIZE","s","yCenter","getRadius","getExplosionRadius","pop","isAnimationTime","falseFound","isSquareCollision","animate","fillRect","ceil","checkConsistency","squareCollide","SquaredObstacle","columns","columnsCount","highest","isEmpty","isCollision","show","col","isAnimationOn","filterMarginColumns","getColumnsCount","collide","ObstacleFactory","xLeft","yBottom","methods","Object","getOwnPropertyNames","prototype","walls","doors","d","g","roofs","ProjIndex","Projectile","originId","stats","angleErr","exploded","speed","explosionRadius","damage","mass","xInit","yInit","angleCos","angleSin","windXDiff","explosionSound","LARGEST_PROJ_DMG","angle","cos","sin","wind","dt","xPrev","yPrev","diff","minX","minY","maxX","maxY","PlayingPhase","PROJ_INFOS","description","PROJ_DESCRIPTIONS","info","MULTI_ANGLE_ERRORS","Magazine","big","multi","projectiles","curIndex","Infinity","playerId","BIG","loadNext","MULTI","arr","temp","shuffled","min","getRandomSubarray","ae","STANDARD","TOTAL_COUNT","loadPrev","Tank","health","gunAngle","magazine","lastLaunchSpeed","setColor","dmg","angleDif","getProjectile","launch","xGunEnd","yGunEnd","getCurrentProjectileShortStats","getCurrentProjectileLongStats","lineWidth","save","translate","rotate","moveTo","lineTo","restore","TankStats","tank","getHealth","nameStyle","hpStyle","getName","getDamageDealt","getKills","initPositions","o","GameArea","canvas","sizeRatio","footer","roundPlayerInfoDiv","windDiv","ammoShortInfo","ammoLongInfo","launchSpeedInput","curTankIdx","movement","gunMovement","fireClicked","obstacles","explosions","initWind","round","lastUpdateTime","Date","now","clearRect","BASE_CANVAS_HEIGHT","moveTank","curTank","moveGun","wereProjectiles","move","canReturnToRange","isExploded","tanks","setXPos","setYPos","wasAnimation","isAnimation","gameInProgress","fire","isAlive","endGame","nextRound","requestAnimationFrame","updateAmmoInfo","disableButtons","beforeIdx","getLastLaunchSpeed","formatWind","disable","getElementsByTagName","explode","proj","originTank","find","getId","getOriginId","centerDistance","receiveDamage","getDamage","addKill","changeDamageDealt","getPlayer","winner","winnerId","NaN","onEnd","newLeft","newRight","_","every","tankLeft","tankRight","obstacleLeft","obstacleRight","diffXPos","strWind","abs","text","onTrigger","onReset","textContent","onmousedown","onmouseup","ontouchstart","ontouchend","ontouchcancel","span","div","logoImg","logo","moveGunDiv","movementDiv","createButton","createSpan","gunDiv","ammoFire","ammoDiv","loadPrevProjectile","ammoInfoDiv","loadNextProjectile","fireDiv","windowWidth","innerWidth","positions","distance","obstacleFactory","pos","gameArea","getElementById","computeSize","getContext","canvasContainer","createInfoDiv","createMoveGunDiv","createAmmoFireDiv","insertAdjacentElement","ResultsPage","PlayWrapper","renderNewGamePage","phase","GAME","currentPlayers","renderGame","updatePlayer","RESULTS","renderResults","NEW_GAME","HomePage","TankGame","toggleBackgroundMusic","newState","backgroundMusic","startBackgroundMusic","pauseBackgroundMusic","renderHeader","onlineString","online","navigator","onLine","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":";udAmBO,SAASA,EACdC,EACAC,GAGc,IAFdC,EAEa,uDAFG,GAChBC,EACa,uDADI,GAEjB,MAAO,CACLH,GAAIA,EACJC,KAAMA,EACNC,MAAOA,EACPC,OAAQA,EACRC,KAAM,EACNC,MAAO,EACPC,SAAU,EACVC,YAAa,EACbC,MAAO,GAOJ,SAASC,EAASC,GACvB,IAAMC,EAAQD,EAAON,KAAOM,EAAOL,MACnC,OAAiB,IAAVM,EAAc,EAAID,EAAON,KAAOO,EAMlC,SAASC,EAAYC,GAY1B,OAXAA,EAAQC,MAAK,SAACC,EAAGC,GACf,IAAMC,EAASR,EAASM,GAClBG,EAAST,EAASO,GACxB,OAAIC,EAASC,GACH,EAEND,EAASC,EACJ,EAES,GAAVF,EAAER,MAAaQ,EAAEV,SAAWU,EAAET,aAA0B,GAAVQ,EAAEP,MAAaO,EAAET,SAAWS,EAAER,gBAE/EM,ECxDF,IAKMM,EAAb,gGAYE,WACE,GAAIA,EAAcC,iBAAkB,CAClC,IAAMC,EAAQC,aAAaC,QAAQ,WACnC,OAAc,OAAVF,EACK,GAEFG,KAAKC,MAAMJ,GAGlB,OADAK,QAAQC,KAAK,gCACN,KArBb,qBA4BE,WACEL,aAAaM,QAAQ,UAAWJ,KAAKK,UAAUV,EAAcN,YA7BjE,yBAmCE,WACE,OAAOM,EAAcC,mBApCzB,8BA0CE,WACE,OAAID,EAAcC,iBACT,YAAID,EAAcN,SAEpB,KA9CX,2BAoDE,SAA4BZ,EAAcE,GACxC,OAAIgB,EAAcC,kBAChBD,EAAcW,OAAS,EACvBX,EAAcN,QAAQkB,KAAKhC,EAAeoB,EAAcW,MAAO7B,EAAM,GAAIE,IACzEgB,EAAca,UACPb,EAAcN,SAEhB,KA3DX,0BAiEE,SAA2Bb,GACzB,OAAImB,EAAcC,kBAChBD,EAAcN,QAAUM,EAAcN,QAAQoB,QAAO,SAAAC,GAAC,OAAIA,EAAElC,KAAOA,KACnEmB,EAAca,UACPb,EAAcN,SAEhB,KAvEX,0BA6EE,SAA2BsB,GAA4B,IAAD,gBACjChB,EAAcN,SADmB,IACpD,2BAA0C,CAAC,IAAlCH,EAAiC,QACxC,GAAIA,EAAOV,KAAOmC,EAAOnC,GAAI,CAC3BU,EAAON,MAAQ+B,EAAO/B,KACtBM,EAAOL,OAAS8B,EAAO9B,MACvBK,EAAOJ,UAAY6B,EAAO7B,SAC1BI,EAAOH,aAAe4B,EAAO5B,YAC7BG,EAAOF,OAAS2B,EAAO3B,MACvBW,EAAca,UACd,QATgD,mCA7ExD,KAAab,EACIC,iBAA+C,qBAAZgB,QADvCjB,EAEIN,QAAyBM,EAAckB,cAF3ClB,EAGIW,MAAgBX,EAAcN,QAC1CyB,KAAI,SAAAJ,GAAC,OAAIA,EAAElC,MACXuC,QAAO,SAACC,EAAMC,GACb,OAAOC,KAAKC,IAAIH,EAAMC,KACrB,G,iBCCMG,EAAb,4JACE,WAAU,IAAD,OACDC,EAAeC,KAAKC,MAAMC,SAAWF,KAAKC,MAAMC,SAAW,aAEjE,OACE,kCACE,gCACE,+BACE,uBACA,oBAAIC,UAAU,WACd,uCACCH,KAAKC,MAAMG,UAAY,uCACxB,wCACA,4CACA,+CACCJ,KAAKC,MAAMI,YAAc,4BAG9B,gCACCL,KAAKC,MAAMlC,QAAQyB,KAAI,SAACJ,EAAGkB,GAAJ,OACtB,+BACE,6BAAKA,EAAI,IACT,oBAAIH,UAAU,SAAd,SAAuB,qBAAKI,IAAKnB,EAAE/B,OAAQmD,MAAO,GAAIC,OAAQ,GAAIC,IAAI,SACtE,6BAAKtB,EAAEjC,OACN,EAAK8C,MAAMG,UAAY,+BAAKR,KAAKe,MAAoB,IAAdhD,EAASyB,IAAzB,MAAuCA,EAAE9B,KAAzC,IAAgD8B,EAAE9B,KAAO8B,EAAE7B,MAA3D,OACxB,6BAAK6B,EAAE1B,QACP,6BAAK0B,EAAE5B,WACP,6BAAK4B,EAAE3B,cACN,EAAKwC,MAAMI,YAAc,6BAAI,wBAAQO,QAAS,kBAAMb,EAAaX,EAAElC,KAAKiD,UAAU,cAArD,wBARvBf,EAAElC,gBApBrB,GAAiC2D,IAAMC,WClBxB,G,MAAA,sXCGFC,EAAb,4FAOE,WAA8D,IAAxCC,EAAuC,uDAAvB,KACpC,OAAO,IAAIC,SAAgB,SAACC,EAASC,GACnC,IAAIC,EAAUC,SAASC,cAAc,OACrCF,EAAQG,UAAR,sCACA,IAAIC,EAAYJ,EAAQK,WAExBD,EAAUE,iBAAiB,UAAU,WAEnC,IAAIC,EAAOH,EAAUI,MAAM,GAC3B,GAAID,EAAKE,KAAOb,EAEd,OADApC,QAAQkD,IAAR,8BAAmCd,EAAnC,6BAA6DW,EAAKE,KAAlE,WACOV,EAAO,uBAAD,OAAwBH,EAAxB,6BAAkDW,EAAKE,KAAvD,WAEf,IAAKF,EAAKxE,KAAK4E,cAAcC,SAAS,QAEpC,OADApD,QAAQkD,IAAI,kDACLX,EAAO,kDAEhB,IAAIc,EAAS,IAAIC,WACjBD,EAAOE,OAAS,WAEd,IAAMC,EAAcH,EAAOI,OAC3BnB,EAAQkB,IAEVH,EAAOK,cAAcX,MAGvBH,EAAUe,eAjChB,KCAMC,G,MAAoCC,iBAAiBpB,SAASqB,cAAc,WAC5EC,EAAoBC,OAAOJ,EAAaK,iBAAiB,6BAElDC,EAAb,yFAOE,WACE,IAAMC,EAAM1B,SAASC,cAAc,OACnCyB,EAAIC,UAAUC,IAAI,eAClBF,EAAIG,MAAMC,WAAa,SACvBJ,EAAIK,aAAe,WACjBN,EAAWO,oBAEbN,EAAIO,aAAe,WACjBR,EAAWS,kBAGb,IAAMC,EAAYnC,SAASC,cAAc,KACzCyB,EAAIU,YAAYD,GAEhB,IAAME,EAASrC,SAASC,cAAc,UAYtC,OAXAoC,EAAOC,UAAY,SACnBD,EAAOE,QAAU,WACfd,EAAWe,WAEbd,EAAIU,YAAYC,GAEhBI,OAAOpC,iBAAiB,UAAU,WAChCoB,EAAWiB,aAGb1C,SAAS2C,KAAKP,YAAYV,GACnBA,IAjCX,qBAwDE,SAAuBkB,EAAaC,GAClC,IAAMnB,EAAMD,EAAWC,IAEvBA,EAAIoB,kBAAkBR,UAAYM,EAClClB,EAAIG,MAAMC,WAAa,UACvBJ,EAAIC,UAAUoB,OAAO,uBAAwBF,GAC7CnB,EAAIC,UAAUoB,OAAO,oBAAqBF,GAC1CpB,EAAWiB,UACXjB,EAAWS,mBAhEf,qBAsEE,SAAsBU,GACpBnB,EAAWuB,QAAQJ,GAAK,KAvE5B,mBA6EE,SAAoBA,GAClBnB,EAAWuB,QAAQJ,GAAK,OA9E5B,KAAanB,EAEawB,YAAsB,IAFnCxB,EAIIC,IAAsBD,EAAWyB,OAJrCzB,EAKI0B,oB,EALJ1B,EAoCIS,eAAiB,WAE9BT,EAAWO,mBACXP,EAAW0B,eAAiBC,WAAW3B,EAAWe,QAASf,EAAWwB,cAvC7DxB,EA0CIO,iBAAmB,WAChCqB,aAAa5B,EAAW0B,iBA3Cf1B,EA8CIe,QAAU,WACvBf,EAAWC,IAAIG,MAAMC,WAAa,UA/CzBL,EAkDIiB,QAAU,WACiB,YAApCjB,EAAWC,IAAIG,MAAMC,aACvBL,EAAWC,IAAIG,MAAM1C,MAASa,SAAS2C,KAAKW,YAAc,EAAIhC,EAAa,O,ICrC5DiC,E,kDACnB,WAAY3E,GAAwB,IAAD,8BACjC,cAAMA,IAWA4E,0BAA4B,SAACC,GACnC,EAAKC,SAAS,CAAEC,cAAeF,EAAMG,OAAOC,SAbX,EAmB3BC,mBAAqB,WAC3B,IAAMhI,EAAO,EAAKiI,MAAMJ,cAClB3H,EAAS,EAAK+H,MAAM/H,OAC1B,EAAK0H,SAAS,CACZhH,QAASM,EAAcgH,cAAclI,EAAME,GAC3C2H,cAAe,GACf3H,OAAQiI,KAzBuB,EAgC3BC,mBAAqB,SAACrI,GAC5B,EAAK6H,SAAS,CACZhH,QAASM,EAAcmH,aAAatI,MAlCL,EAsC3BuI,aAAe,WACrB1E,EAAW2E,QLxDsB,MKyD9BC,MAAK,SAAAC,GACJ,EAAKb,SAAS,CAAC1H,OAAQuI,IACvB9C,EAAW+C,QAAQ,kCAEpBC,MAAMhD,EAAWoB,QA1CpB,EAAKkB,MAAQ,CACXrH,QAASD,EAAYO,EAAc0H,oBACnCf,cAAe,GACf3H,OAAQiI,GALuB,E,0CA+CnC,WAAU,IAAD,OACDU,EACyB,KAA7BhG,KAAKoF,MAAMJ,eACXhF,KAAKoF,MAAMrH,QAAQkI,MAAK,SAAA7G,GAAC,OAAIA,EAAEjC,OAAS,EAAKiI,MAAMJ,iBACrD,OACE,0BAAS7E,UAAU,aAAnB,UAEE,cAAC,EAAD,CACEpC,QAASiC,KAAKoF,MAAMrH,QACpBqC,UAAU,EACVC,YAAY,EACZH,SAAUF,KAAKuF,qBAGjB,iCACE,uBAAOW,QAAS,mBAAhB,yBACA,uBACEC,KAAK,OACLjJ,GAAI,mBACJgI,MAAOlF,KAAKoF,MAAMJ,cAClBoB,YAAY,iBACZC,UAAW,GACXC,YAAY,EACZC,aAAc,MACdC,SAAUxG,KAAK6E,4BAEjB,wBAAQjE,QAASZ,KAAKmF,mBAAoBhF,UAAU,cAAc6F,SAAUA,EAA5E,oBACA,sBAAKpF,QAASZ,KAAKyF,aAAnB,UACE,qBAAKlF,IAAKP,KAAKoF,MAAM/H,OAAQqD,IAAI,WACjC,+DL7FyB,KK6FzB,mBAIJ,cAAC,IAAD,CAAMP,UAAU,mBAAmBsG,GAAG,IAAtC,yB,GAjF+B5F,IAAMC,WClBhC4F,G,MAAb,wGAIE,WACE,IAAMzI,EAAI,IAAI0I,MAId,OAHA1I,EAAEsC,IAAM,uBACRtC,EAAE2I,MAAO,EACT3I,EAAE4I,OAAS,GACJ5I,IATX,uBAiBE,WAAmD,IAA3B4I,EAA0B,uDAAT,EACjC5I,EAAI,IAAI0I,MACd1I,EAAEsC,IAAM,gBACRtC,EAAE4I,OAASA,EACXjI,QAAQkD,IAAI7D,GACZA,EAAE6I,SAtBN,4BA8BE,WAAwD,IAA3BD,EAA0B,uDAAT,EACtC5I,EAAI,IAAI0I,MACd1I,EAAEsC,IAAM,gBACRtC,EAAE4I,OAASA,EACX5I,EAAE6I,SAlCN,kCAwCE,WACEJ,EAAYK,qBAAqBD,SAzCrC,kCA+CE,WACEJ,EAAYK,qBAAqBC,YAhDrC,MAAaN,EAEIK,qBAAyCL,EAAYO,sB,UCczDC,EAAb,kDAEE,WAAYjH,GAAmB,IAAD,8BAC5B,cAAMA,IAcAkH,aAAe,SAAC7G,GACtB,QAA+B8G,IAA3B,EAAKhC,MAAMiC,SAAS/G,GAAkB,CACxC,IAAM+G,EAAW,EAAKjC,MAAMiC,SAC5BA,EAAS/G,GAAKmE,YAAW,kBAAM,EAAK6C,cAAchH,KAAI,KAEtDoG,EAAYa,YAEZ,EAAKxC,SAAS,CAACsC,SAAUA,MAtBC,EA0BtBC,cAAgB,SAAChH,GACvB,IAAM+G,EAAW,EAAKjC,MAAMiC,SAC5BA,EAAS/G,QAAK8G,EACd,EAAKrC,SAAS,CAACsC,SAAUA,KA3BzB,EAAKjC,MAAQ,CACXiC,SAAU,MAACD,OAAWA,OAAWA,OAAWA,IAHlB,EAFhC,wDASE,WACEpH,KAAKoF,MAAMiC,SAASG,SAAQ,SAAAC,QAChBL,IAANK,GACFC,cAAcD,QAZtB,oBAkCE,WAAiB,IAAD,OACRE,EAAI3H,KAAKC,MAAMO,MAAQR,KAAKC,MAAMO,MAAQ,IAC1CoH,EAAI5H,KAAKC,MAAMQ,OAAST,KAAKC,MAAMQ,OAASkH,EAAI,EAEhDE,EAAU7H,KAAKoF,MAAMiC,SAAS7H,KAAI,SAAAiI,GAAC,YAAUL,IAANK,EAAkB,GAAK,kBAEpE,OACE,sBAAKjH,MAAK,UAAKmH,EAAL,MAAYlH,OAAM,UAAKmH,EAAL,MAAYE,MAAM,6BAA6BC,QAAQ,aAAaC,OAAO,UAAvG,UAEI,oBAAG9K,GAAG,gBAAgB0D,QAAS,kBAAM,EAAKuG,aAAa,IAAvD,UACE,yBAAShH,UAAW0H,EAAQ,GAAII,OAAO,UAAUC,GAAG,UAAUC,GAAG,WAAWjL,GAAG,QAAQkL,GAAG,UAAUC,GAAG,WAAWC,QAAQ,YAAYC,gBAAgB,OAAOC,YAAY,OAAOC,KAAK,YACrL,sBAAMR,OAAO,UAAUS,cAAc,IAAIxL,GAAG,QAAQuD,OAAO,UAAUD,MAAM,UAAUmI,EAAE,UAAUC,EAAE,WAAWN,QAAQ,YAAYG,KAAK,eAIzI,oBAAGI,UAAU,oBAAoB3L,GAAG,mBAAmB0D,QAAS,kBAAM,EAAKuG,aAAa,IAAxF,UACE,yBAAShH,UAAW0H,EAAQ,GAAII,OAAO,UAAUC,GAAG,UAAUC,GAAG,WAAWjL,GAAG,QAAQkL,GAAG,UAAUC,GAAG,UAAUC,QAAQ,YAAYC,gBAAgB,OAAOC,YAAY,OAAOC,KAAK,YACpL,sBAAMC,cAAc,IAAIxL,GAAG,SAASuD,OAAO,UAAUD,MAAM,WAAWmI,EAAE,WAAWC,EAAE,WAAWN,QAAQ,YAAYL,OAAO,UAAUQ,KAAK,eAI5I,sBAAMvL,GAAG,aAAa4L,UAAU,SAASC,WAAW,OAAOC,SAAS,WAAWC,WAAW,QAAQC,WAAW,aAAaC,SAAS,KAAKR,EAAE,WAAWC,EAAE,WAAWN,QAAQ,YAAYI,cAAc,IAAIH,gBAAgB,OAAOC,YAAY,IAAIP,OAAO,UAAUQ,KAAK,UAArQ,kBAGA,oBAAGI,UAAU,oBAAoB3L,GAAG,mBAAmB0D,QAAS,kBAAM,EAAKuG,aAAa,IAAxF,UACE,yBAAShH,UAAW0H,EAAQ,GAAII,OAAO,UAAUC,GAAG,UAAUC,GAAG,WAAWjL,GAAG,SAASkL,GAAG,UAAUC,GAAG,YAAYC,QAAQ,YAAYC,gBAAgB,OAAOC,YAAY,OAAOC,KAAK,YACvL,sBAAMC,cAAc,IAAIxL,GAAG,SAASuD,OAAO,UAAUD,MAAM,WAAWmI,EAAE,WAAWC,EAAE,YAAYN,QAAQ,YAAYL,OAAO,UAAUQ,KAAK,eAI7I,oBAAGI,UAAU,qBAAqB3L,GAAG,oBAAoB0D,QAAS,kBAAM,EAAKuG,aAAa,IAA1F,UACE,yBAAShH,UAAW0H,EAAQ,GAAII,OAAO,UAAUC,GAAG,UAAUC,GAAG,WAAWjL,GAAG,SAASkL,GAAG,WAAWC,GAAG,YAAYC,QAAQ,YAAYC,gBAAgB,OAAOC,YAAY,OAAOC,KAAK,YACxL,sBAAMC,cAAc,IAAIxL,GAAG,SAASuD,OAAO,UAAUD,MAAM,WAAWmI,EAAE,WAAWC,EAAE,YAAYN,QAAQ,YAAYL,OAAO,UAAUQ,KAAK,eAI7I,sBAAMvL,GAAG,SAAS4L,UAAU,SAASC,WAAW,OAAOC,SAAS,WAAWC,WAAW,QAAQC,WAAW,aAAaC,SAAS,KAAKR,EAAE,WAAWC,EAAE,YAAYN,QAAQ,YAAYc,YAAY,OAAOV,cAAc,IAAIH,gBAAgB,OAAOC,YAAY,OAAOP,OAAO,UAAUQ,KAAK,UAAxR,sBAtEV,GAA0B5H,IAAMC,WCdzB,SAASuI,IACd,MACE,IACAzJ,KAAKe,MARuB,SAQjBf,KAAK0J,UACbC,SAAS,IACTC,SAAS,EAAG,K,UCiBEC,E,4MAWXC,iBAAmB,SAAC5E,GAC1B,EAAK7E,MAAMrC,OAAOT,KAAO2H,EAAMG,OAAOC,MACtC,EAAKjF,MAAM0J,eAAe,EAAK1J,MAAMrC,S,EAM/BgM,kBAAoB,SAAC9E,GAC3B,EAAK7E,MAAMrC,OAAOR,MAAQ0H,EAAMG,OAAOC,MACvC,EAAKjF,MAAM0J,eAAe,EAAK1J,MAAMrC,S,EAM/BiM,yBAA2B,SAAC/E,GAElC,IAAM/G,EAAuB,EAAKkC,MAAM6J,uBAAuB3K,QAAO,SAAAC,GAAC,OAAI2K,OAAO3K,EAAElC,MAAQ4H,EAAMG,OAAOC,SAAO,GAChH,EAAKjF,MAAM0J,eACT1M,EACEc,EAAQb,GACRa,EAAQZ,KACU,KAAlBY,EAAQX,MAAeiM,IAActL,EAAQX,MAC7CW,EAAQV,U,EAMN2M,gBAAkB,SAACC,GACzBA,EAAEC,aAAaC,QAAQ,aAAc,EAAKlK,MAAMmK,Q,EAI1CC,eAAiB,SAACJ,GACxBA,EAAEK,kB,EAIIC,eAAiB,SAACN,GACxB,IAAMO,EAAO5H,OAAOqH,EAAEC,aAAaO,QAAQ,eACtCC,MAAMF,IACT,EAAKvK,MAAM0K,aAAaH,EAAM,EAAKvK,MAAMmK,Q,6CAlD7C,WACE,YAA6ChD,IAAtCpH,KAAKC,MAAM6J,yB,oBAqDpB,WACE,OACE,sBAAK3J,UAAU,kBACVyK,WAAW,EACXC,YAAa7K,KAAKgK,gBAClBc,WAAY9K,KAAKqK,eACjBU,OAAQ/K,KAAKuK,eAJlB,UAKE,mCACE,qBAAKhK,IAAKP,KAAKC,MAAMrC,OAAOP,OAAQqD,IAAI,OACxC,+BACGV,KAAKgL,UAAY,QAAU,SAD9B,WACgDhL,KAAKC,MAAMmK,MAAQ,EADnE,OAGA,wBAAQxJ,QAASZ,KAAKC,MAAMgL,SAA5B,uBAEDjL,KAAKgL,UAEJ,gCACE,uBAAO9E,QAAS,qBAAuBlG,KAAKC,MAAMmK,MAAlD,mBAGA,uBACEjE,KAAK,OACLjJ,GAAI,qBAAuB8C,KAAKC,MAAMmK,MACtClF,MAAOlF,KAAKC,MAAMrC,OAAOT,KACzBqJ,SAAUxG,KAAK0J,iBACftD,YAAY,iBACZE,YAAY,EACZC,aAAc,MACdF,UAAW,QAKf,gCACE,uBAAOH,QAAS,iBAAmBlG,KAAKC,MAAMmK,MAA9C,qBACA,wBACElN,GAAI,iBAAmB8C,KAAKC,MAAMmK,MAClClF,MAAOlF,KAAKC,MAAMrC,OAAOV,GACzBsJ,SAAUxG,KAAK6J,yBAHjB,SAKG7J,KAAKC,MAAM6J,wBAA0B9J,KAAKC,MAAM6J,uBAAuBtK,KAAI,SAAA5B,GAC1E,OAAO,wBAAwBsH,MAAOtH,EAAOV,GAAtC,SAA2CU,EAAOT,MAArCS,EAAOV,YAKnC,gCACE,uBAAOgJ,QAAS,sBAAwBlG,KAAKC,MAAMmK,MAAnD,oBAGA,uBACEjE,KAAK,QACLjJ,GAAI,sBAAwB8C,KAAKC,MAAMmK,MACvClF,MAAOlF,KAAKC,MAAMrC,OAAOR,MACzBoJ,SAAUxG,KAAK4J,8B,GAhHgB/I,aCItBqK,G,wDACnB,WAAYjL,GAA0B,IAAD,8BACnC,cAAMA,IAWAkL,qBAAuB,WAC7B,IAAMjO,EAAK,EAAKkI,MAAMgG,UAAY,EAClC,EAAKhG,MAAMiG,aAAapM,KAAKhC,EAAeC,EAAI,GAAImM,IAAa/D,IACjE,EAAKP,SAAS,CAAEqG,UAAWlO,KAfQ,EAqB7BoO,sBAAwB,WAE9B,IAAM1N,EAAsB,EAAKwH,MAAMmG,gBAAgBC,QACvD,EAAKpG,MAAMiG,aAAapM,KAAKhC,EAAeW,EAAOV,GAAIU,EAAOT,KAAMkM,IAAazL,EAAOP,SACxF,EAAK0H,SAAS,KAzBqB,EA+B7B0G,mBAAqB,SAACrB,GAC5B,IAAMsB,EAAU,EAAKtG,MAAMiG,aAAaM,OAAOvB,EAAO,GAClDsB,EAAQ,GAAGxO,GAAK,GAElB,EAAKkI,MAAMmG,gBAAgBtM,KAAKyM,EAAQ,IAE1C,EAAK3G,SAAS,KArCqB,EA2C7B6G,mBAAqB,SAAChO,EAAqBwM,GACjD,IAAIyB,EAAY,EAAKzG,MAAMmG,gBACrBO,EAAW,EAAK1G,MAAMiG,aAAajB,GAErC0B,EAAS5O,GAAK,IAEhB,EAAKkI,MAAMmG,gBAAgBtM,KAAK6M,GAEhCD,EAAY,EAAKzG,MAAMmG,gBAAgBpM,QAAO,SAAAC,GAAC,OAAIA,EAAElC,KAAOU,EAAOV,OAErE,IAAMmO,EAAe,EAAKjG,MAAMiG,aAChCA,EAAajB,GAASxM,EACtB,EAAKmH,SAAS,CAAEwG,gBAAiBM,EAAWR,aAAcA,KAvDvB,EA0D7BU,iBAAmB,SAACvB,EAAc/D,GAExC,GAAI+D,EAAO/D,EAAI,CACb,IAAMuF,EAAS,EAAK5G,MAAMiG,aAAaY,MAAM,EAAGxF,GAC1CyF,EAAQ,EAAK9G,MAAMiG,aAAaY,MAAMxF,EAAI+D,GAC1C2B,EAAY,EAAK/G,MAAMiG,aAAab,GACpC4B,EAAQ,EAAKhH,MAAMiG,aAAaY,MAAMzB,EAAO,GAC7C6B,EAAQ,sBAAOL,GAAP,CAAeG,GAAf,YAA6BD,GAA7B,YAAuCE,IACrD,EAAKrH,SAAS,CAACsG,aAAcgB,SAG1B,GAAI7B,EAAO/D,EAAI,CAClB,IAAMuF,EAAS,EAAK5G,MAAMiG,aAAaY,MAAM,EAAGzB,GAC1C2B,EAAY,EAAK/G,MAAMiG,aAAab,GACpC0B,EAAQ,EAAK9G,MAAMiG,aAAaY,MAAMzB,EAAO,EAAG/D,EAAK,GACrD2F,EAAQ,EAAKhH,MAAMiG,aAAaY,MAAMxF,EAAK,GAC3C4F,EAAQ,sBAAOL,GAAP,YAAkBE,GAAlB,CAAyBC,GAAzB,YAAuCC,IACrD,EAAKrH,SAAS,CAACsG,aAAcgB,MAzE/B,EAAKjH,MAAQ,CACXiG,aAAc,GACdE,gBAAiBlN,EAAc0H,mBAC/BqF,UAAW,GALsB,E,0CA+ErC,WAAU,IAAD,OACDkB,EAAoBtM,KAAKoF,MAAMiG,aAAakB,OAzF3B,EA0FjBC,EAAYxM,KAAKoF,MAAMiG,aAAapF,MAAK,SAAA7G,GAAC,MAAe,KAAXA,EAAEjC,QACtD,OACE,0BAASgD,UAAU,gBAAnB,UACE,0CACCH,KAAKoF,MAAMiG,aAAa7L,KAAI,SAACJ,EAAGkB,GAC/B,OACE,cAAC,EAAD,CAEE8J,MAAO9J,EACP1C,OAAQwB,EACR0K,uBAEE1K,EAAElC,GAAK,OAAIkK,EAAX,CAAwBhI,GAAxB,mBAA8B,EAAKgG,MAAMmG,kBAE3C5B,eAAgB,SAAA/L,GAAM,OAAI,EAAKgO,mBAAmBhO,EAAQ0C,IAC1D2K,SAAU,kBAAM,EAAKQ,mBAAmBnL,IACxCqK,aAAc,EAAKoB,kBATdzL,MAcXN,KAAKoF,MAAMiG,aAAakB,OA9GL,EA+GjB,wBAAQ3L,QAASZ,KAAKmL,qBAAsBhL,UAAU,cAAtD,0BACE,KAEJH,KAAKoF,MAAMiG,aAAakB,OAlHL,GAkH4BvM,KAAKoF,MAAMmG,gBAAgBgB,OAAS,EAC/E,wBAAQ3L,QAASZ,KAAKsL,sBAAuBnL,UAAU,cAAvD,2BACE,KACN,gCACE,cAAC,IAAD,CAAMA,UAAU,mBAAmBsG,GAAG,IAAtC,kBACA,yBACE7F,QAAS,kBAAM,EAAKX,MAAMwM,SAAS,EAAKrH,MAAMiG,eAC9CrF,SAAUsG,GAAqBE,EAC/BrM,UAAU,cAHZ,WAIImM,IAAsBE,GAAa,wCACpCF,GAAqB,yDA7HP,EA6HO,cACrBE,IAAcF,GAAqB,uE,GAtHPzL,cC/B5B6L,EAA4B,IAE5BC,EAA4B,IAQ5BC,EAA0B,GAC1BC,EAA2B,GCPVC,E,iDAClB1P,MAAgB,G,KAChB2P,KAAe,E,KACfC,KAAe,E,4CAEzB,SAAgB5P,GACd4C,KAAK5C,MAAQA,I,sBAGf,WACE,OAAO4C,KAAK5C,Q,qBAGd,SAAe2P,GACb/M,KAAK+M,KAAOA,I,sBAGd,SAAgBE,GACdjN,KAAK+M,MAAQE,I,qBAGf,WACE,OAAOjN,KAAK+M,O,qBAGd,SAAeC,GACbhN,KAAKgN,KAAOA,I,sBAGd,SAAgBE,GACdlN,KAAKgN,MAAQE,I,qBAGf,WACE,OAAOlN,KAAKgN,S,KC/BVG,EAAoC,CACxC,CAAC,CAAEC,EAAG,EAAGhQ,MAAO,WAChB,CAAC,CAAEgQ,EAAG,EAAGhQ,MAAO,WAChB,CAAC,CAAEgQ,EAAG,EAAGhQ,MAAO,UAAY,CAAEgQ,EAAG,EAAGhQ,MAAO,WAC3C,CACE,CAAEgQ,EAAG,EAAGhQ,MAAO,OACf,CAAEgQ,EAAG,IAAKhQ,MAAO,UACjB,CAAEgQ,EAAG,EAAGhQ,MAAO,WAEjB,CAAC,CAAEgQ,EAAG,EAAGhQ,MAAO,YAGZiQ,EAAuBF,EAAeZ,OAKvBe,E,kDAUnB,WAAY1E,EAAWD,EAAW4E,EAAwBC,GAA2B,IAAD,8BAClF,gBADwDA,gBAA0B,EATnED,YASmE,IAR5E9F,OAQ4E,EAElF,EAAKsF,KAAOnE,EACZ,EAAKoE,KAAOrE,EACZ,EAAK4E,OAASA,EAAS,EACvB,EAAK9F,EAAI,EALyE,E,iDAWpF,WACE,OAAOzH,KAAKyH,EAAI4F,I,kBAMlB,SAAYI,EAA+BC,GAAsB,IAAD,OAC1CP,EAAevN,KAAKe,MAAMX,KAAKyH,IACvCD,SAAQ,SAAAmG,GAAC,OAAI,EAAKC,WAAWH,EAAKC,EAAOC,MACrD3N,KAAKyH,GAAKzH,KAAKwN,gB,wBAOjB,SACEC,EACAC,EACAG,GAEAJ,EAAIK,YACJL,EAAIM,IACF/N,KAAKgO,UAAYN,EACjB1N,KAAKiO,UAAYP,EACjB1N,KAAKuN,OAASM,EAAOT,EAAIM,EACzB,EACA,EAAI9N,KAAKsO,IAEXT,EAAIU,UAAYN,EAAOzQ,MACvBqQ,EAAIhF,W,GApD+BqE,GCrBhC,SAASsB,EAAIC,EAAWC,GAC7B,OAASD,EAAIC,EAAKA,GAAKA,EAoBlB,SAASC,EACdC,EACAC,EACAC,EACAC,GAEA,OAbsC/F,EAaP4F,EAAKE,EAba/F,EAaT8F,EAAKE,EAZtC/O,KAAKgP,KAAK,SAAAhG,EAAK,GAAL,SAASD,EAAK,IAD1B,IAAiCC,EAAWD,ECX5C,IAAekG,EAAtB,4HAA6C/B,GCEvCgC,E,kDASJ,WAAY/B,EAAcC,EAAc+B,GAAoB,IAAD,8BACzD,gBATMC,aAAuB,EAQ4B,EANnDD,aAMmD,IAJnDE,aAImD,IAFnDC,cAAwB,EAI9B,EAAKH,QAAUA,EACf,EAAKhC,KAAOA,EACZ,EAAKkC,QAAUlC,EAAOoC,IACtB,EAAKnC,KAAOA,EAL6C,E,iDAW3D,WACE,OAAOhN,KAAKgP,c,+BAMd,SAA0BI,EAAW9O,EAAWlB,GAE9C,GAAU,KAANgQ,EAAU,CACZ,IAAMC,EAAUrP,KAAKgN,KLzBe,GKyBP1M,EAAI,IACjC,OACEiO,EAAkBvO,KAAKiP,QAASI,EAASjQ,EAAE4O,UAAW5O,EAAE6O,WACxD7O,EAAEkQ,YL5BgC,EKgCtC,OAAO,I,2BAMT,SAAsBF,EAAW9O,EAAWlB,GAE1C,GAAU,KAANgQ,EAAU,CACZ,IAAMC,EAAUrP,KAAKgN,KLzCe,GKyCP1M,EAAI,IAE/BiO,EAAkBvO,KAAKiP,QAASI,EAASjQ,EAAE4O,UAAW5O,EAAE6O,WACxD7O,EAAEmQ,qBAAuB,EAAIJ,MAE7BnP,KAAK+O,QAAQzO,GAAK,GAClBN,KAAKgP,aAAc,EACnBhP,KAAKkP,cAAgB,M,8BAU3B,WAEE,KAAiD,KAA1ClP,KAAK+O,QAAQ/O,KAAK+O,QAAQxC,OAAS,IACxCvM,KAAK+O,QAAQS,MAGfxP,KAAKgP,YAAchP,KAAK+O,QAAQ9I,MAAK,SAAAmJ,GAAC,MAAU,KAANA,O,qBAM5C,WACE,GAAIpP,KAAKyP,kBAEP,IADA,IAAIC,GAAsB,EACjBpP,EAAI,EAAGA,EAAIN,KAAK+O,QAAQxC,SAAUjM,EACjB,KAApBN,KAAK+O,QAAQzO,KACfoP,GAAa,GAGS,KAApB1P,KAAK+O,QAAQzO,IAAaoP,IAC5B1P,KAAK+O,QAAQzO,EAAI,GAAKN,KAAK+O,QAAQzO,GACnCN,KAAK+O,QAAQzO,GAAK,MAItBN,KAAKkP,gB,6BAMT,WACE,OACyB,IAAvBlP,KAAKkP,eACkB,KAAvBlP,KAAKkP,eACLlP,KAAKkP,eAAiB,K,yBAI1B,SAAmB9P,GAAyB,IAAD,OAEzC,QACEA,EAAE4O,UAAY5O,EAAEkQ,YAActP,KAAKgO,WACnC5O,EAAE4O,UAAY5O,EAAEkQ,YAActP,KAAKgO,ULtGC,IK0G/BhO,KAAK+O,QAAQ9I,MAAK,SAACmJ,EAAG9O,GAAJ,OAAU,EAAKqP,kBAAkBP,EAAG9O,EAAGlB,Q,kBAGlE,SAAYqO,EAA+BC,GAAsB,IAAD,OAC9D1N,KAAK4P,UACL5P,KAAK+O,QAAQvH,SAAQ,SAAC4H,EAAG9O,GACb,KAAN8O,IACF3B,EAAIU,UAAYiB,EAChB3B,EAAIoC,SACFjQ,KAAKkQ,KAAK,EAAK/C,KAAOW,GACtB9N,KAAKkQ,MAAM,EAAK9C,KLpHgB,GKoHR1M,EAAI,IAA2BoN,GACvD9N,KAAKkQ,KLrH2B,EKqHDpC,GAC/B9N,KAAKkQ,KLtH2B,EKsHDpC,QAIrC1N,KAAK+P,qB,qBAGP,SAAe3Q,GAAsB,IAAD,OAGhCA,EAAE4O,UAAY5O,EAAEmQ,qBAAuBvP,KAAKgO,WAC5C5O,EAAE4O,UAAY5O,EAAEmQ,qBAAuBvP,KAAKgO,ULjIR,IKqItChO,KAAK+O,QAAQvH,SAAQ,SAAC4H,EAAG9O,GAAJ,OAAU,EAAK0P,cAAcZ,EAAG9O,EAAGlB,MACxDY,KAAK+P,sB,qBAGP,WACE,OAA+B,IAAxB/P,KAAK+O,QAAQxC,W,GA/IYsC,GAsJvBoB,EAAb,kDAME,WAAmBlD,EAAcC,EAAc+B,GAAsB,IAAD,8BAClE,gBANMC,aAAuB,EAKqC,EAJ5DkB,aAI4D,IAH5DC,kBAG4D,IAF5DC,aAE4D,EAElE,EAAKF,QAAUnB,EAAQvP,KAAI,SAAC4P,EAAG9O,GAAJ,OAAU,IAAIwO,EAAsB/B,ELzJzB,EKyJgCzM,EAAwB0M,EAAMoC,MACpG,EAAKe,aAAe,EAAKD,QAAQ3D,OACjC,EAAKQ,KAAOA,EACZ,EAAKC,KAAOA,EACZ,EAAKoD,QAAUxQ,KAAKC,IAAL,MAAAD,KAAI,YAAQmP,EAAQvP,KAAI,SAAA4P,GAAC,OAAIA,EAAE7C,YANoB,EANtE,uDAkBE,WACE,KAAOvM,KAAKkQ,QAAQ3D,OAAS,GAAKvM,KAAKkQ,QAAQ,GAAGG,WAChDrQ,KAAKkQ,QAAQ1E,QACbxL,KAAK+M,MLtK+B,EKuKpC/M,KAAKmQ,cAAgB,EAEvB,KACEnQ,KAAKkQ,QAAQ3D,OAAS,GACtBvM,KAAKkQ,QAAQlQ,KAAKkQ,QAAQ3D,OAAS,GAAG8D,WAEtCrQ,KAAKkQ,QAAQV,MACbxP,KAAKmQ,cAAgB,IA7B3B,2BAoCE,WACE,OAAOnQ,KAAKgP,cArChB,6BA4CE,WACE,OAAOhP,KAAKmQ,eA7ChB,yBAgDE,SAAmB/Q,GAEjB,QACEA,EAAE4O,UAAY5O,EAAEkQ,YAActP,KAAK+M,MACnC3N,EAAE4O,UAAY5O,EAAEkQ,YAActP,KAAK+M,KLrMC,EKqMM/M,KAAKmQ,cAC/C/Q,EAAE6O,UAAY7O,EAAEkQ,YAActP,KAAKgN,KLtMC,EKsMMhN,KAAKoQ,UAK1CpQ,KAAKkQ,QAAQjK,MAAK,SAAA0H,GAAC,OAAIA,EAAE2C,YAAYlR,QA1DhD,kBA6DE,SAAYqO,EAA+BC,GACzC1N,KAAKkQ,QAAQ1I,SAAQ,SAAAmG,GAAC,OAAIA,EAAE4C,KAAK9C,EAAKC,MAClC1N,KAAKgP,cACPhP,KAAKgP,YAAchP,KAAKkQ,QAAQjK,MAAK,SAAAuK,GAAG,OAAIA,EAAIC,oBAElDzQ,KAAK0Q,wBAlET,qBAqEE,SAAetR,GAGXA,EAAE4O,UAAY5O,EAAEmQ,qBAAuBvP,KAAKgO,WAC5C5O,EAAE4O,UAAY5O,EAAEmQ,qBAAuBvP,KAAKgO,UL1NR,EK0NoBhO,KAAK2Q,mBAC7DvR,EAAE6O,UAAY7O,EAAEmQ,qBAAuBvP,KAAKgN,KL3NR,EK2NehN,KAAKoQ,UAK1DpQ,KAAKkQ,QAAQ1I,SAAQ,SAAAmG,GAAC,OAAIA,EAAEiD,QAAQxR,MACpCY,KAAKgP,YAAchP,KAAKkQ,QAAQjK,MAAK,SAAAuK,GAAG,OAAIA,EAAIC,wBAhFpD,GAAqC5B,GCxJxBgC,EAAb,sFAIE,SAAcC,EAAeC,GAC3B,IAAMC,EAAUC,OAAOC,oBAAoBL,EAAgBM,WACxDhS,QAAO,SAAAmP,GAAC,MAAU,WAANA,GAAwB,gBAANA,KAGjC,OAAOtO,KAAKgR,EAFEpR,KAAKe,MAAMf,KAAK0J,SAAW0H,EAAQzE,UAErBuE,EAAOC,KATvC,mBAeE,SAAaD,EAAeC,GAC1B,IAAMK,EAAQ,CAAC,UAAW,UAAW,UAAW,WAC1CzJ,EAAIyJ,EAAMxR,KAAKe,MAAMf,KAAK0J,SAAW8H,EAAM7E,SAC3C8E,EAAQ,CAAC,UAAW,WACpBC,EAAID,EAAMzR,KAAKe,MAAMf,KAAK0J,SAAW+H,EAAM9E,SAC3CgF,EAAI,YACJC,EAAQ,CAAC,UAAW,WACpBpE,EAAIoE,EAAM5R,KAAKe,MAAMf,KAAK0J,SAAWkI,EAAMjF,SAC3CwC,EAAU,CACd,CAACpH,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGyF,GAC3C,CAACzF,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGyF,EAAGA,GAC9C,CAACzF,EAAG2J,EAAGA,EAAGA,EAAGA,EAAGA,EAAG3J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAG2J,EAAGA,EAAGA,EAAGA,EAAGA,EAAG3J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAG2J,EAAGA,EAAGA,EAAGA,EAAGA,EAAG3J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGA,EAAG4J,EAAGA,EAAGA,EAAG5J,EAAGA,EAAGyF,EAAGA,EAAGA,GACjD,CAACzF,EAAGA,EAAGA,EAAGA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","file":"static/js/main.ccefe296.chunk.js","sourcesContent":["/**\r\n * Stats about a player. It can be used for storing in local storage\r\n * as well as for partial results from one game.\r\n */\r\nexport interface PlayerStats {\r\n  id: number;\r\n  name: string;\r\n  color: string;\r\n  avatar: string;\r\n  wins: number;\r\n  loses: number;\r\n  dmgDealt: number;\r\n  dmgReceived: number;\r\n  kills: number;\r\n}\r\n\r\n/**\r\n * Creates a new PlayerStats with all values set to 0 except the given ones.\r\n */\r\nexport function newEmptyPlayer(\r\n  id: number,\r\n  name: string,\r\n  color: string = \"\",\r\n  avatar: string = \"\"\r\n): PlayerStats {\r\n  return {\r\n    id: id,\r\n    name: name,\r\n    color: color,\r\n    avatar: avatar,\r\n    wins: 0,\r\n    loses: 0,\r\n    dmgDealt: 0,\r\n    dmgReceived: 0,\r\n    kills: 0\r\n  };\r\n}\r\n\r\n/**\r\n * Return player win ratio as number from <0, 1>.\r\n */\r\nexport function winRatio(player: PlayerStats): number {\r\n  const games = player.wins + player.loses;\r\n  return games === 0 ? 0 : player.wins / games;\r\n}\r\n\r\n/**\r\n * Sort players according to their stats.\r\n */\r\nexport function sortPlayers(players: PlayerStats[]): PlayerStats[] {\r\n  players.sort((a, b) => {\r\n    const aRatio = winRatio(a);\r\n    const bRatio = winRatio(b);\r\n    if (aRatio > bRatio) {\r\n      return -1;\r\n    }\r\n    if (aRatio < bRatio) {\r\n      return 1;\r\n    }\r\n    return (b.kills * 10 + b.dmgDealt - b.dmgReceived) - (a.kills * 10 + a.dmgDealt - a.dmgReceived);\r\n  });\r\n  return players;\r\n}\r\n","import { newEmptyPlayer, PlayerStats } from \"./playerStats\";\r\n\r\n/**\r\n * Maximal size of avatar image in bytes.\r\n */\r\nexport const maxAvatarSize: number = 2048;\r\n\r\n/**\r\n * Wrapper of accessing browser localStorage for storing player stats.\r\n */\r\nexport class PlayerStorage {\r\n  private static storageSupported: boolean = typeof Storage !== \"undefined\";\r\n  private static players: PlayerStats[] = PlayerStorage.initPlayers();\r\n  private static maxId: number = PlayerStorage.players\r\n    .map(p => p.id)\r\n    .reduce((prev, cur) => {\r\n      return Math.max(prev, cur);\r\n    }, 0);\r\n\r\n  /**\r\n   * Loads players from the local storage.\r\n   */\r\n  private static initPlayers(): PlayerStats[] {\r\n    if (PlayerStorage.storageSupported) {\r\n      const saved = localStorage.getItem(\"players\");\r\n      if (saved === null) {\r\n        return [];\r\n      }\r\n      return JSON.parse(saved);\r\n    } else {\r\n      console.warn(\"Local storage not supported.\");\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates localStorage to current player stats.\r\n   */\r\n  private static persist(): void {\r\n    localStorage.setItem(\"players\", JSON.stringify(PlayerStorage.players));\r\n  }\r\n\r\n  /**\r\n   * Retutns true if the localStorage is supported in the browser.\r\n   */\r\n  public static isSupported(): boolean {\r\n    return PlayerStorage.storageSupported;\r\n  }\r\n\r\n  /**\r\n   * Returns all stored player stats.\r\n   */\r\n  public static getStoredPlayers(): PlayerStats[] {\r\n    if (PlayerStorage.storageSupported) {\r\n      return [...PlayerStorage.players];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Saves a new player with the given name to the localStorage.\r\n   */\r\n  public static saveNewPlayer(name: string, avatar: string): PlayerStats[] {\r\n    if (PlayerStorage.storageSupported) {\r\n      PlayerStorage.maxId += 1;\r\n      PlayerStorage.players.push(newEmptyPlayer(PlayerStorage.maxId, name, \"\", avatar));\r\n      PlayerStorage.persist();\r\n      return PlayerStorage.players;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Removes a player with the given id.\r\n   */\r\n  public static removePlayer(id: number): PlayerStats[] {\r\n    if (PlayerStorage.storageSupported) {\r\n      PlayerStorage.players = PlayerStorage.players.filter(p => p.id !== id);\r\n      PlayerStorage.persist();\r\n      return PlayerStorage.players;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Updates a player by the given values (given values are added to the stored ones).\r\n   */\r\n  public static updatePlayer(update: PlayerStats): void {\r\n    for (let player of PlayerStorage.players) {\r\n      if (player.id === update.id) {\r\n        player.wins += update.wins;\r\n        player.loses += update.loses;\r\n        player.dmgDealt += update.dmgDealt;\r\n        player.dmgReceived += update.dmgReceived;\r\n        player.kills += update.kills;\r\n        PlayerStorage.persist();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {PlayerStats, winRatio} from \"../../player/playerStats\";\r\nimport \"./playerTable.css\";\r\n\r\ninterface PlayerTableProps {\r\n  // players to be displayed\r\n  players: PlayerStats[],\r\n  // when true, shows Wins column with \"ratio% (wins/games)\"\r\n  showWins: boolean,\r\n  // when true, shows a column with delete buttons\r\n  showDelete: boolean,\r\n  // handler of deleting a player, receives his id\r\n  onDelete?: (id: number) => void\r\n}\r\n\r\n/**\r\n * Displays player stats in a table.\r\n */\r\nexport class PlayerTable extends React.Component<PlayerTableProps, any> {\r\n  render() {\r\n    const handleDelete = this.props.onDelete ? this.props.onDelete : () => {};\r\n\r\n    return (\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th/>\r\n            <th className=\"img-th\"/>\r\n            <th>Name:</th>\r\n            {this.props.showWins && <th>Wins:</th>}\r\n            <th>Kills:</th>\r\n            <th>Dmg dealt:</th>\r\n            <th>Dmg received:</th>\r\n            {this.props.showDelete && <th/>}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n        {this.props.players.map((p, i) => (\r\n          <tr key={p.id}>\r\n            <td>{i + 1}</td>\r\n            <td className=\"img-td\"><img src={p.avatar} width={30} height={30} alt=\":(\"/></td>\r\n            <td>{p.name}</td>\r\n            {this.props.showWins && <td>{Math.floor(winRatio(p) * 100)}% ({p.wins}/{p.wins + p.loses})</td>}\r\n            <td>{p.kills}</td>\r\n            <td>{p.dmgDealt}</td>\r\n            <td>{p.dmgReceived}</td>\r\n            {this.props.showDelete && <td><button onClick={() => handleDelete(p.id)} className=\"menu-button\">Delete</button></td>}\r\n          </tr>)\r\n        )}\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACZSURBVDhP5ZDbDUBAEABVoAj1aFAZylCCFjTBxrG35tZ5hETiMj9ndyYomn54hP+Gxq5UMAK7IZuwYE3xQ5ABlgNOCJoLFOG1EIQMEHdDxXrcqwAx90ZWS68Q3/+0QyAyJEBwgSIchOb/uxz7HIrghATrpGA5wFDV1gHIii5A3IR0KYCEgAXrxhCWzrMJYXaJGMLgBh8M9cMEUUhNiMJglbgAAAAASUVORK5CYII=\"","/**\r\n * FileDialog for loading files to the application.\r\n */\r\nexport class FileDialog {\r\n\r\n  /**\r\n   * Loads asynchronously a PNG file as Base64 URL string.\r\n   *\r\n   * @param maxBs maximum allowed size of image in bites (default 1024)\r\n   */\r\n  public static openPNG(maxBs: number = 2048): Promise<string> {\r\n    return new Promise<string>((resolve, reject) => {\r\n      let element = document.createElement('div');\r\n      element.innerHTML = `<input type=\"file\" accept='.png'>`;\r\n      let fileInput = element.firstChild;\r\n      // @ts-ignore\r\n      fileInput.addEventListener('change', function() {\r\n        // @ts-ignore\r\n        let file = fileInput.files[0];\r\n        if (file.size > maxBs) {\r\n          console.log(`Maximal image size (${maxBs} bytes) exceeded: ${file.size} bytes`);\r\n          return reject(`Maximal image size (${maxBs} bytes) exceeded: ${file.size} bytes`);\r\n        }\r\n        if (!file.name.toLowerCase().endsWith(\".png\")) {\r\n          console.log(\"Unsupported image type. Please, use PNG image.\");\r\n          return reject(\"Unsupported image type. Please, use PNG image.\");\r\n        }\r\n        let reader = new FileReader();\r\n        reader.onload = function() {\r\n          // @ts-ignore\r\n          const url: string = reader.result;\r\n          resolve(url);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      });\r\n      // @ts-ignore\r\n      fileInput.click();\r\n    });\r\n  }\r\n}","import \"./messageBox.css\"\r\n\r\n// @ts-ignore\r\nconst cssConstants: CSSStyleDeclaration = getComputedStyle(document.querySelector(':root'));\r\nconst boxMargin: number = Number(cssConstants.getPropertyValue('--message-box-margin-num'));\r\n\r\nexport class MessageBox {\r\n\r\n  private static readonly hideTimeout: number = 5000;\r\n\r\n  private static box: HTMLDivElement = MessageBox.init();\r\n  private static hideIntervalId: NodeJS.Timeout;\r\n\r\n  private static init(): HTMLDivElement {\r\n    const box = document.createElement(\"div\");\r\n    box.classList.add(\"message-box\");\r\n    box.style.visibility = \"hidden\";\r\n    box.onmouseenter = () => {\r\n      MessageBox.clearHideTimeout();\r\n    }\r\n    box.onmouseleave = () => {\r\n      MessageBox.setHideTimeout();\r\n    }\r\n\r\n    const paragraph = document.createElement(\"p\");\r\n    box.appendChild(paragraph);\r\n\r\n    const button = document.createElement(\"button\");\r\n    button.innerText = \"\\u2716\";\r\n    button.onclick = () => {\r\n      MessageBox.hideBox();\r\n    }\r\n    box.appendChild(button);\r\n\r\n    window.addEventListener('resize', () => {\r\n      MessageBox.moveBox();\r\n    });\r\n\r\n    document.body.appendChild(box);\r\n    return box;\r\n  }\r\n\r\n  private static setHideTimeout = () => {\r\n    // clears previous hide interval\r\n    MessageBox.clearHideTimeout();\r\n    MessageBox.hideIntervalId = setTimeout(MessageBox.hideBox, MessageBox.hideTimeout);\r\n  }\r\n\r\n  private static clearHideTimeout = () => {\r\n    clearTimeout(MessageBox.hideIntervalId);\r\n  }\r\n\r\n  private static hideBox = () => {\r\n    MessageBox.box.style.visibility = \"hidden\";\r\n  }\r\n\r\n  private static moveBox = () => {\r\n    if (MessageBox.box.style.visibility === \"visible\") {\r\n      MessageBox.box.style.width = (document.body.clientWidth - 2 * boxMargin) + \"px\";\r\n    }\r\n  }\r\n\r\n  private static display(msg: string, error: boolean): void {\r\n    const box = MessageBox.box;\r\n    // @ts-ignore - first element is paragraph\r\n    box.firstElementChild.innerText = msg;\r\n    box.style.visibility = \"visible\";\r\n    box.classList.toggle(\"message-box-message\", !error);\r\n    box.classList.toggle(\"message-box-error\", error);\r\n    MessageBox.moveBox();\r\n    MessageBox.setHideTimeout();\r\n  }\r\n\r\n  /**\r\n   * Displays given message in a message box fixed on the page bottom.\r\n   */\r\n  public static message(msg: string): void {\r\n    MessageBox.display(msg, false);\r\n  }\r\n\r\n  /**\r\n   * Displays given error in a message box fixed on the page bottom.\r\n   */\r\n  public static error(msg: string): void {\r\n    MessageBox.display(msg, true);\r\n  }\r\n}","import React, {ChangeEvent} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {maxAvatarSize, PlayerStorage} from \"../../player/playerStorage\";\r\nimport {PlayerStats, sortPlayers} from \"../../player/playerStats\";\r\nimport {PlayerTable} from \"./playerTable\";\r\nimport \"./statsPage.css\";\r\nimport defaultAvatar from \"../../assets/imgs/default_avatar.png\";\r\nimport {FileDialog} from \"../../utils/fileDialog\";\r\nimport {MessageBox} from \"../messageBox\";\r\n\r\ninterface StatsPageProps {}\r\n\r\ninterface StatsPageState {\r\n  players: PlayerStats[];\r\n  newPlayerName: string;\r\n  avatar: any;\r\n}\r\n\r\n/**\r\n * Shows stats of stored players.\r\n */\r\nexport default class StatsPage extends React.Component<StatsPageProps, StatsPageState> {\r\n  constructor(props: StatsPageProps) {\r\n    super(props);\r\n    this.state = {\r\n      players: sortPlayers(PlayerStorage.getStoredPlayers()),\r\n      newPlayerName: \"\",\r\n      avatar: defaultAvatar\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Updates name of the new player.\r\n   */\r\n  private handleNewPlayerNameChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({ newPlayerName: event.target.value });\r\n  }\r\n\r\n  /**\r\n   * Creates a new player and saves it into the local storage.\r\n   */\r\n  private handleAddNewPlayer = () => {\r\n    const name = this.state.newPlayerName;\r\n    const avatar = this.state.avatar;\r\n    this.setState({\r\n      players: PlayerStorage.saveNewPlayer(name, avatar),\r\n      newPlayerName: \"\",\r\n      avatar: defaultAvatar\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Deletes the player with the given id from the local storage.\r\n   */\r\n  private handleDeletePlayer = (id: number) => {\r\n    this.setState({\r\n      players: PlayerStorage.removePlayer(id)\r\n    });\r\n  }\r\n\r\n  private changeAvatar = () => {\r\n    FileDialog.openPNG(maxAvatarSize)\r\n      .then(img => {\r\n        this.setState({avatar: img});\r\n        MessageBox.message(\"Avatar loaded successfully!\");\r\n      })\r\n      .catch(MessageBox.error);\r\n  }\r\n\r\n  render() {\r\n    const disabled: boolean =\r\n      this.state.newPlayerName === \"\" ||\r\n      this.state.players.some(p => p.name === this.state.newPlayerName);\r\n    return (\r\n      <section className=\"stats-page\">\r\n\r\n        <PlayerTable\r\n          players={this.state.players}\r\n          showWins={true}\r\n          showDelete={true}\r\n          onDelete={this.handleDeletePlayer}\r\n        />\r\n\r\n        <form>\r\n          <label htmlFor={\"new-player-input\"}>New player:</label>\r\n          <input\r\n            type=\"text\"\r\n            id={\"new-player-input\"}\r\n            value={this.state.newPlayerName}\r\n            placeholder=\"fill your name\"\r\n            maxLength={20}\r\n            spellCheck={false}\r\n            autoComplete={\"off\"}\r\n            onChange={this.handleNewPlayerNameChange}\r\n          />\r\n          <button onClick={this.handleAddNewPlayer} className=\"menu-button\" disabled={disabled}>Create</button>\r\n          <div onClick={this.changeAvatar}>\r\n            <img src={this.state.avatar} alt=\"avatar\"/>\r\n            <span>Load your avatar (PNG, max {maxAvatarSize} bytes)</span>\r\n          </div>\r\n        </form>\r\n\r\n        <Link className=\"menu-button link\" to=\"/\">Back</Link>\r\n      </section>\r\n    );\r\n  }\r\n}","/**\r\n * Wrapper of all audio effects in the application.\r\n */\r\nexport class AudioPlayer {\r\n\r\n  private static backgroundMusicAudio: HTMLAudioElement = AudioPlayer.initBackgroundMusic();\r\n\r\n  private static initBackgroundMusic(): HTMLAudioElement {\r\n    const a = new Audio();\r\n    a.src = \"background_music.mp3\";\r\n    a.loop = true;\r\n    a.volume = 0.4;\r\n    return a;\r\n  }\r\n\r\n  /**\r\n   * Plays the sound of tank shooting.\r\n   *\r\n   * @param volume default volume is 1\r\n   */\r\n  public static shotSound(volume: number = 1): void {\r\n    const a = new Audio();\r\n    a.src = \"tank_fire.mp3\";\r\n    a.volume = volume;\r\n    console.log(a);\r\n    a.play();\r\n  }\r\n\r\n  /**\r\n   * Plays the sound of explosion.\r\n   *\r\n   * @param volume default volume is 1\r\n   */\r\n  public static explosionSound(volume: number = 1): void {\r\n    const a = new Audio();\r\n    a.src = \"explosion.mp3\";\r\n    a.volume = volume;\r\n    a.play();\r\n  }\r\n\r\n  /**\r\n   * Starts playing the background music.\r\n   */\r\n  public static startBackgroundMusic(): void {\r\n    AudioPlayer.backgroundMusicAudio.play();\r\n  }\r\n\r\n  /**\r\n   * Pauses playing the background music.\r\n   */\r\n  public static pauseBackgroundMusic(): void {\r\n    AudioPlayer.backgroundMusicAudio.pause();\r\n  }\r\n}","import React from \"react\";\r\nimport {AudioPlayer} from \"../utils/audioPlayer\";\r\nimport \"./logo.css\"\r\n\r\ninterface LogoProps {\r\n  // default width is 150px\r\n  width?: number,\r\n  // default height is \"width / 3\"\r\n  height?: number\r\n}\r\n\r\ninterface LogoState {\r\n  timeouts: (NodeJS.Timeout | undefined)[];\r\n}\r\n\r\n/**\r\n * Animated application logo. When the user clicks on a grenade in the logo, fire sound plays and the grenade disappears\r\n * for 5 seconds.\r\n */\r\nexport class Logo extends React.Component<LogoProps, LogoState> {\r\n\r\n  constructor(props: LogoProps) {\r\n    super(props);\r\n    this.state = {\r\n      timeouts: [undefined, undefined, undefined, undefined]\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.state.timeouts.forEach(t => {\r\n      if (t !== undefined) {\r\n        clearInterval(t);\r\n      }\r\n    });\r\n  }\r\n\r\n  private shootGrenade = (i: number) => {\r\n    if (this.state.timeouts[i] === undefined) {\r\n      const timeouts = this.state.timeouts;\r\n      timeouts[i] = setTimeout(() => this.returnGrenade(i), 5000);\r\n\r\n      AudioPlayer.shotSound();\r\n\r\n      this.setState({timeouts: timeouts });\r\n    }\r\n  }\r\n\r\n  private returnGrenade = (i: number) => {\r\n    const timeouts = this.state.timeouts;\r\n    timeouts[i] = undefined;\r\n    this.setState({timeouts: timeouts });\r\n  }\r\n\r\n  public render() {\r\n    const w = this.props.width ? this.props.width : 150;\r\n    const h = this.props.height ? this.props.height : w / 3;\r\n\r\n    const classes = this.state.timeouts.map(t => t === undefined ? \"\" : \"ellipse-shot\");\r\n\r\n    return (\r\n      <svg width={`${w}px`} height={`${h}px`} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 150 50\" cursor=\"default\">\r\n          {/* T - TOP GRENADE - first grenade in array */}\r\n          <g id=\"t_top_grenade\" onClick={() => this.shootGrenade(0)}>\r\n            <ellipse className={classes[0]} stroke=\"#bfbf00\" ry=\"1.97183\" rx=\"12.25349\" id=\"svg_7\" cy=\"10.8451\" cx=\"16.61985\" opacity=\"undefined\" strokeDasharray=\"null\" strokeWidth=\"null\" fill=\"#bfbf00\"/>\r\n            <rect stroke=\"#a3a32a\" strokeOpacity=\"0\" id=\"svg_1\" height=\"5.63379\" width=\"18.8732\" y=\"8.02821\" x=\"18.45083\" opacity=\"undefined\" fill=\"#d1661f\"/>\r\n          </g>\r\n\r\n          {/* T - BOTTOM GRENADE - second grenade in array */}\r\n          <g transform=\"rotate(90 22,26) \" id=\"t_bottom_grenade\" onClick={() => this.shootGrenade(1)}>\r\n            <ellipse className={classes[1]} stroke=\"#bfbf00\" ry=\"1.97183\" rx=\"12.25349\" id=\"svg_9\" cy=\"25.6338\" cx=\"15.2114\" opacity=\"undefined\" strokeDasharray=\"null\" strokeWidth=\"null\" fill=\"#bfbf00\"/>\r\n            <rect strokeOpacity=\"0\" id=\"svg_10\" height=\"5.63379\" width=\"23.66192\" y=\"22.81691\" x=\"17.04238\" opacity=\"undefined\" stroke=\"#a3a32a\" fill=\"#d1661f\"/>\r\n          </g>\r\n\r\n          {/* TANKS */}\r\n          <text id=\"tanks_text\" fontStyle=\"normal\" fontWeight=\"bold\" xmlSpace=\"preserve\" textAnchor=\"start\" fontFamily=\"sans-serif\" fontSize=\"35\" y=\"43.80278\" x=\"26.47898\" opacity=\"undefined\" strokeOpacity=\"0\" strokeDasharray=\"null\" strokeWidth=\"0\" stroke=\"#a3a32a\" fill=\"#3f7f00\">anks</text>\r\n\r\n          {/* II - FIRST GRENADE - third grenade in array */}\r\n          <g transform=\"rotate(90 110,26)\" id=\"ii_first_grenade\" onClick={() => this.shootGrenade(2)}>\r\n            <ellipse className={classes[2]} stroke=\"#bfbf00\" ry=\"1.97183\" rx=\"12.25349\" id=\"svg_13\" cy=\"25.6338\" cx=\"103.38023\" opacity=\"undefined\" strokeDasharray=\"null\" strokeWidth=\"null\" fill=\"#bfbf00\"/>\r\n            <rect strokeOpacity=\"0\" id=\"svg_14\" height=\"5.63379\" width=\"23.66192\" y=\"22.81691\" x=\"105.21121\" opacity=\"undefined\" stroke=\"#a3a32a\" fill=\"#d1661f\"/>\r\n          </g>\r\n\r\n          {/* II - SECOND GRENADE - fourth grenade in array */}\r\n          <g transform=\"rotate(90 118,26) \" id=\"ii_second_grenade\" onClick={() => this.shootGrenade(3)}>\r\n            <ellipse className={classes[3]} stroke=\"#bfbf00\" ry=\"1.97183\" rx=\"12.25349\" id=\"svg_16\" cy=\"25.35211\" cx=\"111.12669\" opacity=\"undefined\" strokeDasharray=\"null\" strokeWidth=\"null\" fill=\"#bfbf00\"/>\r\n            <rect strokeOpacity=\"0\" id=\"svg_17\" height=\"5.63379\" width=\"23.66192\" y=\"22.53522\" x=\"112.95767\" opacity=\"undefined\" stroke=\"#a3a32a\" fill=\"#d1661f\"/>\r\n          </g>\r\n\r\n          {/* D */}\r\n          <text id=\"d_text\" fontStyle=\"normal\" fontWeight=\"bold\" xmlSpace=\"preserve\" textAnchor=\"start\" fontFamily=\"sans-serif\" fontSize=\"35\" y=\"44.36616\" x=\"120.98582\" opacity=\"undefined\" fillOpacity=\"null\" strokeOpacity=\"0\" strokeDasharray=\"null\" strokeWidth=\"null\" stroke=\"#a3a32a\" fill=\"#d1661f\">D</text>\r\n      </svg>\r\n    )\r\n  }\r\n}","const rgbRangeDecimal: number = 16777216;\r\n\r\n/**\r\n * Generates random RGB color string \"#......\".\r\n */\r\nexport function randomRGB(): string {\r\n  return (\r\n    \"#\" +\r\n    Math.floor(Math.random() * rgbRangeDecimal)\r\n      .toString(16)\r\n      .padStart(6, \"0\")\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport { newEmptyPlayer, PlayerStats } from \"../../player/playerStats\";\r\nimport { randomRGB } from \"../../utils/color\";\r\nimport \"./addPlayerMenu.css\";\r\n\r\ninterface AddPlayerMenuProps {\r\n  // index of the add player menu (used for menu ids)\r\n  index: number;\r\n  // player information to be displayed\r\n  player: PlayerStats;\r\n  // array of stored players to select from (or undefined, if menu shows quick player)\r\n  availableStoredPlayers: PlayerStats[] | undefined;\r\n  // handler of changing information about the displayed player\r\n  onPlayerChange: (player: PlayerStats) => void;\r\n  // handler of removing the menu\r\n  onRemove: () => void;\r\n  // handler of user's drag menu change\r\n  onDragChange: (from: number, to: number) => void;\r\n}\r\n\r\ninterface AddPlayerMenuState {}\r\n\r\n/**\r\n * Menu for setting name and color of one player.\r\n * When availableStoredPlayers is undefined, it shows an input for a quick player name.\r\n * Otherwise, it shows a select from available stored players.\r\n */\r\nexport default class AddPlayerMenu extends React.Component<\r\n  AddPlayerMenuProps,\r\n  AddPlayerMenuState\r\n> {\r\n  private isQuick(): boolean {\r\n    return this.props.availableStoredPlayers === undefined;\r\n  }\r\n\r\n  /**\r\n   * Changes the players name.\r\n   */\r\n  private handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.props.player.name = event.target.value;\r\n    this.props.onPlayerChange(this.props.player);\r\n  };\r\n\r\n  /**\r\n   * Changes the players color.\r\n   */\r\n  private handleColorChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.props.player.color = event.target.value;\r\n    this.props.onPlayerChange(this.props.player);\r\n  };\r\n\r\n  /**\r\n   * Changes the displayed player to the new selected stored one.\r\n   */\r\n  private handleStoredPlayerChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n    // @ts-ignore - availableStoredPlayers must be defined in stored-player version\r\n    const players: PlayerStats = this.props.availableStoredPlayers.filter(p => String(p.id) === event.target.value)[0];\r\n    this.props.onPlayerChange(\r\n      newEmptyPlayer(\r\n        players.id,\r\n        players.name,\r\n        players.color === \"\" ? randomRGB() : players.color,\r\n        players.avatar\r\n      )\r\n    );\r\n  };\r\n\r\n  // @ts-ignore\r\n  private handleDragStart = (e: DragEvent<HTMLDivElement>) => {\r\n    e.dataTransfer.setData(\"text/plain\", this.props.index);\r\n  }\r\n\r\n  // @ts-ignore\r\n  private handleDragOver = (e: DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  // @ts-ignore\r\n  private handleDragDrop = (e: DragEvent<HTMLDivElement>) => {\r\n    const from = Number(e.dataTransfer.getData(\"text/plain\"));\r\n    if (!isNaN(from)) {\r\n      this.props.onDragChange(from, this.props.index);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"add-player-menu\"\r\n           draggable={true}\r\n           onDragStart={this.handleDragStart}\r\n           onDragOver={this.handleDragOver}\r\n           onDrop={this.handleDragDrop}>\r\n        <header>\r\n          <img src={this.props.player.avatar} alt=\":(\"/>\r\n          <h4>\r\n            {this.isQuick() ? \"Quick\" : \"Stored\"} player {this.props.index + 1}:\r\n          </h4>\r\n          <button onClick={this.props.onRemove}>&#10006;</button>\r\n        </header>\r\n        {this.isQuick() ? (\r\n          // if it is a quick player, shows a name input field\r\n          <div>\r\n            <label htmlFor={\"name-input-player-\" + this.props.index}>\r\n              Name:\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id={\"name-input-player-\" + this.props.index}\r\n              value={this.props.player.name}\r\n              onChange={this.handleNameChange}\r\n              placeholder=\"fill your name\"\r\n              spellCheck={false}\r\n              autoComplete={\"off\"}\r\n              maxLength={20}\r\n            />\r\n          </div>\r\n        ) : (\r\n          // if it is a stored player, shows a player select field\r\n          <div>\r\n            <label htmlFor={\"select-player-\" + this.props.index}>Player:</label>\r\n            <select\r\n              id={\"select-player-\" + this.props.index}\r\n              value={this.props.player.id}\r\n              onChange={this.handleStoredPlayerChange}\r\n            >\r\n              {this.props.availableStoredPlayers && this.props.availableStoredPlayers.map(player => {\r\n                return <option key={player.id} value={player.id}>{player.name}</option>;\r\n              })}\r\n            </select>\r\n          </div>\r\n        )}\r\n        <div>\r\n          <label htmlFor={\"color-input-player-\" + this.props.index}>\r\n            Color:\r\n          </label>\r\n          <input\r\n            type=\"color\"\r\n            id={\"color-input-player-\" + this.props.index}\r\n            value={this.props.player.color}\r\n            onChange={this.handleColorChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { PlayerStorage } from \"../../player/playerStorage\";\r\nimport { newEmptyPlayer, PlayerStats } from \"../../player/playerStats\";\r\nimport { randomRGB } from \"../../utils/color\";\r\nimport AddPlayerMenu from \"./addPlayerMenu\";\r\nimport defaultAvatar from \"../../assets/imgs/default_avatar.png\";\r\nimport \"./newGamePage.css\";\r\n\r\ninterface NewGamePageProps {\r\n  // accepts the array of players selected for the game\r\n  onSubmit: (players: PlayerStats[]) => void;\r\n}\r\n\r\ninterface NewGamePageState {\r\n  // selected players for this game\r\n  participants: PlayerStats[];\r\n  // stored players which are not selected for this game yet\r\n  availableStored: PlayerStats[];\r\n  // ids of players which are not saved in local storage - they are negative\r\n  minUsedId: number;\r\n}\r\n\r\nconst minPlayers: number = 2;\r\nconst maxPlayers: number = 4;\r\n\r\n/**\r\n * Page with selection of current players for the game.\r\n * 2, 3, or 4 players must be added for the game to begin.\r\n * Quick or stored players can be added.\r\n */\r\nexport default class NewGamePage extends React.Component<NewGamePageProps, NewGamePageState> {\r\n  constructor(props: NewGamePageProps) {\r\n    super(props);\r\n    this.state = {\r\n      participants: [],\r\n      availableStored: PlayerStorage.getStoredPlayers(),\r\n      minUsedId: 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Adds a new quick player in the menu.\r\n   */\r\n  private handleAddQuickPlayer = (): void => {\r\n    const id = this.state.minUsedId - 1;\r\n    this.state.participants.push(newEmptyPlayer(id, \"\", randomRGB(), defaultAvatar));\r\n    this.setState({ minUsedId: id });\r\n  };\r\n\r\n  /**\r\n   * Adds a new available stored player in the menu.\r\n   */\r\n  private handleAddStoredPlayer = (): void => {\r\n    // @ts-ignore - the player is removed from the available array\r\n    const player: PlayerStats = this.state.availableStored.shift();\r\n    this.state.participants.push(newEmptyPlayer(player.id, player.name, randomRGB(), player.avatar));\r\n    this.setState({});\r\n  };\r\n\r\n  /**\r\n   * Removes the player from the menu.\r\n   */\r\n  private handleRemovePlayer = (index: number): void => {\r\n    const deleted = this.state.participants.splice(index, 1);\r\n    if (deleted[0].id > 0) {\r\n      // the stored player is returned to the available array\r\n      this.state.availableStored.push(deleted[0]);\r\n    }\r\n    this.setState({});\r\n  };\r\n\r\n  /**\r\n   * Updates a player info at the given index.\r\n   */\r\n  private handlePlayerChange = (player: PlayerStats, index: number): void => {\r\n    let available = this.state.availableStored;\r\n    const previous = this.state.participants[index];\r\n    // if the Stored player is updated...\r\n    if (previous.id > 0) {\r\n      // returns the previous player to the available array\r\n      this.state.availableStored.push(previous);\r\n      // removes the new player from the available array\r\n      available = this.state.availableStored.filter(p => p.id !== player.id);\r\n    }\r\n    const participants = this.state.participants;\r\n    participants[index] = player;\r\n    this.setState({ availableStored: available, participants: participants });\r\n  };\r\n\r\n  private handleDragChange = (from: number, to: number) => {\r\n    // dragging up\r\n    if (from > to) {\r\n      const before = this.state.participants.slice(0, to);\r\n      const moved = this.state.participants.slice(to, from);\r\n      const fromValue = this.state.participants[from];\r\n      const after = this.state.participants.slice(from + 1);\r\n      const newArray = [...before, fromValue, ...moved, ...after];\r\n      this.setState({participants: newArray});\r\n    }\r\n    // dragging down\r\n    else if (from < to) {\r\n      const before = this.state.participants.slice(0, from);\r\n      const fromValue = this.state.participants[from];\r\n      const moved = this.state.participants.slice(from + 1, to + 1);\r\n      const after = this.state.participants.slice(to + 1);\r\n      const newArray = [...before, ...moved, fromValue, ...after];\r\n      this.setState({participants: newArray});\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const playersCountError = this.state.participants.length < minPlayers;\r\n    const nameError = this.state.participants.some(p => p.name === \"\");\r\n    return (\r\n      <section className=\"new-game-page\">\r\n        <h3>New Game</h3>\r\n        {this.state.participants.map((p, i) => {\r\n          return (\r\n            <AddPlayerMenu\r\n              key={i}\r\n              index={i}\r\n              player={p}\r\n              availableStoredPlayers={\r\n                // for the concrete menu, the selected player is available too\r\n                p.id < 0 ? undefined : [p, ...this.state.availableStored]\r\n              }\r\n              onPlayerChange={player => this.handlePlayerChange(player, i)}\r\n              onRemove={() => this.handleRemovePlayer(i)}\r\n              onDragChange={this.handleDragChange}\r\n            />\r\n          );\r\n        })}\r\n        {// if the max player count was not reached, can add new quick players\r\n        this.state.participants.length < maxPlayers ? (\r\n          <button onClick={this.handleAddQuickPlayer} className=\"menu-button\">Quick player</button>\r\n        ) : null}\r\n        {// if the max player count was not reached and there are available stored players, can add them\r\n        this.state.participants.length < maxPlayers && this.state.availableStored.length > 0 ? (\r\n            <button onClick={this.handleAddStoredPlayer} className=\"menu-button\">Stored player</button>\r\n          ) : null}\r\n        <div>\r\n          <Link className=\"menu-button link\" to=\"/\">Back</Link>\r\n          <button\r\n            onClick={() => this.props.onSubmit(this.state.participants)}\r\n            disabled={playersCountError || nameError}\r\n            className=\"menu-button\">\r\n            {!playersCountError && !nameError && <span>Play</span>}\r\n            {playersCountError && <span>Please, add at least {minPlayers} players</span>}\r\n            {nameError && !playersCountError && <span>Please, fill all names</span>}\r\n          </button>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","export const BASE_CANVAS_WIDTH: number = 800;\r\nexport const BASE_CANVAS_HEIGHT: number = 320;\r\nexport const BASE_GROUND_START: number = 280;\r\nexport const BASE_GROUND_HEIGHT: number = BASE_CANVAS_HEIGHT - BASE_GROUND_START;\r\n\r\nexport const GUN_MOVEMENT_SPEED: number = 0.1;\r\nexport const TANK_MOVEMENT_SPEED: number = 0.06;\r\n\r\nexport const BASE_TANK_GUN_WIDTH: number = 4;\r\nexport const BASE_TANK_GUN_LENGTH: number = 15;\r\nexport const BASE_TANK_WIDTH: number = 30;\r\nexport const BASE_TANK_HEIGHT: number = 15;\r\n\r\nexport const OBSTACLE_PART_SIZE: number = 3;\r\n","/**\r\n * Abstract predecessor of all game objects. Provides common properties\r\n * color, x and y position and their setters and getters.\r\n */\r\nexport default abstract class GameObject {\r\n  protected color: string = \"\";\r\n  protected xPos: number = 0;\r\n  protected yPos: number = 0;\r\n\r\n  public setColor(color: string) {\r\n    this.color = color;\r\n  }\r\n\r\n  public getColor(): string {\r\n    return this.color;\r\n  }\r\n\r\n  public setXPos(xPos: number) {\r\n    this.xPos = xPos;\r\n  }\r\n\r\n  public diffXPos(xDif: number) {\r\n    this.xPos += xDif;\r\n  }\r\n\r\n  public getXPos(): number {\r\n    return this.xPos;\r\n  }\r\n\r\n  public setYPos(yPos: number) {\r\n    this.yPos = yPos;\r\n  }\r\n\r\n  public diffYPos(yDif: number) {\r\n    this.yPos += yDif;\r\n  }\r\n\r\n  public getYPos(): number {\r\n    return this.yPos;\r\n  }\r\n\r\n  /**\r\n   * Prints the game object at its current position.\r\n   * - canvas: canvas to draw on\r\n   * - ratio: ratio used for scaled drawing on resized canvas\r\n   */\r\n  public abstract show(ctx: CanvasRenderingContext2D, ratio: number): void;\r\n}\r\n","import GameObject from \"./gameObject\";\r\n\r\ninterface AnimationStep {\r\n  r: number;\r\n  color: string;\r\n}\r\n\r\nconst animationSteps: AnimationStep[][] = [\r\n  [{ r: 1, color: \"yellow\" }],\r\n  [{ r: 2, color: \"yellow\" }],\r\n  [{ r: 3, color: \"orange\" }, { r: 2, color: \"yellow\" }],\r\n  [\r\n    { r: 4, color: \"red\" },\r\n    { r: 3.5, color: \"orange\" },\r\n    { r: 2, color: \"yellow\" }\r\n  ],\r\n  [{ r: 1, color: \"orange\" }]\r\n];\r\n\r\nconst animationLen: number = animationSteps.length;\r\n\r\n/**\r\n * Game object representation of an explosion animation.\r\n */\r\nexport default class Explosion extends GameObject {\r\n  private readonly radius: number;\r\n  private t: number;\r\n\r\n  /**\r\n   * @param x x-center of explosion\r\n   * @param y y-center of explosion\r\n   * @param radius radius of explosion\r\n   * @param animationRate 0.2 for slow animations, 0.5 for fast animations\r\n   */\r\n  constructor(x: number, y: number, radius: number, private animationRate: 0.2 | 0.5) {\r\n    super();\r\n    this.xPos = x;\r\n    this.yPos = y;\r\n    this.radius = radius / 5;\r\n    this.t = 0;\r\n  }\r\n\r\n  /**\r\n   * True, if the animation has not ended yet.\r\n   */\r\n  public isAnimationOn(): boolean {\r\n    return this.t < animationLen;\r\n  }\r\n\r\n  /**\r\n   * Draws next frame of the explosion on the given canvas.\r\n   */\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    const currentStep = animationSteps[Math.floor(this.t)];\r\n    currentStep.forEach(c => this.drawCircle(ctx, ratio, c));\r\n    this.t += this.animationRate;\r\n  }\r\n\r\n  /**\r\n   * Draws a circle with explosion [x, y] center, given circle.r radius\r\n   * and circle.color color.\r\n   */\r\n  private drawCircle(\r\n    ctx: CanvasRenderingContext2D,\r\n    ratio: number,\r\n    circle: AnimationStep\r\n  ): void {\r\n    ctx.beginPath();\r\n    ctx.arc(\r\n      this.getXPos() * ratio,\r\n      this.getYPos() * ratio,\r\n      this.radius * circle.r * ratio,\r\n      0,\r\n      2 * Math.PI\r\n    );\r\n    ctx.fillStyle = circle.color;\r\n    ctx.fill();\r\n  }\r\n}\r\n","/**\r\n * Modulo operation with positive result for negative numbers (as % in JavaScript can give negative results).\r\n */\r\nexport function mod(n: number, m: number) {\r\n  return ((n % m) + m) % m;\r\n}\r\n\r\n/**\r\n * Floors the given number to whole hundrets.\r\n */\r\nexport function floorToHundret(x: number): number {\r\n  return Math.floor(x / 100) * 100;\r\n}\r\n\r\n/**\r\n * Computes euclidean distance of the given point [x, y] from origin [0, 0].\r\n */\r\nexport function euclideanOriginDistance(x: number, y: number): number {\r\n  return Math.sqrt(x ** 2 + y ** 2);\r\n}\r\n\r\n/**\r\n * Computes euclidean distance of the given points [xA, yA] and [xB, yB].\r\n */\r\nexport function euclideanDistance(\r\n  xA: number,\r\n  yA: number,\r\n  xB: number,\r\n  yB: number\r\n): number {\r\n  return euclideanOriginDistance(xA - xB, yA - yB);\r\n}\r\n","import GameObject from \"./gameObject\";\r\nimport Projectile from \"./projectile\";\r\n\r\n/**\r\n * Abstract predecessor of objects which can be hit by a projectile.\r\n */\r\nexport abstract class ColidingObject extends GameObject {\r\n  /**\r\n   * Returns true if the object was hit by the given projectile.\r\n   */\r\n  public abstract isCollision(p: Projectile): boolean;\r\n}\r\n","import {OBSTACLE_PART_SIZE} from \"../constants/constants\";\r\nimport { euclideanDistance } from \"../utils/math\";\r\nimport { ColidingObject } from \"./colidingObject\";\r\nimport Projectile from \"./projectile\";\r\n\r\n/**\r\n * Helper class representing one column in SquaredObstacle.\r\n */\r\nclass SquaredObstacleColumn extends ColidingObject {\r\n  private animationOn: boolean = false;\r\n  // squares in the columns - true means existing square, false means exploded square (an empty place)\r\n  private squares: string[];\r\n  // middle of the column in x-axis\r\n  private xCenter: number;\r\n  // time from the last animation start\r\n  private animationTime: number = 0;\r\n\r\n  constructor(xPos: number, yPos: number, squares: string[]) {\r\n    super();\r\n    this.squares = squares;\r\n    this.xPos = xPos;\r\n    this.xCenter = xPos + OBSTACLE_PART_SIZE / 2;\r\n    this.yPos = yPos;\r\n  }\r\n\r\n  /**\r\n   * If the obstacle is not in consistent state and the animation is on.\r\n   */\r\n  public isAnimationOn(): boolean {\r\n    return this.animationOn;\r\n  }\r\n\r\n  /**\r\n   * Checks whether given square s on index i is in collision distance with projectile.\r\n   */\r\n  private isSquareCollision(s: string, i: number, p: Projectile): boolean {\r\n    // if the square exists, computes its distance from projectile\r\n    if (s !== \"\") {\r\n      const yCenter = this.yPos - (i + 0.5) * OBSTACLE_PART_SIZE;\r\n      return (\r\n        euclideanDistance(this.xCenter, yCenter, p.getXPos(), p.getYPos()) <\r\n        p.getRadius() + OBSTACLE_PART_SIZE\r\n      );\r\n    }\r\n    // if the square does not exist, cannot be collided\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Changes squares in explosion radius to false.\r\n   */\r\n  private squareCollide(s: string, i: number, p: Projectile): void {\r\n    // if the square exists, computes its distance from projectile\r\n    if (s !== \"\") {\r\n      const yCenter = this.yPos - (i + 0.5) * OBSTACLE_PART_SIZE;\r\n      if (\r\n        euclideanDistance(this.xCenter, yCenter, p.getXPos(), p.getYPos()) <\r\n        p.getExplosionRadius() / 2 + OBSTACLE_PART_SIZE * 1.5\r\n      ) {\r\n        this.squares[i] = \"\";\r\n        this.animationOn = true;\r\n        this.animationTime = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Pops false squares from column top. Checks whether there are some false\r\n   * squares in between true squares and updates this.animationOn (to true, if\r\n   * there is any false under true, so the true has to fall down).\r\n   */\r\n  private checkConsistency(): void {\r\n    // removes false (exploded) squares from top\r\n    while (this.squares[this.squares.length - 1] === \"\") {\r\n      this.squares.pop();\r\n    }\r\n    // if there is still some false, animation has not ended\r\n    this.animationOn = this.squares.some(s => s === \"\");\r\n  }\r\n\r\n  /**\r\n   * Moves the true squares above empty place down if it is animation time.\r\n   */\r\n  private animate(): void {\r\n    if (this.isAnimationTime()) {\r\n      let falseFound: boolean = false;\r\n      for (let i = 0; i < this.squares.length; ++i) {\r\n        if (this.squares[i] === \"\") {\r\n          falseFound = true;\r\n        }\r\n        // if there is some square above empty place, moves it down\r\n        if (this.squares[i] !== \"\" && falseFound) {\r\n          this.squares[i - 1] = this.squares[i];\r\n          this.squares[i] = \"\";\r\n        }\r\n      }\r\n    }\r\n    ++this.animationTime;\r\n  }\r\n\r\n  /**\r\n   * Returns true if the animation should continue in this time step.\r\n   */\r\n  private isAnimationTime(): boolean {\r\n    return (\r\n      this.animationTime === 6 ||\r\n      this.animationTime === 10 ||\r\n      this.animationTime >= 12\r\n    );\r\n  }\r\n\r\n  public isCollision(p: Projectile): boolean {\r\n    // if the projectile is outside x boundary, returns false\r\n    if (\r\n      p.getXPos() + p.getRadius() < this.getXPos() ||\r\n      p.getXPos() - p.getRadius() > this.getXPos() + OBSTACLE_PART_SIZE\r\n    ) {\r\n      return false;\r\n    }\r\n    return this.squares.some((s, i) => this.isSquareCollision(s, i, p));\r\n  }\r\n\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    this.animate();\r\n    this.squares.forEach((s, i) => {\r\n      if (s !== \"\") {\r\n        ctx.fillStyle = s;\r\n        ctx.fillRect(\r\n          Math.ceil(this.xPos * ratio),\r\n          Math.ceil((this.yPos - (i + 1) * OBSTACLE_PART_SIZE) * ratio),\r\n          Math.ceil(OBSTACLE_PART_SIZE * ratio),\r\n          Math.ceil(OBSTACLE_PART_SIZE * ratio)\r\n        );\r\n      }\r\n    });\r\n    this.checkConsistency();\r\n  }\r\n\r\n  public collide(p: Projectile): void {\r\n    // if the projectile is outside x boundary, cannot collide\r\n    if (\r\n      p.getXPos() + p.getExplosionRadius() < this.getXPos() ||\r\n      p.getXPos() - p.getExplosionRadius() > this.getXPos() + OBSTACLE_PART_SIZE\r\n    ) {\r\n      return;\r\n    }\r\n    this.squares.forEach((s, i) => this.squareCollide(s, i, p));\r\n    this.checkConsistency();\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    return this.squares.length === 0;\r\n  }\r\n}\r\n\r\n/**\r\n * Obstacle created from square parts. Squares are animated to fall down after collision.\r\n */\r\nexport class SquaredObstacle extends ColidingObject {\r\n  private animationOn: boolean = false;\r\n  private columns: SquaredObstacleColumn[];\r\n  private columnsCount: number;\r\n  private highest: number;\r\n\r\n  public constructor(xPos: number, yPos: number, squares: string[][]) {\r\n    super();\r\n    this.columns = squares.map((s, i) => new SquaredObstacleColumn(xPos + i * OBSTACLE_PART_SIZE, yPos, s));\r\n    this.columnsCount = this.columns.length;\r\n    this.xPos = xPos;\r\n    this.yPos = yPos;\r\n    this.highest = Math.max(...squares.map(s => s.length));\r\n  }\r\n\r\n  /**\r\n   * If margin columns are empty, removes them from the array and updates position/width.\r\n   */\r\n  private filterMarginColumns(): void {\r\n    while (this.columns.length > 0 && this.columns[0].isEmpty()) {\r\n      this.columns.shift();\r\n      this.xPos += OBSTACLE_PART_SIZE;\r\n      this.columnsCount -= 1;\r\n    }\r\n    while (\r\n      this.columns.length > 0 &&\r\n      this.columns[this.columns.length - 1].isEmpty()\r\n    ) {\r\n      this.columns.pop();\r\n      this.columnsCount -= 1;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If the obstacle is not in consistent state and the animation is on.\r\n   */\r\n  public isAnimationOn(): boolean {\r\n    return this.animationOn;\r\n  }\r\n\r\n  /**\r\n   * Returns number of columns of the obstacle (counting inner empty columns).\r\n   * When returns 0, it means that the obstacle is destroyed.\r\n   */\r\n  public getColumnsCount(): number {\r\n    return this.columnsCount;\r\n  }\r\n\r\n  public isCollision(p: Projectile): boolean {\r\n    // if the projectile is outside boundary rectangle, returns false\r\n    if (\r\n      p.getXPos() + p.getRadius() < this.xPos ||\r\n      p.getXPos() - p.getRadius() > this.xPos + this.columnsCount * OBSTACLE_PART_SIZE ||\r\n      p.getYPos() + p.getRadius() < this.yPos - this.highest * OBSTACLE_PART_SIZE\r\n    ) {\r\n      return false;\r\n    }\r\n    // if any obstacle column was hit, returns true\r\n    return this.columns.some(c => c.isCollision(p));\r\n  }\r\n\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    this.columns.forEach(c => c.show(ctx, ratio));\r\n    if (this.animationOn) {\r\n      this.animationOn = this.columns.some(col => col.isAnimationOn());\r\n    }\r\n    this.filterMarginColumns();\r\n  }\r\n\r\n  public collide(p: Projectile): void {\r\n    // if the projectile is outside boundary rectangle, collision cannot happen\r\n    if (\r\n      p.getXPos() + p.getExplosionRadius() < this.getXPos() ||\r\n      p.getXPos() - p.getExplosionRadius() > this.getXPos() + this.getColumnsCount() * OBSTACLE_PART_SIZE ||\r\n      p.getYPos() + p.getExplosionRadius() < this.yPos - this.highest * OBSTACLE_PART_SIZE\r\n    ) {\r\n      return;\r\n    }\r\n    // otherwise tries hit columns\r\n    this.columns.forEach(c => c.collide(p));\r\n    this.animationOn = this.columns.some(col => col.isAnimationOn());\r\n  }\r\n}\r\n","import { OBSTACLE_PART_SIZE } from \"../constants/constants\";\r\nimport { SquaredObstacle } from \"./squaredObstacle\";\r\n\r\n/**\r\n * Factory for generating game obstacles.\r\n */\r\nexport class ObstacleFactory {\r\n  /**\r\n   * Returns random obstacle.\r\n   */\r\n  public random(xLeft: number, yBottom: number): SquaredObstacle {\r\n    const methods = Object.getOwnPropertyNames(ObstacleFactory.prototype)\r\n      .filter(m => m !== \"random\" && m !== \"constructor\");\r\n    const index = Math.floor(Math.random() * methods.length);\r\n    // @ts-ignore\r\n    return this[methods[index]](xLeft, yBottom);\r\n  }\r\n\r\n  /**\r\n   * 22x17 house.\r\n   */\r\n  public house(xLeft: number, yBottom: number): SquaredObstacle {\r\n    const walls = [\"#222222\", \"#333333\", \"#444444\", \"#555555\"];\r\n    const w = walls[Math.floor(Math.random() * walls.length)]; // walls\r\n    const doors = [\"#8e350b\", \"#ac552f\"];\r\n    const d = doors[Math.floor(Math.random() * doors.length)]; // door\r\n    const g = \"lightblue\"; // glass\r\n    const roofs = [\"#981f1f\", \"#ff0000\"];\r\n    const r = roofs[Math.floor(Math.random() * roofs.length)]; // roof\r\n    const squares = [\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r],\r\n      [w, d, d, d, d, d, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, d, d, d, d, d, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, d, d, d, d, d, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, g, g, g, w, w, w, g, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r]\r\n    ];\r\n    return new SquaredObstacle(\r\n      xLeft - (squares.length * OBSTACLE_PART_SIZE) / 2,\r\n      yBottom,\r\n      squares\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 39x17 factory with 2 3x29-chimneys\r\n   */\r\n  public factory(xLeft: number, yBottom: number): SquaredObstacle {\r\n    const walls = [\"#222222\", \"#333333\", \"#444444\", \"#555555\"];\r\n    const w = walls[Math.floor(Math.random() * walls.length)]; // walls\r\n    const doors = [\"#8e350b\", \"#ac552f\", \"#000000\"];\r\n    const d = doors[Math.floor(Math.random() * doors.length)]; // door\r\n    const g = \"lightblue\"; // glass\r\n    const roofs = [\"#981f1f\", \"#ff0000\"];\r\n    const r = roofs[Math.floor(Math.random() * roofs.length)]; // roof\r\n    const s = \"black\"; // details\r\n    const squares = [\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [\r\n        w,\r\n        w,\r\n        w,\r\n        w,\r\n        s,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        g,\r\n        w,\r\n        w,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s,\r\n        s\r\n      ],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, s, w, w, w, w, w, w, w, w, w, w, s, s, s],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w, s, s, s],\r\n      [w, w, w, w, s, g, g, g, g, g, g, g, g, w, w],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, w],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r],\r\n      [d, d, d, d, d, w, w, w, w, w, g, g, w, w, r, r],\r\n      [d, d, d, d, d, d, w, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, d, d, w, w, w, w, w, w, w, r, r, r],\r\n      [d, d, d, d, d, d, d, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, d, d, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, d, w, w, w, w, w, w, w, w, r, r, r],\r\n      [d, d, d, d, d, w, w, w, w, w, g, g, w, w, r, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, w, w, w, w, w, w, w, w, w, r, r, r],\r\n      [d, d, d, d, d, w, w, w, w, w, g, g, w, w, r, r, r],\r\n      [d, d, d, d, d, w, w, w, w, w, g, g, w, w, r, r],\r\n      [w, w, w, w, w, w, w, w, w, w, w, w, w, w, r]\r\n    ];\r\n    return new SquaredObstacle(\r\n      xLeft - (squares.length * OBSTACLE_PART_SIZE) / 2,\r\n      yBottom,\r\n      squares\r\n    );\r\n  }\r\n}\r\n","import { getRandomSubarray } from \"../utils/array\";\r\nimport { mod } from \"../utils/math\";\r\nimport Projectile, { ProjectileStats } from \"./projectile\";\r\n\r\nenum ProjIndex {\r\n  STANDARD,\r\n  BIG,\r\n  MULTI,\r\n\r\n  TOTAL_COUNT\r\n}\r\n\r\ntype ProjInfo = ProjectileStats & {\r\n  name: string;\r\n  description: string;\r\n};\r\n\r\nconst PROJ_INFOS: ProjInfo[] = [\r\n  {\r\n    name: \"Standard\",\r\n    description: \"Standard ammo\",\r\n    radius: 2,\r\n    speed: 1,\r\n    explosionRadius: 25,\r\n    damage: 11,\r\n    mass: 5\r\n  },\r\n  {\r\n    name: \"Big\",\r\n    description: \"Short range, big dmg\",\r\n    radius: 3,\r\n    speed: 0.5,\r\n    explosionRadius: 35,\r\n    damage: 23,\r\n    mass: 15\r\n  },\r\n  {\r\n    name: \"Multi\",\r\n    description: \"5 shots at once\",\r\n    radius: 1,\r\n    speed: 0.8,\r\n    explosionRadius: 23,\r\n    damage: 5,\r\n    mass: 5\r\n  }\r\n];\r\nconst PROJ_DESCRIPTIONS: string[] = PROJ_INFOS.map(info => {\r\n  return (\r\n    info.description +\r\n    \"\\nDamage: \" +\r\n    info.damage +\r\n    \"\\nSpeed coefficient: \" +\r\n    info.speed +\r\n    \"\\nExplosion: \" +\r\n    info.explosionRadius\r\n  );\r\n});\r\n\r\nconst MULTI_COUNT: number = 5;\r\nconst MULTI_ANGLE_ERRORS: number[] = [-11, -9, -7, -5, -3, 0, 3, 5, 7, 9, 11];\r\nexport const LARGEST_PROJ_DMG = Math.max(...PROJ_INFOS.map(i => i.damage));\r\n\r\n/**\r\n * Tank magazine with projectiles. Provides projectile management.\r\n */\r\nexport default class Magazine {\r\n  private projectiles: number[];\r\n  private curIndex: number;\r\n\r\n  public constructor(big: number, multi: number) {\r\n    this.projectiles = [Infinity, big, multi];\r\n    this.curIndex = 0;\r\n  }\r\n\r\n  /**\r\n   * Returns new instance of current selected projectile type.\r\n   */\r\n  public getProjectile(playerId: number): Projectile[] {\r\n    if (this.curIndex === ProjIndex.BIG) {\r\n      if (--this.projectiles[this.curIndex] === 0) {\r\n        this.loadNext();\r\n      }\r\n      return [new Projectile(playerId, PROJ_INFOS[ProjIndex.BIG])];\r\n    } else if (this.curIndex === ProjIndex.MULTI) {\r\n      if (--this.projectiles[this.curIndex] === 0) {\r\n        this.loadNext();\r\n      }\r\n      return getRandomSubarray(MULTI_ANGLE_ERRORS, MULTI_COUNT).map(ae => {\r\n        return new Projectile(playerId, PROJ_INFOS[ProjIndex.MULTI], ae);\r\n      });\r\n    } else {\r\n      return [new Projectile(playerId, PROJ_INFOS[ProjIndex.STANDARD])];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns short string description of the current selected projectile type.\r\n   */\r\n  public getCurrentProjectileShortStats(): string {\r\n    if (this.curIndex === ProjIndex.STANDARD) {\r\n      return PROJ_INFOS[this.curIndex].name;\r\n    }\r\n    return `${PROJ_INFOS[this.curIndex].name} (${\r\n      this.projectiles[this.curIndex]\r\n    })`;\r\n  }\r\n\r\n  /**\r\n   * Returns long string description of the current selected projectile type.\r\n   */\r\n  public getCurrentProjectileLongStats(): string {\r\n    return PROJ_DESCRIPTIONS[this.curIndex];\r\n  }\r\n\r\n  /**\r\n   * Changes current selected type to the next one. Skips types with zero\r\n   * available projectiles.\r\n   */\r\n  public loadNext(): void {\r\n    this.curIndex = mod(this.curIndex + 1, ProjIndex.TOTAL_COUNT);\r\n    // does not show zero counts\r\n    if (this.projectiles[this.curIndex] === 0) {\r\n      this.loadNext();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Changes current selected type to the previous one. Skips types with zero\r\n   * available projectiles.\r\n   */\r\n  public loadPrev(): void {\r\n    this.curIndex = mod(this.curIndex - 1, ProjIndex.TOTAL_COUNT);\r\n    // does not show zero counts\r\n    if (this.projectiles[this.curIndex] === 0) {\r\n      this.loadPrev();\r\n    }\r\n  }\r\n}\r\n","import { euclideanDistance } from \"../utils/math\";\r\nimport GameObject from \"./gameObject\";\r\nimport {AudioPlayer} from \"../utils/audioPlayer\";\r\nimport {LARGEST_PROJ_DMG} from \"./magazine\";\r\n\r\nexport interface ProjectileStats {\r\n  radius: number;\r\n  speed: number;\r\n  explosionRadius: number;\r\n  damage: number;\r\n  mass: number;\r\n}\r\n\r\n/**\r\n * Representation of the fired projectile.\r\n */\r\nexport default class Projectile extends GameObject {\r\n  private exploded: boolean = false;\r\n  private t: number = 0;\r\n\r\n  private readonly radius: number;\r\n  private speed: number;\r\n  private readonly explosionRadius: number;\r\n  private readonly damage: number;\r\n  private readonly mass: number;\r\n\r\n  private xInit: number = 0;\r\n  private yInit: number = 0;\r\n\r\n  private angleCos: number = 0;\r\n  private angleSin: number = 0;\r\n\r\n  private windXDiff: number = 0;\r\n\r\n  public constructor(\r\n    private readonly originId: number,\r\n    stats: ProjectileStats,\r\n    private readonly angleErr: number = 0\r\n  ) {\r\n    super();\r\n    this.radius = stats.radius;\r\n    this.speed = stats.speed;\r\n    this.explosionRadius = stats.explosionRadius;\r\n    this.damage = stats.damage;\r\n    this.mass = stats.mass;\r\n    this.color = \"black\";\r\n  }\r\n\r\n  public getXPos(): number {\r\n    return this.xPos + this.windXDiff;\r\n  }\r\n\r\n  public getOriginId(): number {\r\n    return this.originId;\r\n  }\r\n\r\n  public getRadius(): number {\r\n    return this.radius;\r\n  }\r\n\r\n  public getSpeed(): number {\r\n    return this.speed;\r\n  }\r\n\r\n  public getExplosionRadius(): number {\r\n    return this.explosionRadius;\r\n  }\r\n\r\n  public getDamage(): number {\r\n    return this.damage;\r\n  }\r\n\r\n  public getMass(): number {\r\n    return this.mass;\r\n  }\r\n\r\n  public isExploded(): boolean {\r\n    return this.exploded;\r\n  }\r\n\r\n  public explode(): void {\r\n    AudioPlayer.explosionSound(this.damage / LARGEST_PROJ_DMG);\r\n    this.exploded = true;\r\n  }\r\n\r\n  /**\r\n   * Launches the projectile from given [x, y] point in given angle\r\n   * (angle is expected with 0 value in vertical direction, -90 means\r\n   * horizontal left direction, 90 means horizontal right direction).\r\n   * The given speed is expected in range 0-100.\r\n   */\r\n  public launch(xInit: number, yInit: number, angle: number, speed: number) {\r\n    this.xInit = xInit;\r\n    this.yInit = yInit;\r\n    this.speed *= speed / 10;\r\n    // applies angle error\r\n    angle += this.angleErr;\r\n    // moves angle to expected range\r\n    if (angle < 0) {\r\n      angle += 90;\r\n      this.angleCos = -Math.cos((angle * Math.PI) / 180);\r\n    } else {\r\n      angle = 90 - angle;\r\n      this.angleCos = Math.cos((angle * Math.PI) / 180);\r\n    }\r\n    this.angleSin = Math.sin((angle * Math.PI) / 180);\r\n    this.xPos = xInit;\r\n    this.yPos = yInit;\r\n    this.windXDiff = 0;\r\n  }\r\n\r\n  /**\r\n   * Updates projectile position and effect of the wind.\r\n   *\r\n   * @param wind wind value\r\n   * @param dt time delta\r\n   */\r\n  public move(wind: number, dt: number) {\r\n    this.t += dt / 16;\r\n    const xPrev = this.xPos;\r\n    const yPrev = this.yPos;\r\n\r\n    this.xPos = this.xInit + this.speed * this.t * this.angleCos;\r\n    this.yPos =\r\n      this.yInit - this.speed * this.t * this.angleSin + this.t ** 2 / 20;\r\n\r\n    const diff = euclideanDistance(xPrev, yPrev, this.xPos, this.yPos) + 10;\r\n    this.windXDiff += (wind * Math.log(this.t)) / (diff * this.mass);\r\n  }\r\n\r\n  /**\r\n   * Draws the projectile on given canvas with given size-ratio.\r\n   */\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    ctx.beginPath();\r\n    ctx.arc(\r\n      this.getXPos() * ratio,\r\n      this.getYPos() * ratio,\r\n      this.getRadius() * ratio,\r\n      0,\r\n      2 * Math.PI\r\n    );\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n  }\r\n\r\n  /**\r\n   * Returns true, if the whole projectile is in the given rectangle.\r\n   */\r\n  public isInRange(\r\n    minX: number,\r\n    minY: number,\r\n    maxX: number,\r\n    maxY: number\r\n  ): boolean {\r\n    return (\r\n      this.getXPos() + this.getRadius() > minX &&\r\n      this.getXPos() - this.getRadius() < maxX &&\r\n      this.getYPos() + this.getRadius() > minY &&\r\n      this.getYPos() - this.getRadius() < maxY\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Returns true, if the projectile is in the given range or there is a chance\r\n   * to return back in it (it is outside but the wind blows in).\r\n   */\r\n  public canReturnToRange(minX: number, maxX: number, maxY: number): boolean {\r\n    if (this.yPos > maxY) {\r\n      return false;\r\n    }\r\n    if (this.xPos < minX && this.windXDiff < 0) {\r\n      return false;\r\n    }\r\n    return !(this.xPos > maxX && this.windXDiff > 0);\r\n\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport NewGamePage from \"./newGamePage\";\r\nimport {GameArea} from \"../game/gameArea\";\r\nimport {PlayerStorage} from \"../../player/playerStorage\";\r\nimport {ResultsPage} from \"./resultsPage\";\r\nimport {PlayerStats} from \"../../player/playerStats\";\r\n\r\nenum PlayingPhase {\r\n  NEW_GAME,\r\n  GAME,\r\n  RESULTS\r\n}\r\n\r\ninterface PlayWrapperProps {}\r\n\r\ninterface PlayWrapperState {\r\n  phase: PlayingPhase;\r\n  currentPlayers: PlayerStats[];\r\n}\r\n\r\n/**\r\n * Wrapper of game-playing parts that should be under one common link.\r\n */\r\nexport class PlayWrapper extends React.Component<PlayWrapperProps, PlayWrapperState> {\r\n  constructor(props: PlayWrapperProps) {\r\n    super(props);\r\n    this.state = {\r\n      phase: PlayingPhase.NEW_GAME,\r\n      currentPlayers: []\r\n    }\r\n  }\r\n\r\n  private renderNewGamePage = () => {\r\n    return (\r\n      <NewGamePage\r\n        onSubmit={players => this.setState({ phase: PlayingPhase.GAME, currentPlayers: players })}\r\n      />\r\n    );\r\n  };\r\n\r\n  private renderGame = () => {\r\n    return (\r\n      <GameArea\r\n        players={this.state.currentPlayers}\r\n        onEnd={players => {\r\n          players.forEach(p => PlayerStorage.updatePlayer(p));\r\n          this.setState({\r\n            phase: PlayingPhase.RESULTS,\r\n            currentPlayers: players\r\n          });\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  private renderResults = () => {\r\n    return <ResultsPage players={this.state.currentPlayers} />;\r\n  };\r\n\r\n  render() {\r\n    return (<>\r\n      {this.state.phase === PlayingPhase.NEW_GAME && this.renderNewGamePage()}\r\n      {this.state.phase === PlayingPhase.GAME && this.renderGame()}\r\n      {this.state.phase === PlayingPhase.RESULTS && this.renderResults()}\r\n    </>);\r\n  }\r\n}","/**\r\n * Returns an array of given size with randomly chosen entries from the given array.\r\n * Rewritten to TypeScript from: https://stackoverflow.com/a/11935263\r\n */\r\nexport function getRandomSubarray<T>(arr: T[], size: number): T[] {\r\n  let shuffled: T[] = arr.slice(0);\r\n  let i = arr.length;\r\n  let min = i - size;\r\n  let temp: T;\r\n  let index;\r\n  while (i-- > min) {\r\n    index = Math.floor((i + 1) * Math.random());\r\n    temp = shuffled[index];\r\n    shuffled[index] = shuffled[i];\r\n    shuffled[i] = temp;\r\n  }\r\n  return shuffled.slice(min);\r\n}\r\n","import { BASE_TANK_GUN_WIDTH } from \"../constants/constants\";\r\nimport { BASE_TANK_GUN_LENGTH } from \"../constants/constants\";\r\nimport { BASE_TANK_HEIGHT } from \"../constants/constants\";\r\nimport { BASE_TANK_WIDTH } from \"../constants/constants\";\r\nimport { PlayerStats } from \"../player/playerStats\";\r\nimport { ColidingObject } from \"./colidingObject\";\r\nimport Magazine from \"./magazine\";\r\nimport Projectile from \"./projectile\";\r\n\r\n/**\r\n * Tank for the GameArea.\r\n * It works with 2 postion/size scales:\r\n * - base scale for inner representation (saved position, collision computation)\\\r\n * - ratio-scaled for printing on screen\r\n */\r\nexport default class Tank extends ColidingObject {\r\n  private player: PlayerStats;\r\n  private health: number = 20;\r\n\r\n  private gunAngle: number = 0;\r\n  private magazine: Magazine = new Magazine(3, 3);\r\n  private lastLaunchSpeed: number = 50;\r\n\r\n  public constructor(player: PlayerStats) {\r\n    super();\r\n    this.player = player;\r\n    this.setColor(player.color);\r\n  }\r\n\r\n  public getPlayer(): PlayerStats {\r\n    return this.player;\r\n  }\r\n\r\n  public getId(): number {\r\n    return this.player.id;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this.player.name;\r\n  }\r\n\r\n  /**\r\n   * Returns true, if the changed health is <= 0.\r\n   */\r\n  public receiveDamage(dmg: number): boolean {\r\n    this.health -= dmg;\r\n    this.player.dmgReceived += dmg;\r\n    if (this.health <= 0) {\r\n      this.health = 0;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public getHealth(): number {\r\n    return this.health;\r\n  }\r\n\r\n  public isAlive(): boolean {\r\n    return this.health > 0;\r\n  }\r\n\r\n  /**\r\n   * Changes the dealt damage by given difference.\r\n   */\r\n  public changeDamageDealt(diff: number): void {\r\n    this.player.dmgDealt += diff;\r\n  }\r\n\r\n  public getDamageDealt(): number {\r\n    return this.player.dmgDealt;\r\n  }\r\n\r\n  public addKill(): void {\r\n    this.player.kills += 1;\r\n  }\r\n\r\n  public getKills(): number {\r\n    return this.player.kills;\r\n  }\r\n\r\n  public getLastLaunchSpeed(): number {\r\n    return this.lastLaunchSpeed;\r\n  }\r\n\r\n  /**\r\n   * Changes the gun angle by given difference. It does not go outside <-90, 90> range.\r\n   */\r\n  public moveGun(angleDif: number) {\r\n    this.gunAngle += angleDif;\r\n    if (this.gunAngle < -90) {\r\n      this.gunAngle = -90;\r\n    } else if (this.gunAngle > 90) {\r\n      this.gunAngle = 90;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fires current selected projectile. The starting position is the end of the gun.\r\n   * The given speed is expected in range 0-100.\r\n   * NOTE: The position of projectiles is not scaled by current game sizeRation.\r\n   */\r\n  public fire(speed: number): Projectile[] {\r\n    this.lastLaunchSpeed = speed;\r\n    // get current projectiles from the magazine\r\n    const projectiles: Projectile[] = this.magazine.getProjectile(\r\n      this.player.id\r\n    );\r\n    // sets their initial position\r\n    projectiles.forEach(p =>\r\n      p.launch(this.xGunEnd(), this.yGunEnd(), this.gunAngle, speed)\r\n    );\r\n    return projectiles;\r\n  }\r\n\r\n  /**\r\n   * Loads next projectile type in the magazine.\r\n   */\r\n  public loadNextProjectile(): void {\r\n    this.magazine.loadNext();\r\n  }\r\n\r\n  /**\r\n   * Loads previous projectile type in the magazine.\r\n   */\r\n  public loadPrevProjectile(): void {\r\n    this.magazine.loadPrev();\r\n  }\r\n\r\n  /**\r\n   * Gets short information about current selected projectile.\r\n   */\r\n  public getCurrentProjectileShortStats(): string {\r\n    return this.magazine.getCurrentProjectileShortStats();\r\n  }\r\n\r\n  /**\r\n   * Gets long information about current selected projectile.\r\n   */\r\n  public getCurrentProjectileLongStats(): string {\r\n    return this.magazine.getCurrentProjectileLongStats();\r\n  }\r\n\r\n  public isCollision(p: Projectile): boolean {\r\n    return (\r\n      // if they are in collision y-range\r\n      p.getYPos() + p.getRadius() > this.getYPos() - BASE_TANK_HEIGHT &&\r\n      p.getYPos() - p.getRadius() < this.getYPos() &&\r\n      // and collision x-range\r\n      p.getXPos() + p.getRadius() > this.getXPos() &&\r\n      p.getXPos() - p.getRadius() < this.getXPos() + BASE_TANK_WIDTH\r\n    );\r\n  }\r\n\r\n  public show(ctx: CanvasRenderingContext2D, ratio: number): void {\r\n    // draws gun\r\n    ctx.beginPath();\r\n    ctx.lineWidth = BASE_TANK_GUN_WIDTH * ratio;\r\n    ctx.save();\r\n    ctx.translate(\r\n      (this.xPos + BASE_TANK_WIDTH / 2) * ratio,\r\n      (this.yPos - BASE_TANK_HEIGHT) * ratio\r\n    );\r\n    ctx.rotate((this.gunAngle * Math.PI) / 180);\r\n    ctx.moveTo(0, 5);\r\n    ctx.lineTo(0, -(BASE_TANK_GUN_LENGTH * ratio));\r\n    ctx.stroke();\r\n    ctx.rotate(-this.gunAngle);\r\n    ctx.restore();\r\n    // draws tank\r\n    ctx.fillStyle = this.color;\r\n    ctx.fillRect(\r\n      this.xPos * ratio,\r\n      (this.yPos - BASE_TANK_HEIGHT) * ratio,\r\n      BASE_TANK_WIDTH * ratio,\r\n      BASE_TANK_HEIGHT * ratio\r\n    );\r\n  }\r\n\r\n  /*\r\n   * Computes the not-scaled x-end of the gun.\r\n   */\r\n  private xGunEnd(): number {\r\n    return (\r\n      this.xPos +\r\n      BASE_TANK_WIDTH / 2 +\r\n      Math.sin((this.gunAngle * Math.PI) / 180) * BASE_TANK_GUN_LENGTH * 1.1\r\n    );\r\n  }\r\n\r\n  /*\r\n   * Computes the not-scaled y-end of the gun.\r\n   */\r\n  private yGunEnd(): number {\r\n    return (\r\n      this.yPos -\r\n      BASE_TANK_HEIGHT -\r\n      Math.cos((this.gunAngle * Math.PI) / 180) * BASE_TANK_GUN_LENGTH * 1.1\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.832d76fd.svg\";","import * as React from \"react\";\r\nimport Tank from \"../../game_objects/tank\";\r\nimport \"./tankStats.css\"\r\n\r\ninterface TankStatsProps {\r\n  // tank to display information about\r\n  tank: Tank;\r\n}\r\n\r\ninterface TankStatsState {}\r\n\r\n/**\r\n * Information about a single tank (player) during the game.\r\n */\r\nexport class TankStats extends React.Component<TankStatsProps, TankStatsState> {\r\n  render() {\r\n    const health = this.props.tank.getHealth();\r\n    const nameStyle = health <= 0 ? {color: \"grey\"} : {};\r\n    const hpStyle = health < 20 ? {color: \"red\"} : {};\r\n    return (\r\n      <div className=\"tank-stats\">\r\n        <div>\r\n          <span style={nameStyle}>{this.props.tank.getName()}</span><span style={hpStyle}>{`${health} HP`}</span>\r\n        </div>\r\n        <div>\r\n          <span>{`${this.props.tank.getDamageDealt()} damage`}</span><span>{`${this.props.tank.getKills()} kills`}</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport {\r\n  TANK_MOVEMENT_SPEED,\r\n  BASE_CANVAS_HEIGHT,\r\n  BASE_CANVAS_WIDTH,\r\n  GUN_MOVEMENT_SPEED,\r\n  BASE_TANK_WIDTH,\r\n  OBSTACLE_PART_SIZE, BASE_GROUND_START, BASE_GROUND_HEIGHT\r\n} from \"../../constants/constants\";\r\nimport Explosion from \"../../game_objects/explosion\";\r\nimport { centerDistance } from \"../../game_objects/gameUtils\";\r\nimport { ObstacleFactory } from \"../../game_objects/obstacleFactory\";\r\nimport Projectile from \"../../game_objects/projectile\";\r\nimport { SquaredObstacle } from \"../../game_objects/squaredObstacle\";\r\nimport Tank from \"../../game_objects/tank\";\r\nimport { PlayerStats } from \"../../player/playerStats\";\r\nimport { floorToHundret } from \"../../utils/math\";\r\nimport logo from \"../../assets/imgs/logo.svg\";\r\nimport \"./gameArea.css\";\r\nimport { TankStats } from \"./tankStats\";\r\nimport {AudioPlayer} from \"../../utils/audioPlayer\";\r\n\r\n/**\r\n * Init obstacle and tank positions for 2, 3 and 4 players (on 0, 1, 2 index).\r\n * o = false means player, o = true means obsatcle, i is the number of the\r\n * obstacle/tank.\r\n */\r\nconst initPositions: { o: boolean; i: number }[][] = [\r\n  [\r\n    { o: false, i: 0 },\r\n    { o: true, i: 0 },\r\n    { o: true, i: 1 },\r\n    { o: false, i: 1 }\r\n  ], // 2 tanks\r\n  [\r\n    { o: false, i: 0 },\r\n    { o: true, i: 0 },\r\n    { o: false, i: 1 },\r\n    { o: true, i: 1 },\r\n    { o: false, i: 2 }\r\n  ], // 3 tanks\r\n  [\r\n    { o: false, i: 0 },\r\n    { o: true, i: 0 },\r\n    { o: false, i: 1 },\r\n    { o: true, i: 1 },\r\n    { o: false, i: 2 },\r\n    { o: true, i: 2 },\r\n    { o: false, i: 3 }\r\n  ] // 4 tanks\r\n];\r\n\r\ninterface GameAreaProps {\r\n  /**\r\n   * Array of players for the game.\r\n   */\r\n  players: PlayerStats[];\r\n  /**\r\n   *\r\n   */\r\n  onEnd: (playerResults: PlayerStats[]) => void;\r\n}\r\n\r\n// GameArea state is not maintained by React\r\ninterface GameAreaState {\r\n  tanks: Tank[];\r\n}\r\n\r\n/**\r\n * GameArea contains canvas for graphical representation of the game.\r\n * The cnavas is maintained by plain TypeScript (by update loop), not by React.\r\n */\r\nexport class GameArea extends React.Component<GameAreaProps, GameAreaState> {\r\n  // @ts-ignore - canvas element\r\n  private canvas: HTMLCanvasElement;\r\n  // @ts-ignore - canvas context\r\n  private ctx: CanvasRenderingContext2D;\r\n  // @ts-ignore - ratio of current canvas size and referential size 800x320\r\n  private sizeRatio: number;\r\n  // @ts-ignore - GameArea footer\r\n  private footer: HTMLElement;\r\n  // @ts-ignore - player information\r\n  private roundPlayerInfoDiv: HTMLDivElement;\r\n  // @ts-ignore - wind information\r\n  private windDiv: HTMLDivElement;\r\n  // @ts-ignore - current loaded ammo short info span\r\n  private ammoShortInfo: HTMLSpanElement;\r\n  // @ts-ignore - current loaded ammo long info span\r\n  private ammoLongInfo: HTMLSpanElement;\r\n  // @ts-ignore - projectile launch speed input\r\n  private launchSpeedInput: HTMLInputElement;\r\n\r\n  // index of the current tank in the this.state.tanks array\r\n  private curTankIdx: number = 0;\r\n  // +1 for move right, -1 for move left, 0 for stay\r\n  private movement: number = 0;\r\n  // +1 for move right, -1 for move left, 0 for stay\r\n  private gunMovement: number = 0;\r\n  // whether the fire button was clicked in last update loop iteration\r\n  private fireClicked: boolean = false;\r\n  // array of active projectiles in the game\r\n  private projectiles: Projectile[] = [];\r\n  // obstacles in the game\r\n  private obstacles: SquaredObstacle[] = [];\r\n  // animated explosions\r\n  private explosions: Explosion[] = [];\r\n\r\n  // wind: positive values means wind to right, negative to left\r\n  private wind: number = this.initWind();\r\n  // number of the current round (increased after shot of all players)\r\n  private round: number = 1;\r\n\r\n  private lastUpdateTime: number = 0;\r\n\r\n  public constructor(props: GameAreaProps) {\r\n    super(props);\r\n    this.state = {\r\n      tanks: this.props.players.map(p => new Tank(p))\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Returns current selected tank.\r\n   */\r\n  private curTank(): Tank {\r\n    return this.state.tanks[this.curTankIdx];\r\n  }\r\n\r\n  /**\r\n   * Update loop.\r\n   */\r\n  private update = (): void => {\r\n    // computes time diff\r\n    const t = Date.now();\r\n    const dt = t - this.lastUpdateTime;\r\n    this.lastUpdateTime = t;\r\n\r\n    // clears the canvas\r\n    this.ctx.clearRect(0, 0, this.canvas.width, BASE_GROUND_START * this.sizeRatio);\r\n    this.ctx.fillStyle = \"#189b18\";\r\n    this.ctx.fillRect(0, BASE_GROUND_START * this.sizeRatio, this.canvas.width, BASE_GROUND_HEIGHT * this.sizeRatio);\r\n    // moves current tank\r\n    this.moveTank(dt);\r\n    // moves current tank gun\r\n    this.curTank().moveGun(this.gunMovement * dt);\r\n    // saves whether there were any projectiles\r\n    const wereProjectiles: boolean = this.projectiles.length > 0;\r\n    // moves all projectiles\r\n    this.projectiles.forEach(p => p.move(this.wind, dt));\r\n    // collides projectiles\r\n    this.projectiles.forEach(p => this.collide(p));\r\n    // filters projectiles out of screen and exploded\r\n    this.projectiles = this.projectiles.filter(\r\n      p =>\r\n        p.canReturnToRange(0, BASE_CANVAS_WIDTH, BASE_CANVAS_HEIGHT) &&\r\n        !p.isExploded()\r\n    );\r\n    // filters destroyed obstacles\r\n    this.obstacles = this.obstacles.filter(o => o.getColumnsCount() > 0);\r\n    // filters finished explosions\r\n    this.explosions = this.explosions.filter(e => e.isAnimationOn());\r\n    // moves destroyed tanks out of screen - does not remove them (they are needed for results)\r\n    this.state.tanks.forEach(t => {\r\n      if (t.getHealth() <= 0) {\r\n        t.setXPos(2 * BASE_CANVAS_WIDTH);\r\n        t.setYPos(2 * BASE_CANVAS_HEIGHT);\r\n      }\r\n    })\r\n    // saves whether there was any animation on\r\n    const wasAnimation: boolean =\r\n      this.obstacles.some(o => o.isAnimationOn()) ||\r\n      this.explosions.some(e => e.isAnimationOn());\r\n    // shows all projectiles\r\n    this.projectiles.forEach(p => p.show(this.ctx, this.sizeRatio));\r\n    // shows all tanks\r\n    this.state.tanks.forEach(t => t.show(this.ctx, this.sizeRatio));\r\n    // shows all obstacles\r\n    this.obstacles.forEach(o => o.show(this.ctx, this.sizeRatio));\r\n    // shows all explosions\r\n    this.explosions.forEach(e => e.show(this.ctx, this.sizeRatio));\r\n    // saves whether there is any animation on now\r\n    const isAnimation: boolean =\r\n      this.obstacles.some(o => o.isAnimationOn()) ||\r\n      this.explosions.some(e => e.isAnimationOn());\r\n    // true if the game has not ended yet\r\n    let gameInProgress = true;\r\n    // when fire button was pressed\r\n    if (this.fireClicked) {\r\n      this.fire();\r\n    }\r\n    // if there is only 0 or 1 alive tanks left, ends game\r\n    else if (!isAnimation && this.state.tanks.filter(t => t.isAlive()).length < 2) {\r\n      this.endGame();\r\n      gameInProgress = false;\r\n    }\r\n    // when last active projective disappeared and there is no animation\r\n    else if (this.projectiles.length === 0 && wereProjectiles && !isAnimation) {\r\n      this.nextRound();\r\n    }\r\n    // when the all animations ended and there is no projectile\r\n    else if (!isAnimation && wasAnimation && this.projectiles.length === 0) {\r\n      this.nextRound();\r\n    }\r\n    if (gameInProgress) {\r\n      requestAnimationFrame(this.update);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Moves the current tank if the move is valid.\r\n   *\r\n   * @param dt time delta in ms\r\n   */\r\n  private moveTank(dt: number): void {\r\n    const tank: Tank = this.curTank();\r\n    if (this.movement !== 0) {\r\n      const movement = this.movement * dt;\r\n      // checks whether the move is valid\r\n      const newLeft = tank.getXPos() + movement;\r\n      const newRight = tank.getXPos() + BASE_TANK_WIDTH + movement;\r\n      // true if no screens tank is hit...\r\n      const tanksOk = this.state.tanks\r\n        .filter((_, i) => i !== this.curTankIdx)\r\n        .every(t => {\r\n          const tankLeft = t.getXPos();\r\n          const tankRight = t.getXPos() + BASE_TANK_WIDTH;\r\n          return newRight <= tankLeft || newLeft >= tankRight;\r\n        });\r\n      // true if no obstacle is hit...\r\n      const obstaclesOk =\r\n        tanksOk &&\r\n        this.obstacles.every(o => {\r\n          const obstacleLeft = o.getXPos();\r\n          const obstacleRight =\r\n            o.getXPos() + o.getColumnsCount() * OBSTACLE_PART_SIZE;\r\n          return newRight <= obstacleLeft || newLeft >= obstacleRight;\r\n        });\r\n      const rangeOk = obstaclesOk && newLeft >= 0 && newRight < BASE_CANVAS_WIDTH;\r\n      if (rangeOk) {\r\n        this.curTank().diffXPos(movement);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fires the current tank. Adds new projectiles to the projectile array.\r\n   * Updates displayed ammo count. Disables buttons.\r\n   */\r\n  private fire = () => {\r\n    this.projectiles.push(...this.curTank().fire(Number(this.launchSpeedInput.value)));\r\n    this.updateAmmoInfo();\r\n    this.fireClicked = false;\r\n    this.disableButtons(true);\r\n\r\n    AudioPlayer.shotSound();\r\n  };\r\n\r\n  /**\r\n   * Updates displayed player stats and wind. Enables buttons.\r\n   * Expects at least one player alive.\r\n   */\r\n  private nextRound = () => {\r\n    this.disableButtons(false);\r\n    const beforeIdx = this.curTankIdx;\r\n    this.curTankIdx = (this.curTankIdx + 1) % this.state.tanks.length;\r\n    while (!this.curTank().isAlive()) {\r\n      this.curTankIdx = (this.curTankIdx + 1) % this.state.tanks.length;\r\n    }\r\n    if (this.curTankIdx < beforeIdx) {\r\n      ++this.round;\r\n    }\r\n    // @ts-ignore - updates current player name\r\n    this.roundPlayerInfoDiv.innerText = `Round: ${this.round} - Player: ${this.curTank().getName()}`;\r\n    // updates current selected ammo\r\n    this.updateAmmoInfo();\r\n    this.launchSpeedInput.value = String(this.curTank().getLastLaunchSpeed());\r\n    // updates current wind value\r\n    this.wind += Math.random() * 4 - 2;\r\n    // @ts-ignore\r\n    this.windDiv.innerText = this.formatWind();\r\n  };\r\n\r\n  /**\r\n   * Sets given disable status in all buttons in GameArea footer.\r\n   */\r\n  private disableButtons = (disable: boolean) => {\r\n    // @ts-ignore\r\n    [...this.footer.getElementsByTagName(\"button\")].forEach(b => {\r\n      b.disabled = disable;\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Checks whether the given projectile hits anything in the GameArea.\r\n   * If so, explodes it.\r\n   */\r\n  private collide = (p: Projectile) => {\r\n    if (\r\n      // if the ground is hit\r\n      p.getYPos() + p.getRadius() > BASE_GROUND_START ||\r\n      // or some tank is hit\r\n      this.state.tanks.some(t => t.isCollision(p)) ||\r\n      // or some obstacle is hit\r\n      this.obstacles.some(o => o.isCollision(p))\r\n    ) {\r\n      this.explode(p);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Explodes the given projectile. Checks whether which tanks should take damage.\r\n   */\r\n  private explode = (proj: Projectile) => {\r\n    proj.explode();\r\n    // @ts-ignore\r\n    const originTank: Tank = this.state.tanks.find(t => t.getId() === proj.getOriginId());\r\n    this.state.tanks.forEach(tank => {\r\n      if (tank.isAlive() && centerDistance(tank, proj) < proj.getExplosionRadius()) {\r\n        // if a tank was destroyed\r\n        if (tank.receiveDamage(proj.getDamage())) {\r\n          this.explosions.push(new Explosion(tank.getXPos() + BASE_TANK_WIDTH / 2, tank.getYPos(), 50, 0.2));\r\n          // adds kill if the target was destroyed and it is not itself\r\n          if (originTank.getId() !== tank.getId()) {\r\n            originTank.addKill();\r\n          }\r\n        }\r\n        // updates dealt damage if not hit itself\r\n        if (originTank.getId() !== tank.getId()) {\r\n          originTank.changeDamageDealt(proj.getDamage());\r\n        }\r\n        this.setState({}); // forces update\r\n      }\r\n    });\r\n    this.obstacles.forEach(o => o.collide(proj));\r\n    this.explosions.push(new Explosion(proj.getXPos(), proj.getYPos(), proj.getExplosionRadius(), 0.5));\r\n  };\r\n\r\n  /**\r\n   * Clears game update interval, finds winners and losers and passes\r\n   * player stats to parent.\r\n   */\r\n  private endGame = () => {\r\n    const players = this.state.tanks.map(t => t.getPlayer());\r\n    const winner = this.state.tanks.find(t => t.isAlive());\r\n    let winnerId = NaN;\r\n    if (winner !== undefined) {\r\n      winnerId = winner.getId();\r\n    }\r\n    players.forEach(p => {\r\n      if (p.id !== winnerId) {\r\n        p.loses = 1;\r\n      } else {\r\n        p.wins = 1;\r\n      }\r\n    });\r\n    this.props.onEnd(players);\r\n  };\r\n\r\n  /**\r\n   * Creates initial wind value from uniform distribution on interval (-50, 50).\r\n   */\r\n  private initWind(): number {\r\n    return Math.random() * 100 - 50;\r\n  }\r\n\r\n  /**\r\n   * Returns formated string description of current wind direction and power.\r\n   */\r\n  private formatWind(): string {\r\n    let strWind: string = String(Math.abs(Math.round(this.wind)));\r\n    if (this.wind < -30) {\r\n      strWind = \"<<< \" + strWind;\r\n    } else if (this.wind < -15) {\r\n      strWind = \"<< \" + strWind;\r\n    } else if (this.wind < 0) {\r\n      strWind = \"< \" + strWind;\r\n    } else if (this.wind > 30) {\r\n      strWind = strWind + \" >>>\";\r\n    } else if (this.wind > 15) {\r\n      strWind = strWind + \" >>\";\r\n    } else if (this.wind > 0) {\r\n      strWind = strWind + \" >\";\r\n    }\r\n    return \"Wind: \" + strWind;\r\n  }\r\n\r\n  /**\r\n   * Updates displayed short and long ammo info.\r\n   */\r\n  private updateAmmoInfo = () => {\r\n    this.ammoShortInfo.innerText = this.curTank().getCurrentProjectileShortStats();\r\n    this.ammoLongInfo.innerText = this.curTank().getCurrentProjectileLongStats();\r\n  }\r\n\r\n  /**\r\n   * Creates an HTMLButtonElement with given text. Given onTrigger function\r\n   * is set as onmousedown listener. Given onReset function is set as onmouseup\r\n   * and onmouseleave listeners.\r\n   */\r\n  private createButton(text: string, onTrigger: (e: Event) => void, onReset: (e: Event) => void = () => {}): HTMLButtonElement {\r\n    const button = document.createElement(\"button\");\r\n    button.textContent = text;\r\n    button.onmousedown = onTrigger;\r\n    button.onmouseup = onReset;\r\n    button.onmouseleave = onReset;\r\n    button.ontouchstart = onTrigger;\r\n    button.ontouchend = onReset;\r\n    button.ontouchcancel = onReset;\r\n    return button;\r\n  }\r\n\r\n  /**\r\n   * Creates HTMLSpanElement with given text.\r\n   */\r\n  private createSpan(text: string): HTMLSpanElement {\r\n    const span = document.createElement(\"span\");\r\n    span.innerText = text;\r\n    return span;\r\n  }\r\n\r\n  /**\r\n   * Creates HTMLDIvElement with player and wind info.\r\n   */\r\n  private createInfoDiv(): HTMLDivElement {\r\n    const div: HTMLDivElement = document.createElement(\"div\");\r\n    div.classList.add(\"info-div\");\r\n    // application logo\r\n    const logoImg = document.createElement(\"img\");\r\n    logoImg.src = logo;\r\n    logoImg.alt = \"Tanks2D\";\r\n    div.appendChild(logoImg);\r\n    // current player name\r\n    this.roundPlayerInfoDiv = document.createElement(\"div\");\r\n    this.roundPlayerInfoDiv.innerText = `Round: ${this.round} - Player: ${this.curTank().getName()}`;\r\n    div.appendChild(this.roundPlayerInfoDiv);\r\n    return div;\r\n  }\r\n\r\n  /**\r\n   * Creates HTMLDIvElement with movement and gun movement buttons.\r\n   */\r\n  private createMoveGunDiv(): HTMLDivElement {\r\n    const moveGunDiv: HTMLDivElement = document.createElement(\"div\");\r\n    moveGunDiv.classList.add(\"move-gun-div\");\r\n    // current wind\r\n    this.windDiv = document.createElement(\"div\");\r\n    this.windDiv.innerText = this.formatWind();\r\n    moveGunDiv.appendChild(this.windDiv);\r\n    // movement buttons\r\n    const movementDiv: HTMLDivElement = document.createElement(\"div\");\r\n    movementDiv.classList.add(\"move-div\");\r\n    movementDiv.appendChild(\r\n      this.createButton(\r\n        \"\",\r\n        () => (this.movement = -TANK_MOVEMENT_SPEED),\r\n        () => (this.movement = 0)\r\n      )\r\n    );\r\n    movementDiv.appendChild(this.createSpan(\" MOVE \"));\r\n    movementDiv.appendChild(\r\n      this.createButton(\r\n        \"\",\r\n        () => (this.movement = TANK_MOVEMENT_SPEED),\r\n        () => (this.movement = 0)\r\n      )\r\n    );\r\n    moveGunDiv.appendChild(movementDiv);\r\n    // gun movement buttons\r\n    const gunDiv: HTMLDivElement = document.createElement(\"div\");\r\n    gunDiv.classList.add(\"gun-div\");\r\n    gunDiv.appendChild(\r\n      this.createButton(\r\n        \"\",\r\n        () => (this.gunMovement = -GUN_MOVEMENT_SPEED),\r\n        () => (this.gunMovement = 0)\r\n      )\r\n    );\r\n    gunDiv.appendChild(this.createSpan(\" GUN \"));\r\n    gunDiv.appendChild(\r\n      this.createButton(\r\n        \"\",\r\n        () => (this.gunMovement = GUN_MOVEMENT_SPEED),\r\n        () => (this.gunMovement = 0)\r\n      )\r\n    );\r\n    moveGunDiv.appendChild(gunDiv);\r\n    return moveGunDiv;\r\n  }\r\n\r\n  /**\r\n   * Creates HTMLDIvElement with ammo changing and fire buttons.\r\n   */\r\n  private createAmmoFireDiv(): HTMLDivElement {\r\n    const ammoFire: HTMLDivElement = document.createElement(\"div\");\r\n    ammoFire.classList.add(\"ammo-fire-div\");\r\n    // ammo change buttons\r\n    const ammoDiv: HTMLDivElement = document.createElement(\"div\");\r\n    ammoDiv.classList.add(\"ammo-div\");\r\n    ammoDiv.appendChild(\r\n      this.createButton(\"\", () => {\r\n        this.curTank().loadPrevProjectile();\r\n        this.updateAmmoInfo();\r\n      })\r\n    );\r\n    const ammoInfoDiv = document.createElement(\"div\");\r\n    ammoInfoDiv.classList.add(\"ammo-info-div\");\r\n    this.ammoShortInfo = this.createSpan(this.curTank().getCurrentProjectileShortStats());\r\n    this.ammoShortInfo.classList.add(\"short-info-span\");\r\n    this.ammoLongInfo = this.createSpan(this.curTank().getCurrentProjectileLongStats());\r\n    this.ammoLongInfo.classList.add(\"long-info-span\");\r\n    ammoInfoDiv.appendChild(this.ammoShortInfo);\r\n    ammoInfoDiv.appendChild(this.ammoLongInfo);\r\n    ammoDiv.appendChild(ammoInfoDiv);\r\n    ammoDiv.appendChild(\r\n      this.createButton(\"\", () => {\r\n        this.curTank().loadNextProjectile();\r\n        this.updateAmmoInfo();\r\n      })\r\n    );\r\n    ammoFire.appendChild(ammoDiv);\r\n    // fire power slider\r\n    this.launchSpeedInput = document.createElement(\"input\");\r\n    this.launchSpeedInput.type = \"range\";\r\n    this.launchSpeedInput.min = \"10\";\r\n    this.launchSpeedInput.max = \"100\";\r\n    this.launchSpeedInput.value = \"50\";\r\n    ammoFire.appendChild(this.launchSpeedInput);\r\n    // fire div\r\n    const fireDiv: HTMLDivElement = document.createElement(\"div\");\r\n    fireDiv.classList.add(\"fire-div\");\r\n    fireDiv.appendChild(\r\n      this.createButton(\"Fire!\", () => (this.fireClicked = true))\r\n    );\r\n    ammoFire.appendChild(fireDiv);\r\n    return ammoFire;\r\n  }\r\n\r\n  /**\r\n   * Computes the size of the canvas and ratio to the reference size 800x320.\r\n   * Sets initial positions of tanks.\r\n   */\r\n  private computeSize(): void {\r\n    // gets rounded window width\r\n    let windowWidth: number = floorToHundret(window.innerWidth * 0.9);\r\n    // asserts too wide windows\r\n    windowWidth = windowWidth > 1400 ? 1400 : windowWidth;\r\n    this.sizeRatio = windowWidth / BASE_CANVAS_WIDTH;\r\n    console.log(\"ratio: \" + this.sizeRatio);\r\n    this.canvas.width = windowWidth;\r\n    this.canvas.height = windowWidth / 2.5;\r\n  }\r\n\r\n  /**\r\n   * Sets init position of tanks and obstacles.\r\n   */\r\n  private initPositions(): void {\r\n    const positions = initPositions[this.state.tanks.length - 2];\r\n    const distance: number = BASE_CANVAS_WIDTH / positions.length;\r\n    const obstacleFactory = new ObstacleFactory();\r\n    positions.forEach((pos, i) => {\r\n      // adding obstacle\r\n      if (pos.o) {\r\n        this.obstacles.push(obstacleFactory.random(distance * (i + 0.5), BASE_GROUND_START));\r\n      }\r\n      // setting tank position\r\n      else {\r\n        this.state.tanks[pos.i].setXPos(distance * (i + 0.5) - BASE_TANK_WIDTH / 2);\r\n        this.state.tanks[pos.i].setYPos(BASE_GROUND_START);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sets inner structure of the component not maintained by React.\r\n   */\r\n  componentDidMount() {\r\n    // @ts-ignore - gets parent section\r\n    const gameArea: HTMLElement = document.getElementById(\"game-area\");\r\n    window.addEventListener(\"resize\", () => this.computeSize());\r\n    // create canvas for graphics\r\n    this.canvas = document.createElement(\"canvas\");\r\n    // @ts-ignore\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n    const canvasContainer = document.createElement(\"div\");\r\n    canvasContainer.classList.add(\"canvas-container\");\r\n    canvasContainer.appendChild(this.canvas)\r\n\r\n    // computes size of the canvas\r\n    this.computeSize();\r\n    // sets init positions of tanks and obstacles\r\n    this.initPositions();\r\n\r\n    // create footer\r\n    this.footer = document.createElement(\"footer\");\r\n    // info about player and wind\r\n    this.footer.appendChild(this.createInfoDiv());\r\n    // div with movement and gun movement\r\n    this.footer.appendChild(this.createMoveGunDiv());\r\n    // div with ammo and fire\r\n    this.footer.appendChild(this.createAmmoFireDiv());\r\n\r\n    // appends children\r\n    gameArea.insertAdjacentElement(\"afterbegin\", this.footer);\r\n    gameArea.insertAdjacentElement(\"afterbegin\", canvasContainer);\r\n\r\n    // starts update loop\r\n    this.lastUpdateTime = Date.now();\r\n    requestAnimationFrame(this.update);\r\n  }\r\n\r\n  /**\r\n   * Renders parent component. Main tasks are not maintained by React.\r\n   */\r\n  render() {\r\n    return (\r\n      <section id=\"game-area\" className=\"game-area\">\r\n        <div className=\"tank-stats-container\">\r\n          {this.state.tanks.map((tank, i) => {\r\n            return <TankStats tank={tank} key={i} />;\r\n          })}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import { BASE_TANK_WIDTH } from \"../constants/constants\";\r\nimport { BASE_TANK_HEIGHT } from \"../constants/constants\";\r\nimport { euclideanDistance } from \"../utils/math\";\r\nimport Projectile from \"./projectile\";\r\nimport Tank from \"./tank\";\r\n\r\n/**\r\n * Computes the distance of the tank and projectile centers.\r\n */\r\nexport function centerDistance(tank: Tank, p: Projectile): number {\r\n  return euclideanDistance(\r\n    tank.getXPos() + BASE_TANK_WIDTH / 2,\r\n    tank.getYPos() - BASE_TANK_HEIGHT / 2,\r\n    p.getXPos(),\r\n    p.getYPos()\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {PlayerStats, sortPlayers} from \"../../player/playerStats\";\r\nimport {PlayerTable} from \"./playerTable\";\r\nimport \"./resultPage.css\"\r\n\r\ninterface ResultsPageProps {\r\n  // array of player results from the game.\r\n  players: PlayerStats[];\r\n}\r\n\r\ninterface ResultsPageState {}\r\n\r\n/**\r\n * Shows game results for given players.\r\n */\r\nexport class ResultsPage extends React.Component<\r\n  ResultsPageProps,\r\n  ResultsPageState\r\n> {\r\n  render() {\r\n    const players = sortPlayers(this.props.players);\r\n    return (\r\n      <section className=\"result-page\">\r\n        <PlayerTable\r\n          players={players}\r\n          showWins={false}\r\n          showDelete={false}\r\n        />\r\n        <Link className=\"menu-button link\" to=\"/\">Back</Link>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./homePage.css\";\r\n\r\ninterface HomePageProps {}\r\n\r\ninterface HomePageStats {}\r\n\r\n/**\r\n * Home page of the game with the main navigation.\r\n */\r\nexport class HomePage extends React.Component<HomePageProps, HomePageStats> {\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"home-page\">\r\n        <Link className=\"menu-button link\" to=\"/play\">New game</Link>\r\n        <Link className=\"menu-button link\" to=\"/stats\">Statistics</Link>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\r\nimport StatsPage from \"./screens/statsPage\";\r\nimport \"./tankGame.css\";\r\nimport {Logo} from \"./logo\";\r\nimport {AudioPlayer} from \"../utils/audioPlayer\";\r\nimport {PlayWrapper} from \"./screens/playWrapper\";\r\nimport {HomePage} from \"./screens/homePage\";\r\n\r\ninterface TankGameProps {}\r\n\r\ninterface TankGameState {\r\n  backgroundMusic: boolean;\r\n  online: boolean;\r\n}\r\n\r\n/**\r\n * Main component which dispatches to each page sections.\r\n */\r\nexport class TankGame extends React.Component<TankGameProps, TankGameState> {\r\n  constructor(props: TankGameProps) {\r\n    super(props);\r\n    this.state = {\r\n      backgroundMusic: false,\r\n      online: navigator.onLine\r\n    };\r\n    window.addEventListener(\"online\", () => this.setState({online: true}));\r\n    window.addEventListener(\"offline\", () => this.setState({online: false}));\r\n  }\r\n\r\n  private toggleBackgroundMusic = () => {\r\n    const newState = !this.state.backgroundMusic;\r\n    this.setState({backgroundMusic: newState});\r\n    if (newState) {\r\n      AudioPlayer.startBackgroundMusic();\r\n    }\r\n    else {\r\n      AudioPlayer.pauseBackgroundMusic();\r\n    }\r\n  }\r\n\r\n  private renderHeader = () => {\r\n    const onlineString = this.state.online ? \"online\" : \"offline\";\r\n    return (\r\n      <header>\r\n        <Logo width={300}/>\r\n        <div>\r\n          <button onClick={this.toggleBackgroundMusic} className=\"menu-button\">\r\n            {\"Music \" + (this.state.backgroundMusic ? \"on\" : \"off\")}\r\n          </button>\r\n          <div className={\"online-point \" + onlineString}>\r\n            <span>{onlineString}</span>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <BrowserRouter>\r\n        <main>\r\n          {this.renderHeader()}\r\n          <Switch>\r\n            <Route path=\"/stats\">\r\n              <StatsPage />\r\n            </Route>\r\n            <Route path=\"/play\">\r\n              <PlayWrapper />\r\n            </Route>\r\n            <Route path=\"/\">\r\n              <HomePage />\r\n            </Route>\r\n          </Switch>\r\n        </main>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { TankGame } from \"./components/tankGame\";\nimport reportWebVitals from './reportWebVitals';\n\n/**\n * @license The software is Licensed under the MIT License\n *\n * Copyright (c) Luk Kotlk\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n * documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n * to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions\n * of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO\n * THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n *\n *\n *\n * Used music is free to non-commercial use:\n * - Artist: CEPHEI\n * - Track: The enemy will not pass\n */\nReactDOM.render(\n  <React.StrictMode>\n    <TankGame />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}